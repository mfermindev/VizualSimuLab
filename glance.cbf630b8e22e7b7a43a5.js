!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var a=t();for(var i in a)("object"==typeof exports?exports:e)[i]=a[i]}}(self,(function(){return(self.webpackChunkglance=self.webpackChunkglance||[]).push([[2],{465:function(e,t,a){"use strict";a.r(t),a.d(t,{createViewer:function(){return Oa},getReader:function(){return ka},importBase64Dataset:function(){return Va},listReaders:function(){return Ia},listSupportedExtensions:function(){return Ta},loadFiles:function(){return $a},openFiles:function(){return Da},registerReader:function(){return Ma},registerReadersToProxyManager:function(){return Za},setActiveProxyConfiguration:function(){return Ra}});var i=a(542),s=a(602),n=a(133),o=a(543),r=a(548),l=a(320);i.Z.use(o.ZP);const{girderRoute:c}=l.Z.extractURLParameters(),d=c||"https://repository.data",u=new r.ZP({apiRoot:d});u.fetchUser();var p={girderRest:u},m=a(685),v=(a(468),a(363)),g=a(471),h=a(472),y=a(473),f=a(369),b=a(474),x=a(475),w=a(476),_=a(477),S=a(55),P=a.n(S),C=a(8);function k(e,t){t.classHierarchy.push("vtkGlanceStateReader"),t.appState=null,e.parseAsArrayBuffer=a=>{return a&&a!==t.rawDataBuffer?(t.rawDataBuffer=a,(i=a,new Promise(((e,t)=>{const a=new(P());a.loadAsync(i).then((()=>{a.forEach(((a,i)=>{a.match(/state\.json$/i)&&i.async("string").then((t=>{e(JSON.parse(t))})).catch(t)}))})).catch(t)}))).then((a=>(t.appState=a,e.modified(),t.appState)))):Promise.resolve(t.appState);var i},e.requestData=()=>{e.parseAsArrayBuffer(t.rawDataBuffer)}}function V(e,t,a={}){Object.assign(t,a),C.ZP.obj(e,t),C.ZP.algo(e,t,0,1),C.ZP.get(e,t,["appState"]),k(e,t)}var I={newInstance:C.ZP.newInstance(V,"vtkGlanceStateReader"),extend:V},T=(a(478),a(17)),$=a(479),D=a(10),M=a(371),Z=a(113);function L(e,t){const a=t=>function(e,t,a){return e[t]?(e[t][0]=Math.min(e[t][0],a[0]),e[t][1]=Math.max(e[t][1],a[1])):e[t]=a.slice(),e}(e,t.getName(),t.getRange(-1));t.getPointData().getArrays().forEach(a),t.getCellData().getArrays().forEach(a)}function R(e,t){t.classHierarchy.push("vtkGlanceVtkJsReader"),e.parseAsArrayBuffer=a=>{return a&&a!==t.rawDataBuffer?(t.rawDataBuffer=a,(i=a,new Promise((e=>{let t=0;const a=T.ZP.get("zip",{zipContent:i,callback(){const i=$.ZP.newInstance({dataAccessHelper:a,startLODLoaders:!1});i.setUrl("index.json"),i.onReady((()=>{if(++t===i.getScene().length){const t={...i.getMetadata()};t.scene=i.getScene(),t.animationHandler=i.getAnimationHandler(),e(t)}}))}})}))).then((({scene:a,camera:i,background:s,lookupTables:n,cameraViewPoints:o,animationHandler:r})=>(t.scene=a,t.camera=i,t.background=s,t.lookupTables=n,t.cameraViewPoints=o,t.animationHandler=r,e.modified(),t.scene)))):Promise.resolve(t.appState);var i},e.requestData=()=>{e.parseAsArrayBuffer(t.rawDataBuffer)},e.setProxyManager=e=>{const a=e.getViews(),i={};t.scene.forEach((s=>{const{source:n,mapper:o,actor:r,volume:l,name:c,volumeComponents:d}=s,u=r?r.get("origin","scale","position"):{},p=l?l.get("origin","scale","position"):{},m=r?r.getProperty().get("representation","edgeVisibility","diffuseColor","pointSize","opacity"):{},v=l?l.getProperty().get("interpolationType","independantComponents","shade"):{},g=o.get("colorByArrayName","colorMode","scalarMode"),h=e.createProxy("Sources","TrivialProducer",{name:c});h.setInputAlgorithm(n,n.getOutputData().getClassName()),h.activate(),L(i,n.getOutputData());for(let i=0;i<a.length;i++){const s=a[i],n=e.getRepresentation(h,a[i]);if(n.setRescaleOnColorBy(!1),r){const e=n.getActors()[0];e&&(e.set(u),e.getProperty().set(m),e.getMapper().set(g),r.getTextures().forEach((t=>{e.addTexture(t)})))}if(l){const e=n.getVolumes()[0];e&&(e.set(p),e.getProperty().set(v))}let o="pointData";if(g.scalarMode===D.ZP.ScalarMode.USE_CELL_FIELD_DATA&&(o="cellData"),n.setColorBy(g.colorByArrayName,o),"default"===s.getName()&&(s.getCamera().set(t.camera),t.animationHandler&&t.animationHandler.addRenderer(s.getRenderer())),d){const[e]=n.getColorBy(),[{rgbTransferFunction:t,scalarOpacity:a}]=d,i=n.getLookupTableProxy(e),s=n.getPiecewiseFunctionProxy(e);if(t){i.setPresetName("-");const[e,a]=t.getMappingRange();i.setDataRange(e,a),i.setMode(M.Z.Mode.Nodes),i.getLookupTable().setColorSpace(t.getColorSpace()),i.setNodes(t.get("nodes").nodes)}if(a){s.getPiecewiseFunction().setClamping(a.getClamping());const e=[],t=a.getRange();s.setDataRange(...t);const i=t[1]-t[0];for(let s=0;s<a.getSize();++s){const n=[];a.getNodeValue(s,n);const[o,r,l,c]=n;e.push({x:(o-t[0])/i,y:r,midpoint:l,sharpness:c})}s.setMode(Z.Z.Mode.Nodes),s.setNodes(e)}}}const{textureLODsDownloader:y}=s;if(y){y.setStepFinishedCallback(e.renderAllViews);const t=e.getReferenceByName("$store").state.views.maxTextureLODSize;y.setMaxTextureLODSize(t),y.startDownloads()}const{dataSetLODsLoader:f}=s;if(f){const e=()=>{const e=f.getCurrentSource();h.setInputAlgorithm(e,e.getOutputData().getClassName())};f.setStepFinishedCallback(e),f.startDownloads()}if(t.animationHandler&&e.getProxyInGroup("AnimationManager").length){const a=e.getProxyInGroup("AnimationManager")[0],i=e.createProxy("Animations","TimeStepAnimation");i.setInputAnimationHandler(t.animationHandler),a.addAnimation(i),a.onCurrentFrameChanged((()=>e.renderAllViews()))}})),Object.keys(i).forEach((t=>{e.getLookupTable(t).setDataRange(...i[t])})),Object.keys(t.lookupTables||{}).forEach((a=>{const i=t.lookupTables[a],s=e.getLookupTable(a),n=s.getLookupTable(),o=i.nodes[0][0],r=i.nodes[i.nodes.length-1][0];s.setPresetName("-"),s.setDataRange(o,r),s.setMode(3),n.setColorSpace(i.colorSpace),s.setNodes(i.nodes.map((([e,t,a,i,s,n])=>({x:e,r:t,g:a,b:i,midpoint:s,sharpness:n}))))})),e.renderAllViews()}}function O(e,t,a={}){Object.assign(t,a),C.ZP.obj(e,t),C.ZP.get(e,t,["scene","camera","background","cameraViewPoints"]),R(e,t)}var B={newInstance:C.ZP.newInstance(O,"vtkGlanceVtkJsReader"),extend:O},A=a(480);let F=0;function N(e,t){t.classHierarchy.push("vtkGlanceZipObjReader"),e.parseAsArrayBuffer=a=>a&&a!==t.rawDataBuffer?(t.rawDataBuffer=a,function(e){const t={obj:{},mtl:{},img:{}},a={};return new Promise(((i,s)=>{const n=new(P());n.loadAsync(e).then((()=>{let e=0;function s(){0===e&&(Object.keys(t.mtl).forEach((e=>{const a=t.mtl[e],i=e.split("/").filter(((e,t,a)=>t<a.length-1)).join("/");a.listImages().forEach((e=>{const s=`${i}/${e}`,n=t.img[s];n&&a.setImageSrc(e,n)}))})),Object.keys(t.obj).forEach((e=>{const i=e.replace(/\.obj$/,".mtl"),s=t.obj[e],n=t.mtl[i],o=s.getNumberOfOutputPorts();for(let e=0;e<o;e++){const t=s.getOutputData(e),i=t.getReferenceByName("name"),o=`${i}__${F++}`;a[o]={name:i,dataset:t,mtlReader:n}}})),i(a))}n.forEach(((a,i)=>{a.match(/\.obj$/i)&&(e++,i.async("string").then((i=>{const n=f.ZP.newInstance({splitMode:"usemtl"});n.parseAsText(i),t.obj[a]=n,e--,s()}))),a.match(/\.mtl$/i)&&(e++,i.async("string").then((i=>{const n=A.ZP.newInstance();n.parseAsText(i),t.mtl[a]=n,e--,s()}))),(a.match(/\.jpg$/i)||a.match(/\.png$/i))&&(e++,i.async("base64").then((i=>{const n=a.slice(-3).toLowerCase();t.img[a]=`data:image/${n};base64,${i}`,e--,s()})))}))})).catch(s)}))}(a).then((a=>(t.scene=a,e.modified(),t.scene)))):Promise.resolve(t.appState),e.requestData=()=>{e.parseAsArrayBuffer(t.rawDataBuffer)},e.setProxyManager=e=>{const a=e.getViews();Object.keys(t.scene).forEach((i=>{const{dataset:s,mtlReader:n,name:o}=t.scene[i],r=e.createProxy("Sources","TrivialProducer",{name:i});r.setInputData(s),r.activate();for(let t=0;t<a.length;t++){const i=e.getRepresentation(r,a[t]).getActors()[0];n&&o&&n.applyMaterialToActor(o,i)}})),e.renderAllViews()}}function E(e,t,a={}){Object.assign(t,a),C.ZP.obj(e,t),C.ZP.get(e,t,["scene"]),N(e,t)}var j={newInstance:C.ZP.newInstance(E,"vtkGlanceZipObjReader"),extend:E},G=a(481),W=a(27);const U={},z={readAsArrayBuffer:(e,t)=>G.Z.fetchBinary(e,t),readAsText:(e,t)=>G.Z.fetchText({},e,t)};function H({name:e}){const t=e.toLowerCase(),a=Object.keys(U).find((e=>t.endsWith(e)));return U[a]}let K=null;const Y=document.createElement("input");function q(e){return new Promise(((t,a)=>{const i=H(e);if(i){const{readMethod:s}=i,n=new FileReader;n.onload=function(){(function({fileName:e,data:t}){return new Promise(((a,i)=>{const s=H({name:e});if(s){const{vtkReader:n,parseMethod:o,fileNameMethod:r,sourceType:l}=s,c=n.newInstance();r&&c[r](e);try{const s=c[o](t);Promise.resolve(s).then((t=>a({dataset:t,reader:c,sourceType:l,name:e}))).catch(i)}catch(e){i(e)}}else i(new Error("No reader mapping"))}))})({fileName:e.name,data:n.result}).then((e=>t(e))).catch((e=>a(e)))},n[s](e)}else a(new Error("No reader mapping"))}))}function X(e){const t=[];for(let a=0;a<e.length;a+=1)t.push(q(e[a]));return Promise.all(t)}function J(e,t){const a=[];for(let i=0;i<e.length;i+=1){const{reader:s,sourceType:n,name:o,dataset:r,metadata:l,proxyKeys:c}=e[i];let d=null;if(s||r){const e=s&&s.getOutputData||r&&r.isA&&r.isA("vtkDataSet");let a="TrivialProducer";c&&c.meta&&"vtkLabelMap"===c.meta.glanceDataType&&(a="LabelMap");const i=e?t.createProxy("Sources",a,{name:o,...l}):null;r&&r.isA&&r.isA("vtkDataSet")?i.setInputData(r,n):s&&s.getOutputData?i.setInputAlgorithm(s,n):s&&s.setProxyManager?s.setProxyManager(t):console.error(`No proper reader handler was found for ${o}`),i&&((0,W._3)(t,i),c&&Object.keys(c).forEach((e=>{i.setKey(e,c[e]),"onLoad"===e&&c[e](i)}))),s&&s.getCameraViewPoints&&s.getCameraViewPoints()&&t.getReferenceByName("$store").dispatch("setCameraViewPoints",s.getCameraViewPoints()),d=i}a.push(d)}return t.renderAllViews(),a}Y.setAttribute("type","file"),Y.setAttribute("multiple","multiple"),Y.addEventListener("change",(function(e){K&&K(e.target.files),K=null}));var Q={downloadDataset:function(e,t,a={}){return new Promise(((i,s)=>{const n=H({name:e});if(!n)throw new Error(`No reader found for ${e}`);{const{readMethod:o}=n;z[o](t,a).then((t=>{if(!t)throw new Error(`No data for ${e}`);i(new File([t],e))})).catch(s)}}))},listReaders:function(){return Object.keys(U).map((e=>({name:U[e].name,ext:e})))},listSupportedExtensions:function(){return Object.keys(U)},importBase64Dataset:function(e,t,a,i=512){const s=[],n=atob(t);for(let e=0;e<n.length;e+=i){const t=n.slice(e,e+i),a=new Uint8Array(t.length);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);s.push(a)}const o=new Blob(s,{type:"application/octet-stream"}),r=new File([o],e);return a?(X([r]).then((e=>{J(e,a)})),Promise.resolve("loading")):X([r])},loadFiles:X,loadFileSeries:function(e,t,a=""){return new Promise(((i,s)=>{if(e.length){const n=U[t];if(n){const{vtkReader:t,fileSeriesMethod:o,fileNameMethod:r,sourceType:l}=n,c=t.newInstance();if(r&&c[r](a),o){const t=c[o](e);Promise.resolve(t).then((e=>i({dataset:e,reader:c,sourceType:l,name:a})))}else s(new Error("No file series method available"))}else s(new Error(`No file series reader mapping for ${t}`))}else i()}))},openFiles:function(e,t){K=t,Y.setAttribute("accept",e.map((e=>`.${e}`)).join(",")),Y.value=null,Y.click()},registerReader:function({extension:e,name:t,vtkReader:a,readMethod:i,parseMethod:s,fileNameMethod:n,fileSeriesMethod:o,sourceType:r,binary:l}){U[e]={name:t,vtkReader:a,readMethod:i||l?"readAsArrayBuffer":"readAsText",parseMethod:s||l?"parseAsArrayBuffer":"parseAsText",fileNameMethod:n,fileSeriesMethod:o,sourceType:r}},registerReadersToProxyManager:J};Q.registerReader({extension:"glance",name:"Glance State Reader",vtkReader:I,binary:!0}),Q.registerReader({extension:"obz",name:"OBJ bundle",vtkReader:j,binary:!0}),Q.registerReader({extension:"vtkjs",name:"vtkjs",vtkReader:B,binary:!0}),Q.registerReader({extension:"vtp",name:"Polydata Reader",vtkReader:g.ZP,binary:!0}),Q.registerReader({extension:"vti",name:"ImageData Reader",vtkReader:h.ZP,binary:!0}),Q.registerReader({extension:"stl",name:"STL Binary Reader",vtkReader:y.ZP,binary:!0}),Q.registerReader({extension:"obj",name:"OBJ Reader",vtkReader:f.ZP,binary:!1}),Q.registerReader({extension:"pdb",name:"PDB Reader",vtkReader:b.ZP,binary:!1,sourceType:"vtkMolecule"}),Q.registerReader({extension:"glyph",name:"Glyph Data Reader",vtkReader:w.ZP,binary:!1,sourceType:"Glyph"}),Q.registerReader({extension:"skybox",name:"Skybox Data Reader",vtkReader:_.ZP,binary:!0,sourceType:"Skybox"}),Q.registerReader({extension:"json",name:"JSON Reader",vtkReader:w.ZP,binary:!1}),Q.registerReader({extension:"ply",name:"PLY Reader",vtkReader:x.ZP,binary:!0});a(372);var ee=a(138),te=a(511),ae=a(515),ie=a(516),se=a(517),ne=a(518),oe=a(519),re=a(364),le=a(520),ce=a(441),de=a(33),ue=a(522),pe=a(523);function me(e,t){t.classHierarchy.push("vtkCropWidgetProp"),t.representations.filter((e=>e.isA("vtkOutlineContextRepresentation"))).forEach((e=>e.getActor().getProperty().set({ambient:1,diffuse:0}))),t.widgetState.getAllNestedStates().filter((e=>!!e.setScale1)).forEach((e=>e.setScale1(20)))}var ve=a(14);const ge={};function he(e,t,a={}){Object.assign(t,ge,a),pe.ZP.extend(e,t,a),function(e,t){t.classHierarchy.push("vtkCropWidget"),t.behavior=C.ZP.chain(t.behavior,me),t.methodsToLink=t.methodsToLink||[],t.methodsToLink.push("handleScale"),e.getRepresentationsForViewType=e=>{switch(e){case ve.cO.DEFAULT:case ve.cO.GEOMETRY:case ve.cO.SLICE:case ve.cO.VOLUME:}return[{builder:de.ZP,labels:["handles"],initialValues:{scaleInPixels:!0}},{builder:ue.ZP,labels:["corners"]}]}}(e,t)}var ye={newInstance:C.ZP.newInstance(he,"vtkCropWidget"),extend:he},fe=a(524),be=a(453);function xe(e,t){const a={...e},i=[];let s=null;e.handleMouseMove=e=>{const t=a.handleMouseMove(e);return s=e,t},e.delete=()=>{for(a.delete();i.length;)i.pop().unsubscribe()},i.push(t.manipulator.onModified((()=>{s&&a.handleMouseMove(s)})))}function we(e,t){(0,be.Z)(e,t),xe(e,t)}var _e=a(39);var Se=a(88);const{createSvgElement:Pe}=Se.Z;const Ce={circleProps:{r:8,stroke:"green","stroke-width":3,fill:"transparent"}};function ke(e,t,a={}){Object.assign(t,Ce,a),Se.Z.extend(e,t,a),C.ZP.setGet(e,t,["circleProps"]),function(e,t){t.classHierarchy.push("vtkSVGCircleHandleRepresentation"),e.render=()=>{const a=e.getRepresentationStates(),i=[];for(let e=0;e<a.length;e++)i.push(a[e].getOrigin());return e.worldPointsToPixelSpace(i).then((e=>{const i=e.coords,s=e.windowSize[1],n=Pe("g");for(let e=0;e<i.length;e++){const o=a[e],r=i[e],l=r[0],c=s-r[1];if(!o.isVisible||o.isVisible()){const e=Pe("circle");Object.keys(t.circleProps||{}).forEach((a=>e.setAttribute(a,t.circleProps[a]))),e.setAttribute("cx",l),e.setAttribute("cy",c),n.appendChild(e)}}return n}))}}(e,t)}var Ve={extend:ke,newInstance:C.ZP.newInstance(ke,"vtkSVGCircleHandleRepresentation")};const{createSvgElement:Ie}=Se.Z;const Te={lineProps:{stroke:"green","stroke-width":2}};function $e(e,t,a={}){Object.assign(t,Te,a),Se.Z.extend(e,t,a),C.ZP.setGet(e,t,["lineProps"]),function(e,t){t.classHierarchy.push("vtkSVGLineRepresentation"),e.render=a=>{const i=e.getRepresentationStates(a),s=[];for(let e=0;e<i.length;e++){const t=i[e];t.isVisible&&!t.isVisible()||s.push(t.getOrigin())}return e.worldPointsToPixelSpace(s).then((e=>{const a=e.coords,i=e.windowSize[1],s=Ie("g");for(let e=0;e<a.length-1;e++){const n=a[e],o=a[e+1],r=n[0],l=i-n[1],c=o[0],d=i-o[1],u=Ie("line");Object.keys(t.lineProps||{}).forEach((e=>u.setAttribute(e,t.lineProps[e]))),u.setAttribute("x1",r),u.setAttribute("y1",l),u.setAttribute("x2",c),u.setAttribute("y2",d),s.appendChild(u)}return s}))}}(e,t)}var De={extend:$e,newInstance:C.ZP.newInstance($e,"vtkSVGLineRepresentation")},Me=a(373);const{createSvgElement:Ze}=Se.Z;function Le(e){const t=(0,Me.KO)(e,2);return t>0?[e[0]/t,e[1]/t]:[0,0]}const Re={text:"Label",textStateIndex:0,offset:12,textProps:{fill:"#ff0000"}};function Oe(e,t,a={}){Object.assign(t,Re,a),Se.Z.extend(e,t,a),C.ZP.setGet(e,t,["textStateIndex","textProps","text"]),function(e,t){t.classHierarchy.push("vtkSVGLabelRepresentation"),e.render=a=>{const i=e.getRepresentationStates(a),s=i[t.textStateIndex],n=[];!s||s.isVisible&&!s.isVisible()||n.push(s.getOrigin());const o=i[t.textStateIndex-1];!o||o.isVisible&&!o.isVisible()||n.push(o.getOrigin());const r=i[t.textStateIndex+1];return!r||r.isVisible&&!r.isVisible()||n.push(r.getOrigin()),e.worldPointsToPixelSpace(n).then((e=>{const a=e.coords[0],i=e.windowSize[1],s=Ze("text");if(Object.keys(t.textProps||{}).forEach((e=>s.setAttribute(e,t.textProps[e]))),a){let n=0,o=1;if(1===e.coords.length&&(n=1),2===e.coords.length)e.coords[1][1]-a[1]>0&&(o=-1);else if(3===e.coords.length){const t=e.coords[1],i=e.coords[2],s=Le([t[0]-a[0],t[1]-a[1]]),r=Le([i[0]-a[0],i[1]-a[1]]);n=Math.sign(-(s[0]+r[0]))||1,o=Math.sign(-(s[1]+r[1]))||1}o*=-1;const r=1===o?"hanging":"baseline",l=1===n?"start":"end";s.setAttribute("x",a[0]),s.setAttribute("y",i-a[1]),s.setAttribute("dx",t.offset*n),s.setAttribute("dy",t.offset*o),s.setAttribute("alignment-baseline",r),s.setAttribute("text-anchor",l),s.textContent=t.text}return s}))}}(e,t)}var Be={extend:Oe,newInstance:C.ZP.newInstance(Oe,"vtkSVGLabelRepresentation")};function Ae(e,t){t.classHierarchy.push("vtkAngle2DWidget"),t.methodsToLink=[...t.methodsToLink??[],"circleProps","lineProps","textProps","text","textStateIndex"],t.behavior=we,t.widgetState=_e.Z.createBuilder().addStateFromMixin({labels:["moveHandle"],mixins:["origin","color","scale1","visible","manipulator"],name:"moveHandle",initialValues:{scale1:50,origin:[-1,-1,-1],visible:!1}}).addDynamicMixinState({labels:["handles"],mixins:["origin","color","scale1","visible","manipulator"],name:"handle",initialValues:{scale1:50,origin:[-1,-1,-1],visible:!0}}).build(),e.getRepresentationsForViewType=e=>{switch(e){case ve.cO.DEFAULT:case ve.cO.GEOMETRY:case ve.cO.SLICE:case ve.cO.VOLUME:}return[{builder:de.ZP,labels:["handles"],initialValues:{scaleInPixels:!0}},{builder:de.ZP,labels:["moveHandle"],initialValues:{scaleInPixels:!0}},{builder:Ve,labels:["handles","moveHandle"]},{builder:De,labels:["handles","moveHandle"]},{builder:Be,labels:["handles"]}]}}const Fe={};function Ne(e,t,a={}){Object.assign(t,Fe,a),fe.ZP.extend(e,t,a),C.ZP.setGet(e,t,["manipulator"]),Ae(e,t)}var Ee={newInstance:C.ZP.newInstance(Ne,"vtkAngle2DWidget"),extend:Ne},je=a(525),Ge=a(454);function We(e,t){(0,Ge.Z)(e,t),xe(e,t)}function Ue(e,t){t.classHierarchy.push("vtkDistance2DWidget"),t.methodsToLink=[...t.methodsToLink??[],"circleProps","lineProps","textProps","text","textStateIndex"],t.behavior=We,t.widgetState=_e.Z.createBuilder().addStateFromMixin({labels:["moveHandle"],mixins:["origin","color","scale1","visible","manipulator"],name:"moveHandle",initialValues:{scale1:50,origin:[0,0,0],visible:!1}}).addDynamicMixinState({labels:["handles"],mixins:["origin","color","scale1","visible","manipulator"],name:"handle",initialValues:{scale1:50,origin:[0,0,0],visible:!0}}).build(),e.getRepresentationsForViewType=e=>{switch(e){case ve.cO.DEFAULT:case ve.cO.GEOMETRY:case ve.cO.SLICE:case ve.cO.VOLUME:}return[{builder:de.ZP,labels:["handles"],initialValues:{scaleInPixels:!0}},{builder:de.ZP,labels:["moveHandle"],initialValues:{scaleInPixels:!0}},{builder:Ve,labels:["handles","moveHandle"]},{builder:De,labels:["handles","moveHandle"]},{builder:Be,labels:["handles"]}]}}const ze={};function He(e,t,a={}){Object.assign(t,ze,a),je.ZP.extend(e,t,a),Ue(e,t)}var Ke={newInstance:C.ZP.newInstance(He,"vtkDistance2DWidget"),extend:He},Ye=a(59),qe=a(60);const Xe=1;function Je(e,t){t.classHierarchy.push("vtkTextWidgetProp");let a=null;function i(e){return e.altKey||e.controlKey||e.shiftKey}e.setDisplayCallback=e=>t.representations[0].setDisplayCallback(e),e.handleLeftButtonPress=s=>{if(!t.activeState||!t.activeState.getActive()||!t.pickable||i(s))return C.ZP.VOID;if(t.activeState===t.widgetState.getMoveHandle()&&t.widgetState.getHandleList().length<Xe){const e=t.widgetState.getMoveHandle(),a=t.widgetState.addHandle();a.setOrigin(...e.getOrigin()),a.setColor(e.getColor()),a.setScale1(e.getScale1())}else a=!0,t._apiSpecificRenderWindow.setCursor("grabbing"),t._interactor.requestAnimation(e);return e.invokeStartInteractionEvent(),C.ZP.EVENT_ABORT},e.handleMouseMove=s=>{if(t.hasFocus&&t.widgetState.getHandleList().length===Xe)return t._widgetManager.releaseFocus(),C.ZP.VOID;if(t.pickable&&t.manipulator&&t.activeState&&t.activeState.getActive()&&!i(s)){const i=t.manipulator.handleEvent(s,t._apiSpecificRenderWindow);if(i.length&&(t.activeState===t.widgetState.getMoveHandle()||a))return t.activeState.setOrigin(i),e.invokeInteractionEvent(),C.ZP.EVENT_ABORT}return C.ZP.VOID},e.handleLeftButtonRelease=()=>{a&&t.pickable?(t._apiSpecificRenderWindow.setCursor("pointer"),t.widgetState.deactivate(),t._interactor.cancelAnimation(e),e.invokeEndInteractionEvent()):t.activeState!==t.widgetState.getMoveHandle()&&t.widgetState.deactivate(),(t.hasFocus&&!t.activeState||t.activeState&&!t.activeState.getActive())&&e.invokeEndInteractionEvent(),a=!1},e.grabFocus=()=>{!t.hasFocus&&t.widgetState.getHandleList().length<Xe&&(t.activeState=t.widgetState.getMoveHandle(),t.activeState.activate(),t.activeState.setVisible(!0),t._interactor.requestAnimation(e),e.invokeStartInteractionEvent()),t.hasFocus=!0},e.loseFocus=()=>{t.hasFocus&&(t._interactor.cancelAnimation(e),e.invokeEndInteractionEvent()),t.widgetState.deactivate(),t.widgetState.getMoveHandle().deactivate(),t.widgetState.getMoveHandle().setVisible(!1),t.activeState=null,t.hasFocus=!1,t._widgetManager.enablePicking(),t._interactor.render()}}function Qe(e,t){t.classHierarchy.push("vtkTextWidget"),t.methodsToLink=["activeScaleFactor","activeColor","useActiveColor","defaultScale","circleProps","textProps","text","textStateIndex","handleScale"],t.behavior=Je,t.widgetState=_e.Z.createBuilder().addStateFromMixin({labels:["moveHandle"],mixins:["origin","color","scale1","visible"],name:"moveHandle",initialValues:{scale1:50,origin:[0,0,0],visible:!1}}).addDynamicMixinState({labels:["handles"],mixins:["origin","color","scale1"],name:"handle",initialValues:{scale1:50,origin:[0,0,0]}}).build(),e.getRepresentationsForViewType=e=>{switch(e){case ve.cO.DEFAULT:case ve.cO.GEOMETRY:case ve.cO.SLICE:case ve.cO.VOLUME:}return[{builder:de.ZP,labels:["handles"],initialValues:{scaleInPixels:!0}},{builder:de.ZP,labels:["moveHandle"]},{builder:Ve,labels:["handles","moveHandle"]},{builder:Be,labels:["handles"]}]},t.widgetState.onBoundsChange((e=>{const a=[.5*(e[0]+e[1]),.5*(e[2]+e[3]),.5*(e[4]+e[5])];t.widgetState.getMoveHandle().setOrigin(a)})),t.manipulator=qe.ZP.newInstance()}const et={};function tt(e,t,a={}){Object.assign(t,et,a),Ye.ZP.extend(e,t,a),C.ZP.setGet(e,t,["manipulator"]),Qe(e,t)}var at={newInstance:C.ZP.newInstance(tt,"vtkTextWidget"),extend:tt},it=a(526),st=a(455);const nt={opacity:1,useColorByForColor:!1,useColorByForOpacity:!1};function ot(e,t,a={}){Object.assign(t,nt,a),st.ZP.extend(e,t),C.ZP.setGet(e,t,["opacity","useColorByForColor","useColorByForOpacity"]),function(e,t){t.classHierarchy.push("vtkCustomSliceRepresentationProxy");const a={...e};e.setOpacity=e=>{e>=0&&e<=1&&a.setOpacity(e)&&t.property.setOpacity(e)},e.setColorBy=(i,s,n=-1)=>{if(a.setColorBy(i,s,n),null!==i&&t.useColorByForColor||t.property.setRGBTransferFunction(0,null),null!==i&&t.useColorByForOpacity||t.property.setPiecewiseFunction(0,null),i&&s){if(t.useColorByForColor){const a=e.getLookupTableProxy(i);t.property.setRGBTransferFunction(0,a.getLookupTable())}if(t.useColorByForOpacity){const a=e.getPiecewiseFunctionProxy(i);t.property.setPiecewiseFunction(0,a.getPiecewiseFunction())}}},e.setUseColorByForColor=t=>{if(a.setUseColorByForColor(t)){const t=e.getColorBy();e.setColorBy(...t)}},e.setUseColorByForOpacity=t=>{if(a.setUseColorByForOpacity(t)){const t=e.getColorBy();e.setColorBy(...t)}}}(e,t)}var rt={newInstance:C.ZP.newInstance(ot,"vtkCustomSliceRepresentationProxy"),extend:ot},lt=a(528);const ct={sliceOpacity:1,sliceUseColorByForColor:!1,sliceUseColorByForOpacity:!1};function dt(e,t,a={}){Object.assign(t,ct,a),lt.ZP.extend(e,t),C.ZP.setGet(e,t,["sliceOpacity","sliceUseColorByForColor","sliceUseColorByForOpacity"]),function(e,t){t.classHierarchy.push("vtkCustomVolumeRepresentationProxy");const a={...e};e.setColorBy=(i,s,n=-1)=>{if(a.setColorBy(i,s,n),null!==i&&t.sliceUseColorByForColor||t.propertySlices.setRGBTransferFunction(0,null),null!==i&&t.sliceUseColorByForOpacity||t.propertySlices.setPiecewiseFunction(0,null),i&&s){if(t.sliceUseColorByForColor){const a=e.getLookupTableProxy(i);t.propertySlices.setRGBTransferFunction(0,a.getLookupTable())}if(t.sliceUseColorByForOpacity){const a=e.getPiecewiseFunctionProxy(i);t.propertySlices.setPiecewiseFunction(0,a.getPiecewiseFunction())}}},e.setSliceOpacity=e=>{e>=0&&e<=1&&a.setSliceOpacity(e)&&t.propertySlices.setOpacity(e)},e.setSliceUseColorByForColor=t=>{if(a.setSliceUseColorByForColor(t)){const t=e.getColorBy();e.setColorBy(...t)}},e.setSliceUseColorByForOpacity=t=>{if(a.setSliceUseColorByForOpacity(t)){const t=e.getColorBy();e.setColorBy(...t)}},e.setIs2DVolume=t=>{a.setIs2DVolume(t),t&&(e.setSliceUseColorByForColor(!0),e.setSliceUseColorByForOpacity(!0))}}(e,t)}var ut={newInstance:C.ZP.newInstance(dt,"vtkCustomVolumeRepresentationProxy"),extend:dt},pt=a(128),mt=a(116),vt=a(38),gt=a(47),ht=a(46);const yt={};function ft(e,t,a={}){Object.assign(t,yt,a),vt.Z.extend(e,t),function(e,t){t.classHierarchy.push("vtkLabelMapVolumeRepProxy");const a=(0,W.y5)();function i(e){const a=e.getColorMap(),i=gt.ZP.newInstance(),s=ht.ZP.newInstance();Object.keys(a).forEach((e=>{const t=Number(e);i.addRGBPoint(t,...a[e].slice(0,3).map((e=>e/255))),s.addPoint(t,a[e][3]/255)})),t.property.setRGBTransferFunction(0,i),t.property.setScalarOpacity(0,s);const n=Math.max(...e.getDimensions());t.property.setScalarOpacityUnitDistance(0,Math.sqrt(n));const o=e.getSpacing().map((e=>e*e)).reduce(((e,t)=>e+t),0);t.mapper.setSampleDistance(o*2**-1.5)}t.mapper=mt.ZP.newInstance(),t.volume=pt.ZP.newInstance(),t.property=t.volume.getProperty(),t.property.setInterpolationTypeToNearest(),t.sourceDependencies.push({setInputData(e){e?(a.sub(e.onModified((()=>i(e)))),i(e),t.mapper.setInputData(e)):a.unsub()}}),t.volume.setMapper(t.mapper),t.volumes.push(t.volume),e.setVisibility=e=>{t.volume.setVisibility(e)},e.getVisibility=()=>t.volume.getVisibility(),e.isVisible=e.getVisibility,e.delete=C.ZP.chain(e.delete,(()=>{a.unsub()}))}(e,t),C.ZP.proxyPropertyMapping(e,t,{volumeVisibility:{modelKey:"volume",property:"visibility"}})}var bt={newInstance:C.ZP.newInstance(ft,"vtkLabelMapVolumeRepProxy"),extend:ft},xt=a(72);const{InterpolationType:wt}=xt.C;const _t={};function St(e,t,a={}){Object.assign(t,_t,a),st.ZP.extend(e,t),function(e,t){t.classHierarchy.push("vtkLabelMapSliceRepProxy");const a=(0,W.y5)();function i(e){const a=e.getColorMap(),i=gt.ZP.newInstance(),s=ht.ZP.newInstance();Object.keys(a).forEach((e=>{const t=Number(e);i.addRGBPoint(t,...a[e].slice(0,3).map((e=>e/255))),s.addPoint(t,a[e][3]/255)})),t.property.setRGBTransferFunction(i),t.property.setScalarOpacity(s)}t.property.setInterpolationType(wt.NEAREST),e.setColorBy=()=>{},e.delete=C.ZP.chain(e.delete,(()=>a.unsub())),t.sourceDependencies.push({setInputData:function(e){a.sub(e.onModified((()=>i(e)))),i(e)}})}(e,t)}var Pt={newInstance:C.ZP.newInstance(St,"vtkLabelMapSliceRepProxy"),extend:St};const Ct={name:"",widget:null,factory:null,viewTypes:{}};function kt(e,t,a={}){Object.assign(t,Ct,a),C.ZP.obj(e,t),C.ZP.proxy(e,t),C.ZP.setGet(e,t,["name"]),C.ZP.get(e,t,["widget","viewTypes"]),function(e,t){t.classHierarchy.push("vtkWidgetProxy"),t.widget=t.factory.newInstance();const a=[],i=t.widget.getWidgetState().onModified((()=>e.modified())),s=new WeakSet;function n(e){t.proxyManager.getViews().forEach((t=>{const a=t.getReferenceByName("widgetManager");a&&e(t,a)}))}e.addToViews=()=>n((e=>{const a=ve.cO[t.viewTypes[e.getProxyName()]],i=function(e,t,a){const i=t.getReferenceByName("widgetManager");if(i){const s=i.addWidget(e,a);return i.enablePicking(),t.renderLater(),s}return null}(t.widget,e,a);i&&s.add(i)})),e.removeFromViews=()=>n((e=>function(e,t){const a=t.getReferenceByName("widgetManager");a&&(a.removeWidget(e),a.enablePicking(),t.renderLater())}(t.widget,e))),e.grabFocus=()=>n(((e,a)=>a.grabFocus(t.widget))),e.releaseFocus=()=>n(((e,a)=>a.releaseFocus(t.widget))),e.getViewWidget=e=>{const a=e.getReferenceByName("widgetManager");return a?t.widget.getWidgetForView({viewId:a.getViewId()}):null},e.getAllViewWidgets=()=>t.proxyManager.getViews().map((t=>e.getViewWidget(t))).filter(Boolean),e.executeViewFuncs=t=>{n(((i,s)=>{const n=t[i.getProxyName()];if(n){const t=n(i,s,e.getViewWidget(i));if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]instanceof Function&&a.push(t[e]);else t instanceof Function&&a.push(t)}}))};const o=e.delete;e.delete=()=>{i.unsubscribe();for(let e=0;e<a.length;e++)a[e]();t.widget.delete(),t.widget=null,o()}}(e,t),C.ZP.proxyPropertyMapping(e,t,{widgetState:{modelKey:"widget",property:"widgetState"}})}var Vt={newInstance:C.ZP.newInstance(kt,"vtkWidgetProxy"),extend:kt},It=a(529),Tt=a(530);var $t={createProxyDefinition:function(e,t=[],a=[],i={},s={}){return{class:e,options:{links:a,ui:t,...i},props:s}},activateOnCreate:function(e){return e.options.activateOnCreate=!0,e},deepCopyPath:function(e,t){const a="string"==typeof t?t.split("."):t,i={...e};let s=i;for(;a.length;){const e=a.shift();if(!Object.prototype.hasOwnProperty.call(s,e))throw new Error(`Invalid property path given: ${a}`);s[e]instanceof Array?s[e]=Array.from(s[e]):s[e]={...s[e]},s=s[e]}return i},objAssignPath:function(e,t,a){const i="string"==typeof t?t.split("."):t;let s=e;for(;i.length>1;){const e=i.shift();if(!Object.prototype.hasOwnProperty.call(s,e))throw new Error(`Invalid property path given: ${i}`);s=s[e]}if(1!==i.length)throw new Error(`Invalid property path given: ${i}`);s[i.shift()]=a}};var Dt=[{name:"colorBy",domain:{}},{name:"xSliceVisibility"},{name:"ySliceVisibility"},{name:"zSliceVisibility"},{name:"volumeVisibility"},{name:"sliceOpacity"},{name:"sliceUseColorByForColor"},{name:"sliceUseColorByForOpacity"},{name:"useShadow"},{name:"sampleDistance",domain:{min:0,max:1,step:.01}},{name:"edgeGradient",domain:{min:0,max:1,step:.01}},{name:"windowWidth",domain:{min:0,max:255,step:.01}},{name:"windowLevel",domain:{min:0,max:255,step:.01}},{name:"xSlice",domain:{min:0,max:255,step:1}},{name:"ySlice",domain:{min:0,max:255,step:1}},{name:"zSlice",domain:{min:0,max:255,step:1}}],Mt=[{name:"colorBy",domain:{}},{name:"color"},{name:"representation",domain:{items:[{text:"Surface",value:"Surface"},{text:"Surface with edges",value:"Surface with edges"},{text:"Wireframe",value:"Wireframe"},{text:"Points",value:"Points"}]}},{name:"opacity",domain:{min:0,max:1,step:.01}},{name:"interpolateScalarsBeforeMapping"},{name:"visibility"},{name:"pointSize",domain:{min:1,max:50}}],Zt=[{name:"colorBy",domain:{}},{name:"useColorByForColor"},{name:"useColorByForOpacity"},{name:"visibility"},{name:"windowWidth",domain:{min:0,max:255,step:.01}},{name:"windowLevel",domain:{min:0,max:255,step:.01}},{name:"slice",domain:{min:0,max:255,step:1}},{name:"opacity",domain:{min:0,max:1,step:.01}}],Lt=[{name:"tolerance",domain:{min:0,max:.5,step:.01}},{name:"atomicRadiusScaleFactor",domain:{min:0,max:.5,step:.01}},{name:"bondRadius",domain:{min:0,max:.5,step:.01}},{name:"deltaBondFactor",domain:{min:0,max:.5,step:.01}},{name:"hideElements"}],Rt=[{name:"edgeVisibility"}],Ot=[{name:"name"},{name:"background",domain:{palette:[]}},{name:"orientationAxesVisibility"},{name:"presetToOrientationAxes",domain:{items:[{text:"XYZ",value:"default"},{text:"LPS",value:"lps"}]}}],Bt=[{name:"name"},{name:"background",domain:{palette:[]}},{name:"orientationAxesVisibility"},{name:"presetToOrientationAxes",domain:{items:[{text:"XYZ",value:"default"},{text:"LPS",value:"lps"}]}},{name:"annotationOpacity",domain:{min:0,max:1,step:.01}}],At=[{name:"position"}];var Ft=[{link:"Visibility",property:"visibility",updateOnBind:!0},{link:"WW",property:"windowWidth",updateOnBind:!0},{link:"WL",property:"windowLevel",updateOnBind:!0},{link:"SliceX",property:"xSlice",updateOnBind:!0,type:"application"},{link:"SliceY",property:"ySlice",updateOnBind:!0,type:"application"},{link:"SliceZ",property:"zSlice",updateOnBind:!0,type:"application"},{link:"SliceOpacity",property:"sliceOpacity",updateOnBind:!0},{link:"UseSliceColor",property:"sliceUseColorByForColor",updateOnBind:!0},{link:"UseSliceOpacity",property:"sliceUseColorByForOpacity",updateOnBind:!0}],Nt=[{link:"GeometryColorBy",property:"colorBy",updateOnBind:!0},{link:"Representation",property:"representation",updateOnBind:!0},{link:"Opacity",property:"opacity",updateOnBind:!0},{link:"InterpolateScalarsBeforeMapping",property:"interpolateScalarsBeforeMapping",updateOnBind:!0},{link:"Visibility",property:"visibility",updateOnBind:!0},{link:"PointSize",property:"pointSize",updateOnBind:!0}],Et=[{link:"Visibility",property:"visibility",updateOnBind:!0},{link:"WW",property:"windowWidth",updateOnBind:!0},{link:"WL",property:"windowLevel",updateOnBind:!0},{link:"SliceOpacity",property:"opacity",updateOnBind:!0},{link:"UseSliceColor",property:"useColorByForColor",updateOnBind:!0},{link:"UseSliceOpacity",property:"useColorByForOpacity",updateOnBind:!0}],jt=[{link:"Tolerance",property:"tolerance",updateOnBind:!0},{link:"AtomicRadiusScaleFactor",property:"atomicRadiusScaleFactor",updateOnBind:!0},{link:"BondRadius",property:"bondRadius",updateOnBind:!0},{link:"DeltaBondFactor",property:"deltaBondFactor",updateOnBind:!0},{link:"HideElements",property:"hideElements",updateOnBind:!0}],Gt=[{link:"GlyphEdgeVisibility",property:"edgeVisibility",updateOnBind:!0}],Wt=[{link:"SkyboxPosition",property:"position",updateOnBind:!0}];var Ut={View2D:{vtkPolyData:{name:"Geometry"},vtkImageData:{name:"Slice"},vtkLabelMap:{name:"LabelMapSlice"},vtkMolecule:{name:"Molecule"},Glyph:{name:"Glyph"},Skybox:{name:"Skybox"}},View3D:{vtkPolyData:{name:"Geometry"},vtkImageData:{name:"Volume"},vtkLabelMap:{name:"LabelMapVolume"},vtkMolecule:{name:"Molecule"},Glyph:{name:"Glyph"},Skybox:{name:"Skybox"}}};const{createProxyDefinition:zt,activateOnCreate:Ht}=$t,Kt={View3D:"VOLUME",View2D_X:"SLICE",View2D_Y:"SLICE",View2D_Z:"SLICE"};function Yt(e,t,a,i){return Ht(zt(e,t,[{type:"application",link:"AnnotationOpacity",property:"annotationOpacity",updateOnBind:!0},{type:"application",link:"OrientationAxesVisibility",property:"orientationAxesVisibility",updateOnBind:!0},{type:"application",link:"OrientationAxesPreset",property:"presetToOrientationAxes",updateOnBind:!0},{type:"application",link:"OrientationAxesType",property:"orientationAxesType",updateOnBind:!0}],a,i))}var qt={Proxy:{definitions:{Proxy:{LookupTable:zt(ne.Z,[],[],{presetName:"Default (Cool to Warm)"}),PiecewiseFunction:zt(re.Z)},Widgets:{Crop:zt(Vt,[],[],{factory:ye,viewTypes:Kt}),Paint:zt(Vt,[],[],{factory:it.ZP,viewTypes:Kt}),Angle:zt(Vt,[],[],{factory:Ee,viewTypes:Kt}),Ruler:zt(Vt,[],[],{factory:Ke,viewTypes:Kt}),Text:zt(Vt,[],[],{factory:at,viewTypes:Kt})},Sources:{TrivialProducer:Ht(zt(le.ZP)),LabelMap:zt(le.ZP)},Representations:{Geometry:zt(ae.ZP,Mt,Nt),Skybox:zt(ie.ZP,At,Wt),Slice:zt(rt,Zt,Et),SliceX:zt(rt,Zt,[{link:"SliceX",property:"slice",updateOnBind:!0,type:"application"}].concat(Et)),SliceY:zt(rt,Zt,[{link:"SliceY",property:"slice",updateOnBind:!0,type:"application"}].concat(Et)),SliceZ:zt(rt,Zt,[{link:"SliceZ",property:"slice",updateOnBind:!0,type:"application"}].concat(Et)),Volume:zt(ut,Dt,Ft),Molecule:zt(oe.ZP,Lt,jt),Glyph:zt(se.ZP,Rt,Gt),LabelMapVolume:zt(bt,[],[]),LabelMapSlice:zt(Pt),LabelMapSliceX:zt(Pt,[],[{link:"SliceX",property:"slice",updateOnBind:!0,type:"application"}]),LabelMapSliceY:zt(Pt,[],[{link:"SliceY",property:"slice",updateOnBind:!0,type:"application"}]),LabelMapSliceZ:zt(Pt,[],[{link:"SliceZ",property:"slice",updateOnBind:!0,type:"application"}])},Views:{View3D:Yt(ce.Z,Ot),View2D:Yt(te.ZP,Bt),View2D_X:Yt(te.ZP,Bt,{axis:0}),View2D_Y:Yt(te.ZP,Bt,{axis:1}),View2D_Z:Yt(te.ZP,Bt,{axis:2})},AnimationManager:{AnimationProxyManager:{class:It.Z}},Animations:{TimeStepAnimation:{class:Tt.Z}}},representations:{View3D:Ut.View3D,View2D:Ut.View2D,View2D_X:{...Ut.View2D,vtkImageData:{name:"SliceX"},vtkLabelMap:{name:"LabelMapSliceX"}},View2D_Y:{...Ut.View2D,vtkImageData:{name:"SliceY"},vtkLabelMap:{name:"LabelMapSliceY"}},View2D_Z:{...Ut.View2D,vtkImageData:{name:"SliceZ"},vtkLabelMap:{name:"LabelMapSliceZ"}}},filters:{vtkPolyData:[],vtkImageData:[],vtkMolecule:[],Glyph:[]}}},Xt=a(23);function Jt(e=[]){for(;e.length>0;)e.pop().unsubscribe()}function Qt(e){const t=[],a={};return i=>{const s=(e,t)=>{e in i._actions&&i.dispatch(e,t)};t.push(e.onProxyRegistrationChange((e=>{const{action:t,proxyId:i,proxy:n}=e;"register"===t?(s("pxmProxyCreated",e),a[i]=n.onModified((e=>s("pxmProxyModified",e)))):i in a&&(a[i].unsubscribe(),s("pxmProxyDeleted",e)),s("pxmProxyRegistrationChange",e)}))),t.push(e.onActiveSourceChange((e=>s("pxmActiveSourceChange",e)))),t.push(e.onActiveViewChange((e=>s("pxmActiveViewChange",e))))}}const ea=Symbol("PXM_SUBS"),ta=Symbol("PROXY_SUBS"),aa={install(e){e.mixin({beforeCreate(){const e=this.$options;this.$proxyManager=e.proxyManager||e.parent&&e.parent.$proxyManager},mounted(){if(this.$options.proxyManagerHooks){const e=[],t={},a=this.$options.proxyManagerHooks;if(a.onProxyCreated||a.onProxyModified||a.onProxyDeleted||a.onProxyRegistrationChange){if(a.onProxyModified){const e=this.$proxyManager.getProxyGroups();let i=[];for(let t=0;t<e.length;t++){const a=e[t];i=i.concat(this.$proxyManager.getProxyInGroup(a))}for(let e=0;e<i.length;e++){const s=i[e];t[s.getProxyId()]=s.onModified((e=>a.onProxyModified.call(this,e)))}}e.push(this.$proxyManager.onProxyRegistrationChange((e=>{const{action:i,proxyId:s,proxy:n}=e;"register"===i?(a.onProxyCreated&&a.onProxyCreated.call(this,e),a.onProxyModified&&(t[s]=n.onModified((e=>a.onProxyModified.call(this,e))))):"unregister"===i&&(s in t&&(t[s].unsubscribe(),delete t[s]),a.onProxyDeleted&&a.onProxyDeleted.call(this,e)),a.onProxyRegistrationChange&&a.onProxyRegistrationChange.call(this,e)})))}a.onActiveSourceChange&&e.push(this.$proxyManager.onActiveSourceChange((e=>C.ZP.setImmediate((()=>a.onActiveSourceChange.call(this,e)))))),a.onActiveViewChange&&e.push(this.$proxyManager.onActiveViewChange((e=>C.ZP.setImmediate((()=>a.onActiveViewChange.call(this,e)))))),this[ea]=e,this[ta]=t}},beforeDestroy(){this[ea]&&Jt(this[ea]),this[ta]&&(Jt(Object.values(this[ta])),this[ta]={})}})}};var ia={getViewType:function(e){return`${e.getProxyName()}:${e.getName()}`}},sa=a(375);function na(e,t={}){if("vtkLabelMap"===t.glanceDataType){const a=function(e){const t=sa.ZP.newInstance(e.get("direction","origin","spacing"));return t.setDimensions(e.getDimensions()),t.computeTransforms(),t.getPointData().setScalars(e.getPointData().getScalars()),t}(e);return t.colorMap&&a.setColorMap(t.colorMap),a}return e}var oa=a(4),ra=a(19);function la(){return["zip","raw","glance","gz"].concat(Q.listSupportedExtensions())}function ca(e){const t=e.lastIndexOf(".");return t>-1?e.substr(t+1).toLowerCase():""}function da(e,t){const a=la(),i=[];return e.folder(t).forEach(((t,s)=>{if(s.dir)i.push(da(e,t));else if(a.indexOf(ca(s.name))>-1){const t=s.name.split("/"),a=t[t.length-1];i.push(e.file(s.name).async("blob").then((e=>new File([e],a))))}})),i}var ua=({proxyManager:e,girder:t})=>({namespaced:!0,state:{remoteFileList:[],fileList:[],loading:!1,progress:{}},getters:{anyErrors:e=>e.fileList.reduce(((e,t)=>e||"error"===t.state),!1),totalProgress(e){const t=Object.values(e.progress);return 0===t.length?0:t.reduce(((e,t)=>e+t),0)/t.length}},mutations:{startLoading(e){e.loading=!0},stopLoading(e){e.loading=!1},resetQueue(e){e.fileList=[]},addToFileList(e,t){for(let a=0;a<t.length;a++){const i=t[a],s={state:"loading",name:i.name,ext:ca(i.name),files:null,reader:null,extraInfo:null,remoteURL:null,withGirderToken:!1,proxyKeys:i.proxyKeys};"dicom"===i.type&&(s.files=i.list),"remote"===i.type&&Object.assign(s,{state:"needsDownload",remoteURL:i.remoteURL,remoteOpts:i.remoteOpts||{},withGirderToken:!!i.withGirderToken}),"regular"===i.type&&(s.files=[i.file]),e.fileList.push(s)}},setFileNeedsInfo(e,t){t>=0&&t<e.fileList.length&&(e.fileList[t].state="needsInfo",e.fileList[t].extraInfo=null)},setRemoteFile(e,{index:t,file:a}){t>=0&&t<e.fileList.length&&(e.fileList[t].state="loading",e.fileList[t].files=[a])},setFileReader(e,{index:t,reader:a}){a&&t>=0&&t<e.fileList.length&&(e.fileList[t].reader=a,e.fileList[t].state="ready")},setRawFileInfo(e,{index:t,info:a}){a&&t>=0&&t<e.fileList.length&&(e.fileList[t].extraInfo=a,e.fileList[t].state="loading")},setFileError(e,{index:t,error:a}){a&&t>=0&&t<e.fileList.length&&(e.fileList[t].error=a,e.fileList[t].state="error")},deleteFile(e,t){t>=0&&t<e.fileList.length&&e.fileList.splice(t,1)},setProgress(e,{id:t,percentage:a}){i.Z.set(e.progress,t,a)},clearProgresses(e){e.progress={}}},actions:{promptLocal({dispatch:e}){const t=la();return new Promise(((a,i)=>Q.openFiles(t,(t=>{e("openFiles",Array.from(t)).then(a).catch(i)}))))},resetQueue({commit:e}){e("resetQueue")},deleteFile({commit:e},t){e("deleteFile",t)},openRemoteFiles:({commit:e,dispatch:t},a)=>(e("addToFileList",a.map((e=>({type:"remote",name:e.name,remoteURL:e.url,remoteOpts:e.options,withGirderToken:!!e.withGirderToken,proxyKeys:e.proxyKeys})))),t("readAllFiles")),openFiles({commit:e,dispatch:t},a){const i=a.filter((e=>"zip"===ca(e.name)));if(i.length){const e=a.filter((e=>"zip"!==ca(e.name))),s=i.map((e=>P().loadAsync(e).then((e=>Promise.all(da(e))))));return Promise.all(s).then((t=>[].concat.apply(e,t))).then((e=>t("openFiles",e)))}const s=[],n=[];if(a.forEach((e=>{"dcm"===ca(e.name)?n.push(e):s.push(e)})),n.length){e("addToFileList",[{type:"dicom",name:n[0].name,list:n}])}return e("addToFileList",s.map((e=>({type:"regular",name:e.name,file:e})))),t("readAllFiles")},readAllFiles({dispatch:e,state:t}){const a=[];for(let i=0;i<t.fileList.length;i++)a.push(e("readFileIndex",i));return Promise.all(a)},readFileIndex({commit:e,dispatch:a,state:i},s){const n=i.fileList[s];let o=Promise.resolve();if("ready"===n.state||"error"===n.state)return o;if("needsDownload"===n.state&&n.remoteURL)n.withGirderToken&&(n.remoteOpts.headers={...n.remoteOpts.headers,"Girder-Token":t.girderRest.token}),o=Q.downloadDataset(n.name,n.remoteURL,{...n.remoteOpts,progressCallback(t){const a=t.lengthComputable?t.loaded/t.total:1/0;e("setProgress",{id:n.name,percentage:a})}}).then((t=>(e("setRemoteFile",{index:s,file:t}),a("readFileIndex",s)))).catch((()=>{throw new Error("Failed to download file")}));else if("raw"===n.ext)n.extraInfo&&(o=function(e,{dimensions:t,spacing:a,dataType:i}){return new Promise(((s,n)=>{const o=new FileReader;o.onload=function(){const e=ra.ZP.newInstance({spacing:a,extent:[0,t[0]-1,0,t[1]-1,0,t[2]-1]}),n=oa.ZP.newInstance({name:"Scalars",values:new i.constructor(o.result)});e.getPointData().setScalars(n),s(e)},o.onerror=e=>n(e),o.readAsArrayBuffer(e)}))}(n.files[0],n.extraInfo).then((t=>{e("setFileReader",{index:s,reader:{name:n.name,dataset:t}})}))),e("setFileNeedsInfo",s);else if("dcm"===n.ext)o=Q.loadFileSeries(n.files,"dcm",n.name).then((t=>{t&&e("setFileReader",{index:s,reader:t})}));else{if("glance"===n.ext)for(let t=0;t<s;t++){if("glance"===i.fileList[t].ext){const t=new Error("Cannot load multiple state files");return e("setFileError",{index:s,error:t}),o}}o=Q.loadFiles(n.files).then((t=>{t&&1===t.length&&e("setFileReader",{index:s,reader:t[0]})}))}return o.catch((t=>{t&&e("setFileError",{index:s,error:t.message||"File load failure"})}))},setRawFileInfo:({commit:e,dispatch:t},{index:a,info:i})=>(i?e("setRawFileInfo",{index:a,info:i}):e("setFileNeedsInfo",a),t("readFileIndex",a)),load({state:t,commit:a,dispatch:i}){a("startLoading"),a("clearProgresses");const s=t.fileList.filter((e=>"ready"===e.state));let n=Promise.resolve();const o=s.find((e=>"glance"===e.ext));if(o){const e=o.reader.reader;n=n.then((()=>e.parseAsArrayBuffer().then((()=>i("restoreAppState",e.getAppState(),{root:!0})))))}return n=n.then((()=>{const t=s.filter((e=>"glance"!==e.ext)),a=[],n=[],o=[];for(let e=0;e<t.length;e++){const i=t[e];"vtkLabelMap"===(i.proxyKeys&&i.proxyKeys.meta||{}).glanceDataType?n.push(i):i.name.endsWith(".measurements.json")?o.push(i):a.push(i)}const r=t=>{let a=[];for(let i=0;i<t.length;i++){const s=t[i],n={...s.reader,metadata:s.reader.metadata||{}};s.remoteURL&&Object.assign(n.metadata,{url:s.remoteURL});const o=s.proxyKeys&&s.proxyKeys.meta;if(o){const{reader:e,dataset:t}=n,a=e&&e.getOutputData?e.getOutputData():t;Object.assign(n,{dataset:na(a,o),reader:null})}const r=Q.registerReadersToProxyManager([{...n,proxyKeys:s.proxyKeys}],e);a=a.concat(r.filter(Boolean))}return a};r(a);const l=r(n),c=e.getSources().filter((e=>"TrivialProducer"===e.getProxyName()));if(c[c.length-1]){const e=c[c.length-1].getProxyId();for(let t=0;t<l.length;t++){const a=l[t];i("widgets/addLabelmapToImage",{imageId:e,labelmapId:a.getProxyId()},{root:!0}).then((()=>i("widgets/setLabelmapState",{labelmapId:a.getProxyId(),labelmapState:{selectedLabel:1,lastColorIndex:1}},{root:!0})))}for(let t=0;t<o.length;t++){const a=o[t].reader.reader.getOutputData();for(let t=0;t<a.length;t++)i("widgets/addMeasurementTool",{datasetId:e,componentName:a[t].componentName,data:a[t].data},{root:!0})}}})),n.finally((()=>a("stopLoading")))}}}),pa=a(450),ma=a(439),va=a(165);const{CaptureOn:ga}=ve.ZP;var ha=({proxyManager:e})=>({namespaced:!0,state:{viewsInitialized:!1,viewTypeToId:{},backgroundColors:{},globalBackgroundColor:va.qV,axisType:"arrow",axisPreset:ma.Bp,axisVisible:!0,annotationOpacity:1,interactionStyle3D:"3D",firstPersonMovementSpeed:null,maxTextureLODSize:5e4,viewOrder:Object.values(ma.Zp),visibleCount:1,viewOrientation:ma.In,viewTypes:ma.v7,masterSourceId:null,previousConfigurationPreset:null},mutations:{setGlobalBackground(e,t){e.globalBackgroundColor=t;const a=Object.keys(e.backgroundColors);for(let i=0;i<a.length;i++)e.backgroundColors[a[i]]=t},setAxisType(e,t){e.axisType=t},setAxisPreset(e,t){e.axisPreset=t},setAxisVisible(e,t){e.axisVisible=t},setAnnotationOpacity(e,t){e.annotationOpacity=t},setInteractionStyle3D(e,t){e.interactionStyle3D=t},setFirstPersonMovementSpeed(e,t){e.firstPersonMovementSpeed=t},setMaxTextureLODSize(e,t){e.maxTextureLODSize=t},mapViewTypeToId(e,{viewType:t,viewId:a}){i.Z.set(e.viewTypeToId,t,a)},setViewTypes(e,t){e.viewTypes=t},setViewOrientation(e,t){e.viewOrientation=t},setMasterSourceId(e,t){e.masterSourceId=t},setPreviousConfigurationPreset(e,t){e.previousConfigurationPreset=t},changeBackground(e,{viewType:t,color:a}){e.backgroundColors[t]=a},viewsInitialized(e){e.viewsInitialized=!0},visibleCount(e,t){e.visibleCount=t},swapViews(e,{index:t,viewType:a}){const s=e.viewOrder.indexOf(a),n=e.viewOrder[t];i.Z.set(e.viewOrder,t,a),i.Z.set(e.viewOrder,s,n)},rewriteProxyIds(e,{views:t}){e.viewTypeToId=(0,W.JL)(e.viewTypeToId,t)}},actions:{initViews({commit:t,state:a}){if(!a.viewsInitialized){t("viewsInitialized");let s=null;a.viewOrder.forEach((n=>{const[o,r]=n.split(":"),l=e.createProxy("Views",o,{name:r});if((0,W.XC)(l,a.viewOrientation,r),l.setBackground(0,0,0,0),i.Z.set(a.backgroundColors,n,a.globalBackgroundColor),l.setPresetToOrientationAxes("default"),!l.getReferenceByName("widgetManager")){const e=pa.ZP.newInstance();e.set({useSvgLayer:!1},!1,!0),e.setRenderer(l.getRenderer()),e.setCaptureOn(ga.MOUSE_MOVE),l.set({widgetManager:e},!0)}n===ma.H_&&(s=l),t("mapViewTypeToId",{viewType:n,viewId:l.getProxyId()})})),s&&s.activate()}},swapViews({commit:e},{index:t,viewType:a}){e("swapViews",{index:t,viewType:a})},singleView({state:e,commit:t},a){t("swapViews",{index:0,viewType:e.viewOrder[a]}),t("visibleCount",1)},splitView({state:e,commit:t},a){t("swapViews",{index:a,viewType:e.viewOrder[1]}),t("visibleCount",2)},quadView({commit:e}){e("visibleCount",4)},setGlobalBackground({commit:e},t){e("setGlobalBackground",t)},changeBackground({commit:e},{viewType:t,color:a}){e("changeBackground",{viewType:t,color:a})},setAxisType({commit:t},a){e.getViews().forEach((e=>{e.setOrientationAxesType(a)})),t("setAxisType",a)},setAxisPreset({commit:t,dispatch:a},i){e.getViews().forEach((e=>{e.setPresetToOrientationAxes(i)})),t("setAxisPreset",i),a("configureViewOrientationAndTypes",!1)},setViewOrientation({commit:t,state:a},{orientation:i,blockAnimation:s}){t("setViewOrientation",i),Object.entries(a.viewTypeToId).forEach((([t,a])=>{const n=e.getProxyById(a),[o,r]=t.split(":");(0,W.XC)(n,i,r,s||"View3D"!==o?0:100)}))},setViewTypes({commit:e},t){e("setViewTypes",t)},configureViewOrientationAndTypes({commit:t,dispatch:a,state:i},s){if("lps"===i.axisPreset){const t=e.getProxyById(i.masterSourceId);if(null!=t&&t.getDataset().isA("vtkImageData")){const e=t.getDataset().getDirection(),i=(0,W.z1)(e),n=["x","y","z"],o={[ma.Zp.default]:"3D",[ma.Zp[n[i.l.axis]]]:"Sagittal",[ma.Zp[n[i.p.axis]]]:"Coronal",[ma.Zp[n[i.s.axis]]]:"Axial"},r=[i.l.vector,i.p.vector,i.s.vector];a("setViewTypes",o),a("setViewOrientation",{orientation:r,blockAnimation:s})}else"lps"!==i.previousConfigurationPreset&&(a("setViewTypes",ma.h$),a("setViewOrientation",{orientation:ma.In,blockAnimation:s}))}else a("setViewTypes",ma.v7),a("setViewOrientation",{orientation:ma.In,blockAnimation:s});t("setPreviousConfigurationPreset",i.axisPreset)},updateMasterSourceId({dispatch:t,state:a},i){const s=e.getRepresentations().filter((e=>!e.isVisible())).map((e=>e.getInput().getProxyId())),n=i.filter((e=>!s.includes(e)));n.includes(a.masterSourceId)||(0===n.length?t("setMasterSourceId",null):t("setMasterSourceId",n[0]))},setMasterSourceId({commit:e,dispatch:t,state:a},i){const s=null===a.masterSourceId&&null!==i;e("setMasterSourceId",i),"lps"===a.axisPreset&&t("configureViewOrientationAndTypes",s)},setAxisVisible({commit:t},a){e.getViews().forEach((e=>{e.setOrientationAxesVisibility(a)})),t("setAxisVisible",a)},setAnnotationOpacity({commit:t},a){e.getViews().forEach((e=>{e.setAnnotationOpacity(a)})),t("setAnnotationOpacity",a)},setInteractionStyle3D({commit:t},a){e.getViews().filter((e=>"default"===e.getName())).forEach((e=>{e.setPresetToInteractor3D(a)})),t("setInteractionStyle3D",a)},setFirstPersonMovementSpeed({commit:t},a){e.getViews().filter((e=>"default"===e.getName())).forEach((e=>{e.getInteractorStyle3D().getKeyboardManipulators().forEach((e=>{e.setMovementSpeed&&e.setMovementSpeed(a)}))})),t("setFirstPersonMovementSpeed",a)},resetFirstPersonMovementSpeed({dispatch:t}){let a=0;const i=e.getViews().filter((e=>"default"===e.getName()));for(let e=0;e<i.length;++e){const t=i[e],s=t.getInteractorStyle3D().getKeyboardManipulators();for(let e=0;e<s.length;++e){const i=s[e];if(i.resetMovementSpeed){i.setRenderer(t.getRenderer()),i.resetMovementSpeed(),a=i.getMovementSpeed();break}}}a<0&&(a=0),t("setFirstPersonMovementSpeed",a)},setMaxTextureLODSize({commit:e},t){e("setMaxTextureLODSize",t)},rewriteProxyIds:(0,W.Gy)("rewriteProxyIds")}}),ya=({proxyManager:e})=>({namespaced:!0,state:{measurements:{},distanceUnitSymbol:"mm",distanceUnitFactor:1,imageToLabelmaps:{},labelmapToImage:{},labelmapStates:{},croppingStates:{}},mutations:{setDistanceUnitSymbol(e,t){e.distanceUnitSymbol=t},setDistanceUnitFactor(e,t){e.distanceUnitFactor=t},addLabelmapToImage(e,{imageId:t,labelmapId:a}){t in e.imageToLabelmaps||i.Z.set(e.imageToLabelmaps,t,[]),i.Z.set(e.labelmapToImage,a,t),e.imageToLabelmaps[t].push(a)},deleteLabelmap(e,t){if(t in e.labelmapToImage){const a=e.labelmapToImage[t];i.Z.delete(e.labelmapToImage,t),e.imageToLabelmaps[a].splice(e.imageToLabelmaps[a].indexOf(t),1)}},setLabelmapState(e,{labelmapId:t,labelmapState:a}){i.Z.set(e.labelmapStates,t,a)},addMeasurementTool(e,{datasetId:t,componentName:a,data:s}){t in e.measurements||i.Z.set(e.measurements,t,[]),e.measurements[t].push({componentName:a,data:s})},updateMeasurementTool(e,{datasetId:t,index:a,data:s}){t in e.measurements&&i.Z.set(e.measurements[t][a],"data",s)},removeMeasurementTool(e,{datasetId:t,index:a}){t in e.measurements&&e.measurements[t].splice(a,1)},setCroppingState(e,{datasetId:t,planes:a}){e.croppingStates[t]=Array.from(a)},rewriteProxyIds(e,{sources:t}){e.measurements=(0,W.cO)(e.measurements,t),e.imageToLabelmaps=(0,W.cO)(e.imageToLabelmaps,t),e.labelmapStates=(0,W.cO)(e.labelmapStates,t),e.croppingStates=(0,W.cO)(e.croppingStates,t),Object.keys(e.imageToLabelmaps).forEach((a=>{e.imageToLabelmaps[a]=(0,W.Lg)(e.imageToLabelmaps[a],t)}));const a={};Object.entries(e.labelmapToImage).forEach((([e,i])=>{a[t[e]]=t[i]})),e.labelmapToImage=a}},actions:{addLabelmapToImage:(0,W.Gy)("addLabelmapToImage"),deleteLabelmap:(0,W.Gy)("deleteLabelmap"),setLabelmapState:(0,W.Gy)("setLabelmapState"),addMeasurementTool:(0,W.Gy)("addMeasurementTool"),removeMeasurementTool:(0,W.Gy)("removeMeasurementTool"),updateMeasurementTool:(0,W.Gy)("updateMeasurementTool"),setCroppingState:(0,W.Gy)("setCroppingState"),setDistanceUnitSymbol:(0,W.Gy)("setDistanceUnitSymbol"),setDistanceUnitFactor:(0,W.Gy)("setDistanceUnitFactor"),rewriteProxyIds:(0,W.Gy)("rewriteProxyIds"),pxmProxyCreated:{root:!0,handler({state:t},{proxy:a,proxyId:i}){if(i in t.croppingStates){const s=t.croppingStates[i],n=(0,W.aX)(e,a);n&&n.setCroppingPlanes(s)}}}}}),fa=({animationManager:e})=>({namespaced:!0,state:{playing:!1,currentFrame:"0.0",frames:[]},mutations:{setCurrentFrame(e,t){e.currentFrame=t},setPlaying(e,t){e.playing=t},setFrames(e,t){e.frames=t}},actions:{initializeAnimations({commit:t}){e.onCurrentFrameChanged((()=>{t("setCurrentFrame",e.getCurrentFrame())})),e.onFramesChanged((()=>{t("setFrames",e.getFrames())})),t("setCurrentFrame",e.getCurrentFrame()),t("setFrames",e.getFrames())},play({commit:t}){t("setPlaying",!0),e.play(),e.onDonePlaying((()=>{t("setPlaying",!1),e.onDonePlaying((()=>{}))}))},pause({commit:t}){t("setPlaying",!1),e.pause()},nextFrame(){e.nextFrame()},previousFrame(){e.previousFrame()},firstFrame(){e.firstFrame()},lastFrame(){e.lastFrame()},setFrameIndex(t,a){e.setFrameIndex(a)}}});const ba=2;function xa(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}function wa(e,t){const a=Object.keys(t);for(let s=0;s<a.length;++s){const n=a[s];"object"===xa(e[n])&&"object"===xa(t[n])?i.Z.set(e,n,wa(e[n],t[n])):i.Z.set(e,n,t[n])}return e}function _a(e,t){const a=e.getActiveView(),i=e.getActiveSource(),s=e.getRepresentation(i,a),n=s.getPropertyDomainByName("slice");if(s.isA("vtkSliceRepresentationProxy")&&n){const e=t?n.step:-n.step,a=Math.min(n.max,Math.max(n.min,s.getSlice()+e));s.setSlice(a)}}var Sa=function(e){const{girder:t}=e;let{proxyManager:a}=e;a||(a=v.ZP.newInstance({proxyConfiguration:qt.Proxy}));const n=a.createProxy("AnimationManager","AnimationProxyManager"),o=new s.ZP.Store({plugins:[Qt(a)],state:{proxyManager:a,route:"landing",savingStateName:null,loadingState:!1,screenshotDialog:!1,pendingScreenshot:null,panels:{},cameraViewPoints:{},mostRecentViewPoint:null,collapseDatasetPanels:!1,suppressBrowserWarning:!1},getters:{proxyManager:e=>e.proxyManager,cameraViewPoints:e=>e.cameraViewPoints,mostRecentViewPoint:e=>e.mostRecentViewPoint},modules:{files:ua({proxyManager:a,girder:t}),views:ha({proxyManager:a,girder:t}),widgets:ya({proxyManager:a,girder:t}),animations:fa({animationManager:n})},mutations:{showLanding(e){e.route="landing"},showApp(e){e.route="app"},savingState(e,t=null){e.savingStateName=t},loadingState(e,t){e.loadingState=t},addPanel:(e,{component:t,priority:a=0})=>{a in e.panels||i.Z.set(e.panels,a,[]),e.panels[a].push(t)},openScreenshotDialog(e,t){e.pendingScreenshot=t,e.screenshotDialog=!0},closeScreenshotDialog(e){e.pendingScreenshot=null,e.screenshotDialog=!1},mostRecentViewPoint(e,t){e.mostRecentViewPoint=t},collapseDatasetPanels(e,t){e.collapseDatasetPanels=t},suppressBrowserWarning(e,t){e.suppressBrowserWarning=t}},actions:{addPanel:(0,W.Gy)("addPanel"),closeScreenshotDialog:(0,W.Gy)("closeScreenshotDialog"),collapseDatasetPanels:(0,W.Gy)("collapseDatasetPanels"),suppressBrowserWarning:(0,W.Gy)("suppressBrowserWarning"),saveState({commit:e,state:t},i){const s=new Date,n=i||`${s.getFullYear()}${s.getMonth()+1}${s.getDate()}_${s.getHours()}-${s.getMinutes()}-${s.getSeconds()}.glance`;e("savingState",n);const o=a.getActiveSource()?a.getActiveSource().getProxyId():-1,r={version:ba,activeSourceId:o,store:{route:t.route,views:t.views,widgets:t.widgets}},l={recycleViews:!0,datasetHandler(e,t){const a=t.get("name","url","remoteMetaData"),i=e.get("name","url","remoteMetaData"),s=a.url?a:i;return t.getKey("girderProvenance")?{serializedType:"girder",provenance:t.getKey("girderProvenance"),item:t.getKey("girderItem"),meta:t.getKey("meta")}:s.name&&s.url?s:e.getState()}},c=new(P());a.saveState(l,r).then((t=>{c.file("state.json",JSON.stringify(t)),c.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}}).then((e=>{const t=URL.createObjectURL(e),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download",n),document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout((()=>URL.revokeObjectURL(t)),6e4)})).then((()=>e("savingState",null)))}))},restoreAppState({commit:e,dispatch:i,state:s},n){e("loadingState",!0);const o=new WeakMap;return i("resetWorkspace"),a.loadState(n,{datasetHandler(i){if(i.vtkClass)return(0,Xt.Z)(i);let s=i.name,n=i.url;const r={};if("girder"===i.serializedType){const{itemId:e,itemName:a}=i.item,{apiRoot:o}=i.provenance;s=a,n=`${o}/item/${e}/download`,r.headers={...r.headers||{},"Girder-Token":t.girderRest.token}}let l;if(i.seriesUrls){const e=ca(i.name),t=i.seriesUrls.map((e=>Q.downloadDataset(function(e){var t;return null===(t=e.split("/").pop())||void 0===t?void 0:t.split("?").shift()}(e),e,r)));l=Promise.all(t).then((t=>Q.loadFileSeries(t,e,s)))}else l=Q.downloadDataset(s,n,{...r,progressCallback(t){const a=t.lengthComputable?t.loaded/t.total:1/0;e("files/setProgress",{id:s,percentage:a})}}).then((e=>Q.loadFiles([e]))).then((e=>e[0]));return l.then((({dataset:e,reader:t})=>{let s=null;if(t&&t.getOutputData)s=t.getOutputData();else if(e&&e.isA)s=e;else if(t&&t.setProxyManager)return t.setProxyManager(a),null;if(!s)throw new Error("Invalid dataset");return"girder"===i.serializedType?(s=na(s,i.meta),o.set(s,{girderProvenance:i.provenance,girderItem:i.item,meta:i.meta})):s.set(i,!0),s})).catch((e=>{const t="Dataset doesn't exist or adblock/firewall prevents access.";if("xhr"in e){const{xhr:a}=e;throw new Error(`${a.statusText} (${a.status}): ${t}`)}throw new Error(`${e.message} (${t})`)}))}}).then((e=>{const{version:t,store:r,$oldToNewIdMapping:l}=e;t>=2?this.replaceState(wa(s,r)):this.replaceState(wa(s,e)),a.getSources().forEach((e=>{const t=e.getDataset();if(o.has(t)){const a=o.get(t);Object.keys(a).forEach((t=>e.setKey(t,a[t])))}})),i("rewriteProxyIds",{appState:n,mapping:l}).then((()=>{a.modified();const i=a.getViews().filter((e=>e.getContainer())),s=i.find((e=>"View3D"===e.getProxyName()))||i[0];if(s&&s.activate(),a.getSources().forEach((e=>(0,W._3)(a,e))),t>=2){const{activeSourceId:t}=e,i=l[t],s=a.getProxyById(i);s&&s.activate()}else{const e=a.getSources()[0];e&&e.activate()}}))})).then((()=>e("loadingState",!1)))},resetWorkspace(){a.getSources().forEach((e=>setTimeout((()=>a.deleteProxy(e)),0))),setTimeout((()=>{a.renderAllViews(),a.resetCameraInAllViews()}),0)},resetActiveCamera(){a.resetCamera()},increaseSlice({state:e}){"app"===e.route&&_a(a,!0)},decreaseSlice({state:e}){"app"===e.route&&_a(a,!1)},takeScreenshot({commit:e,state:t},i=null){const s=i||a.getActiveView(),n=ia.getViewType(s);return s?s.captureImage().then((a=>{e("openScreenshotDialog",{imgSrc:a,viewName:s.getName(),viewData:{background:t.views.backgroundColors[n]}})})):Promise.resolve()},setCameraViewPoints({dispatch:e,state:t},a){t.cameraViewPoints=a;const i=Object.keys(a);if(0!==i.length){e("changeCameraViewPoint",i[0]);e("views/setInteractionStyle3D","FirstPerson")}},changeCameraViewPoint({commit:e,getters:t,state:a},i){const s=a.proxyManager.getViews(),n=t.proxyManager,o=t.cameraViewPoints[i]||{},r=o.camera,l=o.show,c=o.hide,d=[];s.filter((e=>"default"===e.getName())).forEach((e=>{const t=e.getCamera().getDistance(),a=[r.focalPoint[0]-r.position[0],r.focalPoint[1]-r.position[1],r.focalPoint[2]-r.position[2]],i=[r.position[0]+a[0]*t,r.position[1]+a[1]*t,r.position[2]+a[2]*t],s=e.moveCamera(i,r.position,r.viewUp,100);d.push(s)})),Promise.all(d).then((()=>{n.getSources().forEach((e=>{const t=e.getName();if(!l.includes(t)&&!c.includes(t))return;const a=l.includes(t),i=n.getRepresentations().filter((t=>t.getInput()===e))[0];i.getVisibility()!==a&&i.setVisibility(a)})),n.renderAllViews()})),e("mostRecentViewPoint",i)},previousViewPoint({dispatch:e,getters:t}){const a=t.mostRecentViewPoint;if(!a)return;const i=Object.keys(t.cameraViewPoints);if(!i.includes(a))return;const s=i.length,n=(i.indexOf(a)+s-1)%s;e("changeCameraViewPoint",i[n])},nextViewPoint({dispatch:e,getters:t}){const a=t.mostRecentViewPoint;if(!a)return;const i=Object.keys(t.cameraViewPoints);if(!i.includes(a))return;const s=(i.indexOf(a)+1)%i.length;e("changeCameraViewPoint",i[s])},rewriteProxyIds({dispatch:e},{appState:t,mapping:a}){const i=e=>e.reduce(((e,t)=>({...e,[t.id]:a[t.id]})),{}),s={sources:i(t.sources),views:i(t.views),reps:i(t.representations),all:a};e("widgets/rewriteProxyIds",s),e("views/rewriteProxyIds",s)}}});return a.set({$store:o},!0),o};function Pa(e){for(;e.length;)e.pop()()}class Ca{constructor(e="settings"){this.keyPrefix=e,this.storeSettingsMap={},this.store=null,this.storeWatchers=[]}key(e){return this.keyPrefix?`${this.keyPrefix}.${e}`:e}get(e){const t=window.localStorage.getItem(this.key(e));if(null!==t)return JSON.parse(t)}set(e,t){return window.localStorage.setItem(this.key(e),JSON.stringify(t))}syncWithStore(e,t){Pa(this.storeWatchers),this.store=e,this.storeSettingsMap=t;const a=Object.keys(t);a.forEach((e=>{const a=this.get(e);if(void 0!==a){const{set:i}=t[e];i(a)}})),this.storeWatchers=a.map((a=>{const{get:i}=t[a];return e.watch(i,(e=>this.set(a,e)))}))}delete(){Pa(this.storeWatchers),this.storeSettingsMap={},this.store=null}}const{getReader:ka,importBase64Dataset:Va,listReaders:Ia,listSupportedExtensions:Ta,loadFiles:$a,openFiles:Da,registerReader:Ma,registerReadersToProxyManager:Za}=Q;i.Z.use(s.ZP),i.Z.use(n.Z),i.Z.use(aa);let La=null;function Ra(e){La=e}function Oa(e,t=null){const a=t||La||qt.Proxy,s=v.ZP.newInstance({proxyConfiguration:a}),n=new Ca,o=Sa({proxyManager:s,girder:p}),r=new i.Z({el:e,components:{App:ee.Z},store:o,provide:p,vuetify:m.Hl,proxyManager:s,template:"<App />"});return o.watch((e=>e.route),(e=>{if(n.get("noHistory"))return;const t=window.history.state||{};"landing"===e&&t.app&&window.history.back(),"app"!==e||t.app||window.history.pushState({app:!0},"")})),window.history.replaceState({app:!1},""),window.addEventListener("popstate",(function(e){(e.state||{}).app?o.commit("showApp"):o.commit("showLanding")})),n.set("noHistory",!1),n.syncWithStore(o,{collapseDatasetPanels:{set:e=>o.dispatch("collapseDatasetPanels",e),get:e=>e.collapseDatasetPanels},suppressBrowserWarning:{set:e=>o.dispatch("suppressBrowserWarning",e),get:e=>e.suppressBrowserWarning}}),{proxyManager:s,store:o,processURLArgs(){const e=l.Z.extractURLParameters();Object.keys(e).filter((e=>e.startsWith("setting."))).forEach((t=>{const a=t.substr("setting.".length);n.set(a,e[t])}));const{name:t,url:a}=e;if(t&&a){const e="string"==typeof t?[t]:t,i="string"==typeof a?[a]:a;r.$children[0].autoLoadRemotes("resources from url",i,e)}},addDatasetPanel(e){o.commit("addPanel",{component:e})},showApp(){o.commit("showApp")},getSetting:e=>n.get(e),setSetting:(e,t)=>n.set(e,t)}}},132:function(e,t,a){"use strict";var i=a(602),s=a(8);const n=500;function o(e,t){for(let a=0;a<t.length;a++){const{name:i}=t[a];if(i&&t[a].domain){const{domain:s}=t[a];e[i]={...s},s.step&&"any"===s.step&&(Number.isInteger(s.min)&&Number.isInteger(s.max)?e[i].step=.01:e[i].step=(s.max-s.min)/n)}else t[a].children&&o(e,t[a].children)}}function r(e,t){const a=[],i=e.$proxyManager.getProxyById(e.sourceId);i[t]&&a.push(i);const s=e.$proxyManager.getRepresentations().filter((t=>t.getInput()===e.source));for(let e=0;e<s.length;e++){const i=s[e];i[t]&&a.push(i)}return a}t.Z={generateComponent:function(e,t,a=!1,n={onChange:{},onUpdate:[]}){const l=function(e){const t={};for(let a=0;a<e.length;a++){const{name:i,computed:s}=e[a];s&&(t[i]=s)}return t}(t),c={};return Object.keys(l).forEach((e=>{c[`get${s.ZP.capitalize(e)}`]=l[e].get,c[`set${s.ZP.capitalize(e)}`]=l[e].set})),{name:e,props:["sourceId"],data:()=>function(e){const t={fields:e,domains:{}};for(let a=0;a<e.length;a++){const{name:i,initialValue:s,computed:n}=e[a];n||(t[i]=s)}return t}(t),computed:{...l,...(0,i.rn)("views",{viewOrder:e=>e.viewOrder}),source(){return this.$proxyManager.getProxyById(this.sourceId)}},watch:{viewOrder(){a&&this.$nextTick(this.$forceUpdate)}},proxyManagerHooks:{onProxyModified(e){e.isA("vtkAbstractRepresentationProxy")&&e.getInput()&&e.getInput()===this.source&&this.updateData()},onProxyCreated(e){const{proxyGroup:t,proxy:a}=e;"Representations"===t&&a.getInput()===this.source&&this.updateAll()}},created(){this.subscriptions=function(e,t,a){const i=[];for(let s=0;s<t.length;s++){const{name:n}=t[s];i.push(e.$watch(n,(t=>{e.updateProxies(n,t,a&&a[n])})))}return i}(this,t,n.onChange)},mounted(){this.updateAll()},beforeDestroy(){for(;this.subscriptions.length;)this.subscriptions.pop()()},methods:{...c,updateAll(){if(this.updateDomains(),this.updateData(),n.onUpdate)for(let e=0;e<n.onUpdate.length;e++)this[n.onUpdate[e]]()},updateDomains(){if(this.inUpdateDomains)return;this.inUpdateDomains=!0;const e=this.$proxyManager.getRepresentations().filter((e=>e.getInput()===this.source)),t=[this.$proxyManager.getProxyById(this.sourceId)].concat(e),a={};for(;t.length;){o(a,t.pop().getReferenceByName("ui"))}this.inUpdateDomains=!1,this.domains=a},updateData(){if(!this.inUpdateData){this.inUpdateData=!0;for(let e=0;e<this.fields.length;e++){const{name:t}=this.fields[e],a=`get${s.ZP.capitalize(t)}`,i=r(this,a);if(i.length){const e=i[0][a]();this[t]!==e&&(this[t]=e)}}this.inUpdateData=!1}},updateProxies(e,t,a){const i=`set${s.ZP.capitalize(e)}`,n=r(this,i);let o=!n.length;for(;n.length;)o=n.pop()[i](t)||o;o&&a&&this[a]&&this[a](e,t)}}}},findProxiesWithMethod:r}},439:function(e,t,a){"use strict";a.d(t,{H_:function(){return i},Bp:function(){return s},Zp:function(){return n},jB:function(){return o},v7:function(){return r},h$:function(){return l},In:function(){return c}});const i="View3D:default",s="default",n={default:"View3D:default",x:"View2D_X:x",y:"View2D_Y:y",z:"View2D_Z:z"},o={s:"Image&nbsp;size:&nbsp;${sliceWidth}&nbsp;x&nbsp;${sliceHeight}",nw:"Origin:&nbsp;${sliceOrigin}<br>Spacing:&nbsp;${sliceSpacing}&nbsp;mm<br>${sliceIndex}&nbsp;of&nbsp;${sliceCount}",se:"WL:&nbsp;${windowLevel}&nbsp;/&nbsp;WW:&nbsp;${windowWidth}"},r={[n.default]:"3D",[n.x]:"Orientation X",[n.y]:"Orientation Y",[n.z]:"Orientation Z"},l={[n.default]:"3D",[n.x]:"Sagittal",[n.y]:"Coronal",[n.z]:"Axial"},c=[[1,0,0],[0,1,0],[0,0,1]]},165:function(e,t,a){"use strict";a.d(t,{qV:function(){return s},qg:function(){return n}});var i=a(56);const s="linear-gradient(#333, #999)",n=["#000000","#ffffff",...i.oe,"linear-gradient(#7478BE, #C1C3CA)","linear-gradient(#00002A, #52576E)",s]},372:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var i=a(129),s=JSON.parse('[{"Name":"Medical","Children":[{"Name":"CT","Children":[{"Name":"CT-AAA","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,143.556,0,166.222,0.686275,214.389,0.696078,419.736,0.833333,3071,0.803922],"RGBPoints":[-3024,0,0,0,143.556,0.615686,0.356863,0.184314,166.222,0.882353,0.603922,0.290196,214.389,1,1,1,419.736,1,0.937033,0.954531,3071,0.827451,0.658824,1]},{"Name":"CT-AAA2","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,129.542,0,145.244,0.166667,157.02,0.5,169.918,0.627451,395.575,0.8125,1578.73,0.8125,3071,0.8125],"RGBPoints":[-3024,0,0,0,129.542,0.54902,0.25098,0.14902,145.244,0.6,0.627451,0.843137,157.02,0.890196,0.47451,0.6,169.918,0.992157,0.870588,0.392157,395.575,1,0.886275,0.658824,1578.73,1,0.829256,0.957922,3071,0.827451,0.658824,1]},{"Name":"CT-Bone","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,-16.4458,0,641.385,0.715686,3071,0.705882],"RGBPoints":[-3024,0,0,0,-16.4458,0.729412,0.254902,0.301961,641.385,0.905882,0.815686,0.552941,3071,1,1,1]},{"Name":"CT-Bones","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-1000,0,152.19,0,278.93,0.190476,952,0.2],"RGBPoints":[-1000,0.3,0.3,1,-488,0.3,1,0.3,463.28,1,0,0,659.15,1,0.912535,0.0374849,953,1,0.3,0.3]},{"Name":"CT-Cardiac","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,-77.6875,0,94.9518,0.285714,179.052,0.553571,260.439,0.848214,3071,0.875],"RGBPoints":[-3024,0,0,0,-77.6875,0.54902,0.25098,0.14902,94.9518,0.882353,0.603922,0.290196,179.052,1,0.937033,0.954531,260.439,0.615686,0,0,3071,0.827451,0.658824,1]},{"Name":"CT-Cardiac2","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,42.8964,0,163.488,0.428571,277.642,0.776786,1587,0.754902,3071,0.754902],"RGBPoints":[-3024,0,0,0,42.8964,0.54902,0.25098,0.14902,163.488,0.917647,0.639216,0.0588235,277.642,1,0.878431,0.623529,1587,1,1,1,3071,0.827451,0.658824,1]},{"Name":"CT-Cardiac3","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,-86.9767,0,45.3791,0.169643,139.919,0.589286,347.907,0.607143,1224.16,0.607143,3071,0.616071],"RGBPoints":[-3024,0,0,0,-86.9767,0,0.25098,1,45.3791,1,0,0,139.919,1,0.894893,0.894893,347.907,1,1,0.25098,1224.16,1,1,1,3071,0.827451,0.658824,1]},{"Name":"CT-Chest-Contrast-Enhanced","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,67.0106,0,251.105,0.446429,439.291,0.625,3071,0.616071],"RGBPoints":[-3024,0,0,0,67.0106,0.54902,0.25098,0.14902,251.105,0.882353,0.603922,0.290196,439.291,1,0.937033,0.954531,3071,0.827451,0.658824,1]},{"Name":"CT-Chest-Vessels","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,-1278.35,0,22.8277,0.428571,439.291,0.625,3071,0.616071],"RGBPoints":[-3024,0,0,0,-1278.35,0.54902,0.25098,0.14902,22.8277,0.882353,0.603922,0.290196,439.291,1,0.937033,0.954531,3071,0.827451,0.658824,1]},{"Name":"CT-Coronary-Arteries","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-2048,0,136.47,0,159.215,0.258929,318.43,0.571429,478.693,0.776786,3661,1],"RGBPoints":[-2048,0,0,0,136.47,0,0,0,159.215,0.159804,0.159804,0.159804,318.43,0.764706,0.764706,0.764706,478.693,1,1,1,3661,1,1,1]},{"Name":"CT-Coronary-Arteries-2","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-2048,0,142.677,0,145.016,0.116071,192.174,0.5625,217.24,0.776786,384.347,0.830357,3661,0.830357],"RGBPoints":[-2048,0,0,0,142.677,0,0,0,145.016,0.615686,0,0.0156863,192.174,0.909804,0.454902,0,217.24,0.972549,0.807843,0.611765,384.347,0.909804,0.909804,1,3661,1,1,1]},{"Name":"CT-Coronary-Arteries-3","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-2048,0,128.643,0,129.982,0.0982143,173.636,0.669643,255.884,0.857143,584.878,0.866071,3661,1],"RGBPoints":[-2048,0,0,0,128.643,0,0,0,129.982,0.615686,0,0.0156863,173.636,0.909804,0.454902,0,255.884,0.886275,0.886275,0.886275,584.878,0.968627,0.968627,0.968627,3661,1,1,1]},{"Name":"CT-Cropped-Volume-Bone","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-2048,0,-451,0,-450,1,1050,1,3661,1],"RGBPoints":[-2048,0,0,0,-451,0,0,0,-450,0.0556356,0.0556356,0.0556356,1050,1,1,1,3661,1,1,1]},{"Name":"CT-Fat","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-1000,0,-100,0,-99,0.15,-60,0.15,-59,0,101.2,0,952,0],"RGBPoints":[-1000,0.3,0.3,1,-497.5,0.3,1,0.3,-99,0,0,1,-76.946,0,1,0,-65.481,0.835431,0.888889,0.0165387,83.89,1,0,0,463.28,1,0,0,659.15,1,0.912535,0.0374849,2952,1,0.300267,0.299886]},{"Name":"CT-Liver-Vasculature","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-2048,0,149.113,0,157.884,0.482143,339.96,0.660714,388.526,0.830357,1197.95,0.839286,3661,0.848214],"RGBPoints":[-2048,0,0,0,149.113,0,0,0,157.884,0.501961,0.25098,0,339.96,0.695386,0.59603,0.36886,388.526,0.854902,0.85098,0.827451,1197.95,1,1,1,3661,1,1,1]},{"Name":"CT-Lung","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-1000,0,-600,0,-599,0.15,-400,0.15,-399,0,2952,0],"RGBPoints":[-1000,0.3,0.3,1,-600,0,0,1,-530,0.134704,0.781726,0.0724558,-460,0.929244,1,0.109473,-400,0.888889,0.254949,0.0240258,2952,1,0.3,0.3]},{"Name":"CT-MIP","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,-637.62,0,700,1,3071,1],"RGBPoints":[-3024,0,0,0,-637.62,1,1,1,700,1,1,1,3071,1,1,1]},{"Name":"CT-Muscle","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-3024,0,-155.407,0,217.641,0.676471,419.736,0.833333,3071,0.803922],"RGBPoints":[-3024,0,0,0,-155.407,0.54902,0.25098,0.14902,217.641,0.882353,0.603922,0.290196,419.736,1,0.937033,0.954531,3071,0.827451,0.658824,1]},{"Name":"CT-Pulmonary-Arteries","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-2048,0,-568.625,0,-364.081,0.0714286,-244.813,0.401786,18.2775,0.607143,447.798,0.830357,3592.73,0.839286],"RGBPoints":[-2048,0,0,0,-568.625,0,0,0,-364.081,0.396078,0.301961,0.180392,-244.813,0.611765,0.352941,0.0705882,18.2775,0.843137,0.0156863,0.156863,447.798,0.752941,0.752941,0.752941,3592.73,1,1,1]},{"Name":"CT-Soft-Tissue","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-2048,0,-167.01,0,-160,1,240,1,3661,1],"RGBPoints":[-2048,0,0,0,-167.01,0,0,0,-160,0.0556356,0.0556356,0.0556356,240,1,1,1,3661,1,1,1]}]},{"Name":"MR","Children":[{"Name":"MR-Angio","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[-2048,0,151.354,0,158.279,0.4375,190.112,0.580357,200.873,0.732143,3661,0.741071],"RGBPoints":[-2048,0,0,0,151.354,0,0,0,158.279,0.74902,0.376471,0,190.112,1,0.866667,0.733333,200.873,0.937255,0.937255,0.937255,3661,1,1,1]},{"Name":"MR-Default","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[0,0,20,0,40,0.15,120,0.3,220,0.375,1024,0.5],"RGBPoints":[0,0,0,0,20,0.168627,0,0,40,0.403922,0.145098,0.0784314,120,0.780392,0.607843,0.380392,220,0.847059,0.835294,0.788235,1024,1,1,1]},{"Name":"MR-MIP","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[0,0,98.3725,0,416.637,1,2800,1],"RGBPoints":[0,1,1,1,98.3725,1,1,1,416.637,1,1,1,2800,1,1,1]},{"Name":"MR-T2-Brain","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[0,0,36.05,0,218.302,0.171429,412.406,1,641,1],"RGBPoints":[0,0,0,0,98.7223,0.956863,0.839216,0.192157,412.406,0,0.592157,0.807843,641,1,1,1]}]},{"Name":"DTI-FA-Brain","NanColor":[1,1,0],"ColorSpace":"RGB","OpacityPoints":[0,0,0,0,0.3501,0.0158,0.49379,0.7619,0.6419,1,0.992,1,0.995,0,0.995,0],"RGBPoints":[0,1,0,0,0,1,0,0,0.24974,0.4941,1,0,0.49949,0,0.9882,1,0.7492,0.51764,0,1,0.995,1,0,0,0.995,1,0,0]}]}]');const n={...i.Z.getPresetByName("Cool to Warm"),Name:"Default (Cool to Warm)"};function o(e,t){const a=e.Name.toLowerCase(),i=t.Name.toLowerCase();return a>i?1:-(a<i)}function r(e,t){const a=t.map((e=>i.Z.getPresetByName(e)));return a.sort(o),{Name:e,Children:a}}!function e(t){t.forEach((t=>{t.Children?e(t.Children):i.Z.addPreset(t)}))}(s.concat(n));var l=[].concat(n,s,r("ParaView",["2hot","Asymmtrical Earth Tones (6_21b)","Cold and Hot","Cool to Warm (Extended)","Cool to Warm","coolwarm","Grayscale","Linear Blue (8_31f)","Linear YGB 1211g","Rainbow Blended Black","Rainbow Blended Grey","Rainbow Blended White","Rainbow Desaturated","rainbow","Warm to Cool (Extended)","Warm to Cool"]),r("ERDC",["erdc_blue2cyan_BW","erdc_blue2gold","erdc_blue2gold_BW","erdc_blue2green_BW","erdc_blue2green_muted","erdc_blue2yellow","erdc_blue_BW","erdc_brown_BW","erdc_cyan2orange","erdc_divHi_purpleGreen","erdc_divHi_purpleGreen_dim","erdc_divLow_icePeach","erdc_divLow_purpleGreen","erdc_gold_BW","erdc_green2yellow_BW","erdc_iceFire_H","erdc_iceFire_L","erdc_magenta_BW","erdc_marine2gold_BW","erdc_orange_BW","erdc_pbj_lin","erdc_purple2green","erdc_purple2green_dark","erdc_purple2pink_BW","erdc_purple_BW","erdc_rainbow_bright","erdc_rainbow_dark","erdc_red2purple_BW","erdc_red2yellow_BW","erdc_red_BW","erdc_sapphire2gold_BW"]),r("Others",["Black, Blue and White","Black, Orange and White","Black-Body Radiation","blot","Blue to Red Rainbow","Blue to Yellow","BLUE-WHITE","blue2cyan","blue2yellow","Blues","bone_Matlab","BrBG","BrOrYl","BuGn","BuGnYl","BuPu","BuRd","CIELab Blue to Red","CIELab_blue2red","copper_Matlab","GBBr","gist_earth","GnBu","GnBuPu","GnRP","GnYlRd","gray_Matlab","Green-Blue Asymmetric Divergent (62Blbc)","GREEN-WHITE_LINEAR","Greens","GYPi","GyRd","Haze","Haze_cyan","Haze_green","Haze_lime","heated_object","hsv","hue_L60","Inferno (matplotlib)","jet","magenta","Magma (matplotlib)","Muted Blue-Green","nic_CubicL","nic_CubicYF","nic_Edge","Oranges","OrPu","pink_Matlab","PiYG","Plasma (matplotlib)","PRGn","PuBu","PuOr","PuRd","Purples","RdOr","RdOrYl","RdPu","Red to Blue Rainbow","Spectral_lowBlue","Viridis (matplotlib)","X Ray","Yellow 15"]))},438:function(e,t,a){"use strict";a.d(t,{u3:function(){return i}});const i={md:768}},56:function(e,t,a){"use strict";a.d(t,{oe:function(){return i},wY:function(){return s}});const i=["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],s=["#ffee00","#bbbe64","#f3b700","#91f5ad","#fdca40","#f79824","#e57c04"]},27:function(e,t,a){"use strict";a.d(t,{y5:function(){return s},Gy:function(){return n},cO:function(){return o},JL:function(){return r},Lg:function(){return l},_3:function(){return c},aX:function(){return d},z1:function(){return u},XC:function(){return m}});var i=a(566);function s(){let e=null;const t={sub(a){t.unsub(),e=a},unsub(){null!==e&&(e.unsubscribe(),e=null)}};return t}function n(e){return({commit:t},a)=>t(e,a)}function o(e,t){const a={};return Object.keys(e).forEach((i=>{let s=i;i in t&&(s=t[i]),a[s]=e[i]})),a}function r(e,t){const a={};return Object.entries(e).forEach((([e,i])=>{let s=i;i in t&&(s=t[i]),a[e]=s})),a}function l(e,t){return e.map((e=>e in t?t[e]:e))}function c(e,t){const a=e.getViews().filter((e=>e.isA("vtkView2DProxy"))),i=a.map((e=>e.getReferenceByName("sliceRepresentation")));e.createRepresentationInAllViews(t),"LabelMap"===t.getProxyName()&&a.forEach(((e,t)=>e.bindRepresentationToManipulator(i[t])))}function d(e,t){const a=e.getViews().find((e=>"View3D"===e.getProxyName()));if(!a)throw new Error("Cannot find 3D view!");const i=e.getRepresentation(t,a);if(!i||!i.getCropFilter)throw new Error("Cannot find the volume rep with a crop filter!");return i.getCropFilter()}function u(e){const t=["l","p","s"],a={},s=[0,1,2],n=[0,1,2];for(let o=0;o<3;o++){let o=0,r=[0,0],l=[0,0];s.forEach(((t,a)=>{n.forEach(((i,s)=>{const n=e[3*t+i];Math.abs(n)>Math.abs(o)&&(o=n,r=[t,i],l=[a,s])}))}));const[c,d]=r,u=e.slice(3*c,3*(c+1)),p=Math.sign(o),m=i.scale(Array(3),u,p);a[t[d]]={axis:c,vector:m},s.splice(l[0],1),n.splice(l[1],1)}return a}const p={default:{forwardAxis:1,forwardOrientation:1,upwardAxis:2,upwardOrientation:1},x:{forwardAxis:0,forwardOrientation:1,upwardAxis:2,upwardOrientation:1},y:{forwardAxis:1,forwardOrientation:1,upwardAxis:2,upwardOrientation:1},z:{forwardAxis:2,forwardOrientation:1,upwardAxis:1,upwardOrientation:-1}};function m(e,t,a,s=0){const{forwardAxis:n,forwardOrientation:o,upwardAxis:r,upwardOrientation:l}=p[a],c=i.scale(Array(3),t[n],o),d=i.scale(Array(3),t[r],l),u=e.getCamera(),m=u.getPosition(),v=u.getViewUp(),g=u.getFocalPoint(),h=i.add(Array(3),g,c);u.setPosition(...h),u.setViewUp(...d),e.resetCamera();const y=u.getFocalPoint(),f=u.getPosition(),b=u.getViewUp();return u.setFocalPoint(...g),u.setPosition(...m),u.setViewUp(...v),e.moveCamera(y,f,b,s)}},375:function(e,t,a){"use strict";var i=a(8),s=a(19);const{vtkWarningMacro:n}=i.ZP;const o={colorMap:null};function r(e,t,a={}){Object.assign(t,o,a),s.ZP.extend(e,t,a),i.ZP.setGet(e,t,["colorMap"]),function(e,t){t.classHierarchy.push("vtkLabelMap"),e.setLabelColor=(a,i)=>{Number.isNaN(Number(a))?n("Provided label is not a number"):(t.colorMap[a]=i.slice(),void 0===t.colorMap[a][3]&&(t.colorMap[a][3]=255),e.modified())},e.removeLabel=a=>{Number.isNaN(Number(a))?n("Provided label is not a number"):(delete t.colorMap[a],e.modified())},null===t.colorMap&&(t.colorMap={0:[0,0,0,0],1:[0,0,0,255]})}(e,t)}const l=i.ZP.newInstance(r,"vtkLabelMap");t.ZP={newInstance:l,extend:r}},319:function(e,t,a){var i=a(465),s=a(457);void 0===s.Glance&&(s.Glance=i),e.exports=i},502:function(e,t,a){var i={"./af":172,"./af.js":172,"./ar":173,"./ar-dz":174,"./ar-dz.js":174,"./ar-kw":175,"./ar-kw.js":175,"./ar-ly":176,"./ar-ly.js":176,"./ar-ma":177,"./ar-ma.js":177,"./ar-sa":178,"./ar-sa.js":178,"./ar-tn":179,"./ar-tn.js":179,"./ar.js":173,"./az":180,"./az.js":180,"./be":181,"./be.js":181,"./bg":182,"./bg.js":182,"./bm":183,"./bm.js":183,"./bn":184,"./bn-bd":185,"./bn-bd.js":185,"./bn.js":184,"./bo":186,"./bo.js":186,"./br":187,"./br.js":187,"./bs":188,"./bs.js":188,"./ca":189,"./ca.js":189,"./cs":190,"./cs.js":190,"./cv":191,"./cv.js":191,"./cy":192,"./cy.js":192,"./da":193,"./da.js":193,"./de":194,"./de-at":195,"./de-at.js":195,"./de-ch":196,"./de-ch.js":196,"./de.js":194,"./dv":197,"./dv.js":197,"./el":198,"./el.js":198,"./en-au":199,"./en-au.js":199,"./en-ca":200,"./en-ca.js":200,"./en-gb":201,"./en-gb.js":201,"./en-ie":202,"./en-ie.js":202,"./en-il":203,"./en-il.js":203,"./en-in":204,"./en-in.js":204,"./en-nz":205,"./en-nz.js":205,"./en-sg":206,"./en-sg.js":206,"./eo":207,"./eo.js":207,"./es":208,"./es-do":209,"./es-do.js":209,"./es-mx":210,"./es-mx.js":210,"./es-us":211,"./es-us.js":211,"./es.js":208,"./et":212,"./et.js":212,"./eu":213,"./eu.js":213,"./fa":214,"./fa.js":214,"./fi":215,"./fi.js":215,"./fil":216,"./fil.js":216,"./fo":217,"./fo.js":217,"./fr":218,"./fr-ca":219,"./fr-ca.js":219,"./fr-ch":220,"./fr-ch.js":220,"./fr.js":218,"./fy":221,"./fy.js":221,"./ga":222,"./ga.js":222,"./gd":223,"./gd.js":223,"./gl":224,"./gl.js":224,"./gom-deva":225,"./gom-deva.js":225,"./gom-latn":226,"./gom-latn.js":226,"./gu":227,"./gu.js":227,"./he":228,"./he.js":228,"./hi":229,"./hi.js":229,"./hr":230,"./hr.js":230,"./hu":231,"./hu.js":231,"./hy-am":232,"./hy-am.js":232,"./id":233,"./id.js":233,"./is":234,"./is.js":234,"./it":235,"./it-ch":236,"./it-ch.js":236,"./it.js":235,"./ja":237,"./ja.js":237,"./jv":238,"./jv.js":238,"./ka":239,"./ka.js":239,"./kk":240,"./kk.js":240,"./km":241,"./km.js":241,"./kn":242,"./kn.js":242,"./ko":243,"./ko.js":243,"./ku":244,"./ku.js":244,"./ky":245,"./ky.js":245,"./lb":246,"./lb.js":246,"./lo":247,"./lo.js":247,"./lt":248,"./lt.js":248,"./lv":249,"./lv.js":249,"./me":250,"./me.js":250,"./mi":251,"./mi.js":251,"./mk":252,"./mk.js":252,"./ml":253,"./ml.js":253,"./mn":254,"./mn.js":254,"./mr":255,"./mr.js":255,"./ms":256,"./ms-my":257,"./ms-my.js":257,"./ms.js":256,"./mt":258,"./mt.js":258,"./my":259,"./my.js":259,"./nb":260,"./nb.js":260,"./ne":261,"./ne.js":261,"./nl":262,"./nl-be":263,"./nl-be.js":263,"./nl.js":262,"./nn":264,"./nn.js":264,"./oc-lnc":265,"./oc-lnc.js":265,"./pa-in":266,"./pa-in.js":266,"./pl":267,"./pl.js":267,"./pt":268,"./pt-br":269,"./pt-br.js":269,"./pt.js":268,"./ro":270,"./ro.js":270,"./ru":271,"./ru.js":271,"./sd":272,"./sd.js":272,"./se":273,"./se.js":273,"./si":274,"./si.js":274,"./sk":275,"./sk.js":275,"./sl":276,"./sl.js":276,"./sq":277,"./sq.js":277,"./sr":278,"./sr-cyrl":279,"./sr-cyrl.js":279,"./sr.js":278,"./ss":280,"./ss.js":280,"./sv":281,"./sv.js":281,"./sw":282,"./sw.js":282,"./ta":283,"./ta.js":283,"./te":284,"./te.js":284,"./tet":285,"./tet.js":285,"./tg":286,"./tg.js":286,"./th":287,"./th.js":287,"./tk":288,"./tk.js":288,"./tl-ph":289,"./tl-ph.js":289,"./tlh":290,"./tlh.js":290,"./tr":291,"./tr.js":291,"./tzl":292,"./tzl.js":292,"./tzm":293,"./tzm-latn":294,"./tzm-latn.js":294,"./tzm.js":293,"./ug-cn":295,"./ug-cn.js":295,"./uk":296,"./uk.js":296,"./ur":297,"./ur.js":297,"./uz":298,"./uz-latn":299,"./uz-latn.js":299,"./uz.js":298,"./vi":300,"./vi.js":300,"./x-pseudo":301,"./x-pseudo.js":301,"./yo":302,"./yo.js":302,"./zh-cn":303,"./zh-cn.js":303,"./zh-hk":304,"./zh-hk.js":304,"./zh-mo":305,"./zh-mo.js":305,"./zh-tw":306,"./zh-tw.js":306};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id=502},37:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var i={block:"Datasets-block-MOv47",blockTitle:"Datasets-blockTitle-hRnLc",blockContent:"Datasets-blockContent-a3h1_",blockRow:"Datasets-blockRow-lFOcN",slimInput:"Datasets-slimInput-Cnehi",canSelect:"Datasets-canSelect-w1m5T",clickable:"Datasets-clickable-JOYIZ",smallLabel:"Datasets-smallLabel-_8o5q",active:"Datasets-active-zv1WS",inactive:"Datasets-inactive-twtbQ",matrix:"Datasets-matrix-_nvw3",disable:"Datasets-disable-wMFzA",lutImage:"Datasets-lutImage-h8bWl",dropdownMenu:"Datasets-dropdownMenu-Z0GS3",button:"Datasets-button-W4Ok7",click:"Datasets-click-URBWc",negativeTopSpacing:"Datasets-negativeTopSpacing-HrNz2"}},78:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var i={datasetPanel:"Datasets-datasetPanel-B9jFW",subpanel:"Datasets-subpanel-RQd0h",panelContent:"Datasets-panelContent-kpRWg",panelHeader:"Datasets-panelHeader-uNZ70",headerMenuButton:"Datasets-headerMenuButton-_t8U7",subpanelHeader:"Datasets-subpanelHeader-_vvrH"}},374:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var i={wrapper:"TreeView-wrapper-Uw6mP",node:"TreeView-node-gbM0d",arrow:"TreeView-arrow-KW7L0",openArrow:"TreeView-openArrow-ezZCc",header:"TreeView-header-KxYvL",expander:"TreeView-expander-SVvAO",name:"TreeView-name-_uKWF"}},141:function(e,t,a){"use strict";a.d(t,{Z:function(){return B}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.available?a("div",[a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-xs":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},["geometry"===e.available?[a("v-flex",{attrs:{xs3:""}},[a("span",{staticClass:"body-2"},[e._v("Color By:")])]),e._v(" "),a("v-flex",{attrs:{xs9:""}},[a("v-select",{staticClass:"pv-no-select",class:e.$style.slimInput,attrs:{dense:"",flat:"","hide-details":"",items:e.arrays,value:e.arraySelectValue},on:{change:e.setColorBy}})],1),e._v(" "),"solid"===e.colorBy?a("v-flex",{attrs:{xs12:""}},[a("palette-picker",{staticClass:"pt-1 pb-1",attrs:{palette:e.palette,size:24},model:{value:e.solidColor,callback:function(t){e.solidColor=t},expression:"solidColor"}})],1):e._e()]:e._e(),e._v(" "),"solid"!==e.colorBy?[a("v-flex",{staticClass:"pt-2",attrs:{xs12:""}},[a("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("div",e._g({class:e.$style.clickable},i),[a("span",{staticClass:"body-2"},[e._v(e._s(e.presetName))]),e._v(" "),a("img",{class:e.$style.lutImage,attrs:{src:e.lutImage}})])]}}],null,!1,2069699272),model:{value:e.presetMenu,callback:function(t){e.presetMenu=t},expression:"presetMenu"}},[e._v(" "),e.presetMenu?a("tree-view",{class:e.$style.dropdownMenu,attrs:{tree:e.presets,labelKey:"Name",childrenKey:"Children"},on:{input:e.onChangePreset}}):e._e()],1)],1),e._v(" "),a("v-flex",{staticClass:"pb-4",class:e.$style.negativeTopSpacing,attrs:{xs5:""}},[a("v-text-field",{class:e.$style.negativeTopSpacing,attrs:{label:"Min",step:"any",disabled:"geometry"!==e.available,"hide-details":"",value:e.dataRange[0]},on:{change:function(t){return e.$proxyManager.renderAllViews()},input:function(t){return e.setDataRangeIndex(0,t)}}})],1),e._v(" "),a("v-flex",{staticClass:"text-center pb-4",class:e.$style.negativeTopSpacing,attrs:{xs2:""}},["geometry"===e.available?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({class:e.$style.negativeTopSpacing,attrs:{icon:"",small:""},on:{click:e.resetDataRange}},i),[a("v-icon",[e._v("mdi-arrow-expand-horizontal")])],1)]}}],null,!1,2807797372)},[e._v("\n              Reset range\n            ")]):a("v-spacer")],1),e._v(" "),a("v-flex",{staticClass:"pb-4",class:e.$style.negativeTopSpacing,attrs:{xs5:""}},[a("v-text-field",{class:e.$style.negativeTopSpacing,attrs:{label:"Max",step:"any",disabled:"geometry"!==e.available,reverse:"","hide-details":"",value:e.dataRange[1]},on:{change:function(t){return e.$proxyManager.renderAllViews()},input:function(t){return e.setDataRangeIndex(1,t)}}})],1)]:e._e(),e._v(" "),"volume"===e.available?[e.piecewiseFunction&&!e.hasPresetOpacity?a("v-flex",{attrs:{xs12:""},on:{touchstart:function(e){e.stopPropagation()}}},[a("piecewise-function-editor",{attrs:{piecewiseFunction:e.piecewiseFunction,source:e.source,proxyManager:e.$proxyManager}})],1):e._e(),e._v(" "),e.hasPresetOpacity?a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs3:""}},[a("span",{class:e.$style.smallLabel},[e._v("Shift")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{min:e.shiftRange[0],max:e.shiftRange[1],step:"0","hide-details":""},model:{value:e.shift,callback:function(t){e.shift=t},expression:"shift"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{type:"number",min:e.shiftRange[0],max:e.shiftRange[1],step:"1","hide-details":""},model:{value:e.shift,callback:function(t){e.shift=t},expression:"shift"}})],1)],1)],1):e._e(),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-checkbox",{class:e.$style.slimInput,attrs:{"hide-details":"",label:"Apply color to slices"},on:{change:e.applyColorToSlices},model:{value:e.colorToSlices,callback:function(t){e.colorToSlices=t},expression:"colorToSlices"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-checkbox",{class:e.$style.slimInput,attrs:{"hide-details":"",label:"Apply opacity to slices"},on:{change:e.applyOpacityToSlices},model:{value:e.opacityToSlices,callback:function(t){e.opacityToSlices=t},expression:"opacityToSlices"}})],1)]:e._e(),e._v(" "),"geometry"===e.available&&e.colorByName?a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs2:""}},[a("v-icon",{class:e.$style.click,on:{click:function(t){t.stopPropagation(),e.interpolateScalarsBeforeMapping=!e.interpolateScalarsBeforeMapping}}},[e._v("\n                "+e._s(e.interpolateScalarsBeforeMapping?"mdi-checkbox-marked":"mdi-checkbox-blank-outline")+"\n              ")])],1),e._v(" "),a("v-flex",{attrs:{xs10:""}},[a("span",{staticClass:"body-2"},[e._v("Interpolate scalar before mapping")])])],1)],1):e._e()],2)],1)],1)],1):e._e()};i._withStripped=!0;var s=a(8),n=a(373),o=a(129),r=a(113),l=a(142),c=a(36),d=a(143),u=a(56),p=a(372);const{Mode:m}=r.Z,v={text:"Solid color",value:"solid"},g=document.createElement("canvas");g.setAttribute("width",300),g.setAttribute("height",1);var h={name:"ColorBy",props:["sourceId"],components:{PalettePicker:c.Z,PiecewiseFunctionEditor:l.Z,TreeView:d.Z},data:()=>({palette:u.oe.concat("#ffffff","#000000"),available:"",colorBy:"solid",arrays:[v],piecewiseFunction:null,solidColor:"#ffffff",lutImage:"",presetName:"",presets:p.Z,presetMenu:!1,shift:0,dataRange:[0,0],interpolateScalarsBeforeMapping:!0,colorToSlices:!1,opacityToSlices:!1,originalLUTRanges:{}}),computed:{source(){return this.$proxyManager.getProxyById(this.sourceId)},colorByName(){return Array.isArray(this.colorBy)?this.colorBy[0]:null},colorByLocation(){return Array.isArray(this.colorBy)?this.colorBy[1]:null},hasPresetOpacity(){const e=o.Z.getPresetByName(this.presetName);return Boolean(e&&e.OpacityPoints)},shiftRange(){const e=o.Z.getPresetByName(this.presetName);if(e){let t=1/0,a=-1/0;for(let i=0;i<e.RGBPoints.length;i+=4)t=Math.min(t,e.RGBPoints[i]),a=Math.max(a,e.RGBPoints[i]);const i=(a-t)/2;return[-i,i]}return[0,0]},origDataRange(){return this.originalLUTRanges[this.colorByName]??[]},arraySelectValue(){return this.arrays.find((e=>Array.isArray(e.value)?e.value[0]===this.colorByName&&e.value[1]===this.colorByLocation:e.value===this.colorBy))}},watch:{interpolateScalarsBeforeMapping(e){this.updateRepProperty("interpolateScalarsBeforeMapping",e)},colorBy(){if("geometry"===this.available){const e=this.$proxyManager.getRepresentations().filter((e=>e.getInput()===this.source));if(e.forEach((e=>e.setColorBy(this.colorByName,this.colorByLocation))),this.colorByName){const e=this.$proxyManager.getLookupTable(this.colorByName);this.setDataRange(e.getDataRange())}this.interpolateScalarsBeforeMapping=e.reduce(((e,t)=>e||t.getInterpolateScalarsBeforeMapping()),!1),this.$proxyManager.renderAllViews(),this.setPreset()}this.colorByName&&this.updateLookupTableImage()},solidColor(e){const t=n.ZP.hex2float(e);this.updateRepProperty("color",...t)},presetName(){this.renderPreset()},shift(){this.renderPreset()},hasPresetOpacity(e){const t=this.colorByName,a=this.$proxyManager.getPiecewiseFunction(t);e?a.setMode(m.Points):a.setMode(m.Gaussians)},dataRange(){this.applyColorMap()}},proxyManagerHooks:{onProxyRegistrationChange({proxyGroup:e}){"Representations"===e&&this.update()}},mounted(){document.addEventListener("keyup",this.onEsc),this.$nextTick(this.update)},beforeDestroy(){document.removeEventListener("keyup",this.onEsc)},methods:{updateRepProperty(e,...t){const a=`set${s.ZP.capitalize(e)}`,i=this.$proxyManager.getRepresentations().filter((e=>e.getInput()===this.source));for(let e=0;e<i.length;e++)i[e][a]&&i[e][a](...t);this.$proxyManager.renderAllViews()},onChangePreset(e){e&&(this.presetName=e.Name,this.hasPresetOpacity&&(this.shift=0)),this.presetMenu=!1},onEsc(e){27===e.keyCode&&(this.presetMenu=!1)},renderPreset(){this.applyColorMap(),this.applyOpacity(),this.updateLookupTableImage(),this.$proxyManager.renderAllViews()},applyOpacity(){const e=this.colorByName,t=this.$proxyManager.getPiecewiseFunction(e),a=o.Z.getPresetByName(this.presetName);if(this.hasPresetOpacity&&a&&a.OpacityPoints){const e=[];for(let t=0;t<a.OpacityPoints.length;t+=2)e.push([a.OpacityPoints[t],a.OpacityPoints[t+1]]);let[i,s]=this.shiftRange;const n=s-i,o=e.map((([e,t])=>[(e-i)/n,t]));t.setPoints(o),i+=this.shift,s+=this.shift,t.setDataRange(i,s)}else t.setDataRange(...this.dataRange)},applyColorMap(){const e=this.colorByName,t=this.$proxyManager.getLookupTable(e);if(t.setPresetName(this.presetName),this.hasPresetOpacity){let[e,a]=this.shiftRange;e+=this.shift,a+=this.shift,t.setDataRange(e,a)}else t.setDataRange(...this.dataRange)},updateLookupTableImage(){const e=this.colorByName,t=this.$proxyManager.getLookupTable(e);this.lutImage=function(e,t,a,i){g.setAttribute("width",i);const s=g.getContext("2d"),n=e.getUint8Table(t,a,i,!0),o=s.getImageData(0,0,i,1);return o.data.set(n),s.putImageData(o,0,0),g.toDataURL("image/jpg")}(t.getLookupTable(),...t.getDataRange(),256),this.piecewiseFunction=this.$proxyManager.getPiecewiseFunction(e)},setPreset(){if(this.colorByName){const e=this.$proxyManager.getLookupTable(this.colorByName);if(this.presetName=e.getPresetName(),this.hasPresetOpacity){const e=this.$proxyManager.getPiecewiseFunction(this.colorByName).getDataRange();this.shift=e[0]-this.shiftRange[0]}}},update(){const e=this.$proxyManager.getRepresentations().filter((e=>e.getInput()===this.source));if(e.length){const t=e.find((e=>"Geometry"===e.getProxyName())),a=e.find((e=>"Volume"===e.getProxyName())),i=e.find((e=>"SliceX"===e.getProxyName()));if(t)this.available="geometry";else{if(!a)return void(this.available="");this.available="volume"}const s=t||a,o=s.getReferenceByName("ui").find((e=>"colorBy"===e.name));o&&(this.arrays=function(e,t=!1){const a=[];t&&a.push(v);for(let t=0;t<e.length;t++){const i=e[t];a.push({text:i.name,value:[i.name,i.location]})}return a}(o.domain.arrays,"geometry"===this.available));const r=s.getColorBy(),l=s.getInputDataSet(),c=l.getPointData().getScalars(),d=l.getCellData().getScalars();r.length?this.colorBy=r.slice(0,2):this.colorBy=c?[c.getName(),"pointData"]:d?[d.getName(),"cellData"]:"solid","geometry"===this.available&&(this.solidColor=n.ZP.floatRGB2HexCode(t.getColor())),i&&(this.colorToSlices=i.getUseColorByForColor(),this.opacityToSlices=i.getUseColorByForOpacity(),this.applyFuncsToSlices({color:this.colorToSlices,opacity:this.opacityToSlices}))}if(this.setPreset(),this.colorByName){const e=this.$proxyManager.getLookupTable(this.colorByName);this.saveOriginalRange({arrayName:this.colorByName,dataRange:e.getDataRange()}),this.setDataRange(e.getDataRange())}},setDataRangeIndex(e,t){const a=Number.parseFloat(t);if(!Number.isNaN(a)){const a=[...this.dataRange];a[e]=t,a[0]<a[1]&&this.setDataRange(a)}},resetDataRange(){this.setDataRange(this.origDataRange),this.$proxyManager.renderAllViews()},applyColorToSlices(e){this.applyFuncsToSlices({color:!!e})},applyOpacityToSlices(e){this.applyFuncsToSlices({opacity:!!e})},applyFuncsToSlices({color:e,opacity:t}){this.colorToSlices=e??this.colorToSlices,this.opacityToSlices=t??this.opacityToSlices;const a=this.$proxyManager.getRepresentations().filter((e=>e.getInput()===this.source)).find((e=>e.isA("vtkCustomSliceRepresentationProxy")));a&&(a.setUseColorByForColor(this.colorToSlices),a.setUseColorByForOpacity(this.opacityToSlices)),this.$proxyManager.renderAllViews()},setDataRange(e){this.dataRange=[Number(e[0])||0,Number(e[1])||0]},setColorBy(e){this.colorBy=e},saveOriginalRange({arrayName:e,dataRange:t}){this.$set(this.originalLUTRanges,e,t)}}},y=a(37),f=a(571),b=a(3),x=a.n(b),w=a(572),_=a(591),S=a(603),P=a(627),C=a(598),k=a(600),V=a(601),I=a(628),T=a(630),$=a(642),D=a(643),M=a(624),Z=a(644);e=a.hmd(e);var L={},R=!1;e.hot,e.hot;var O=(0,f.Z)(h,i,[],!1,(function(e){R||(L.$style=y.Z.locals||y.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return L.$style}}))}),null,null);x()(O,{VBtn:w.Z,VCard:_.Z,VCheckbox:S.Z,VContainer:P.Z,VFlex:C.Z,VIcon:k.Z,VLayout:V.Z,VMenu:I.Z,VSelect:T.Z,VSlider:$.Z,VSpacer:D.Z,VTextField:M.Z,VTooltip:Z.Z}),O.options.__file="src/components/controls/ColorBy/index.vue";var B=O.exports},146:function(e,t,a){"use strict";a.d(t,{Z:function(){return f}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.hasFieldData()?a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-card-text",{class:e.$style.blockContent},[a("v-select",{class:e.$style.noSelect,staticStyle:{"margin-bottom":"10px"},attrs:{label:e.name||e.type,items:this.getFieldData().getArrays().map((function(e){return e.getName()})),dense:"",flat:"","hide-details":""},model:{value:e.activeFieldName,callback:function(t){e.activeFieldName=t},expression:"activeFieldName"}}),e._v(" "),a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-xs":""}},[e.activeFieldName?a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs6:""}},[e._v("Type:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs6:""}},[e._v("\n          "+e._s(e.getActiveArray().getDataType())+"\n        ")])],1):e._e(),e._v(" "),e.activeFieldName?a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs6:""}},[e._v("Min value:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs6:""}},[e._v("\n            "+e._s(e.getActiveArray().getRange()[0].toFixed(3))+"\n          ")])],1):e._e(),e._v(" "),e.activeFieldName?a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs6:""}},[e._v("Max value:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs6:""}},[e._v("\n            "+e._s(e.getActiveArray().getRange()[1].toFixed(3))+"\n          ")])],1):e._e(),e._v(" "),e.activeFieldName?a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs6:""}},[e._v("# of components:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs6:""}},[e._v("\n            "+e._s(e.getActiveArray().getNumberOfComponents())+"\n          ")])],1):e._e()],1)],1)],1):e._e()};i._withStripped=!0;var s={name:"FieldDataInformation",props:{dataset:{required:!0},name:{type:String},type:{type:String,required:!0}},data:()=>({activeFieldName:null}),mounted(){if(this.hasFieldData()){const e=this.getFieldData().getArrays();this.activeFieldName=e[0].getName()}},methods:{hasFieldData(){return this.dataset[`get${this.type}`]&&this.getFieldData().getArrays().length>0},getFieldData(){return this.dataset[`get${this.type}`]()},getActiveArray(){return this.getFieldData().getArray(this.activeFieldName)}}},n=a(37),o=a(571),r=a(3),l=a.n(r),c=a(591),d=a(597),u=a(627),p=a(598),m=a(601),v=a(630);e=a.hmd(e);var g={},h=!1;e.hot,e.hot;var y=(0,o.Z)(s,i,[],!1,(function(e){h||(g.$style=n.Z.locals||n.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return g.$style}}))}),null,null);l()(y,{VCard:c.Z,VCardText:d.ZB,VContainer:u.Z,VFlex:p.Z,VLayout:m.Z,VSelect:v.Z}),y.options.__file="src/components/controls/Information/FieldData/index.vue";var f=y.exports},147:function(e,t,a){"use strict";a.d(t,{Z:function(){return y}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.dataset.isA("vtkImageData")?a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-card-title",{class:e.$style.blockTitle},[a("span",{staticClass:"body-2 font-weight-medium"},[e._v("vtkImageData")])]),e._v(" "),a("v-card-text",{class:e.$style.blockContent},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-xs":""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs5:""}},[e._v("Dimensions:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs7:""}},[e._v("\n          ("+e._s(e.showVect(e.dataset.getDimensions(),", "))+")\n        ")])],1),e._v(" "),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs5:""}},[e._v("Origin:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs7:""}},[e._v("\n          ("+e._s(e.showVect(e.dataset.getOrigin()))+")\n        ")])],1),e._v(" "),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs5:""}},[e._v("Spacing:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs7:""}},[e._v("\n          ("+e._s(e.showVect(e.dataset.getSpacing()))+")\n        ")])],1),e._v(" "),a("v-layout",{attrs:{row:"","align-top":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs5:""}},[e._v("Orientation:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs7:""}},[a("matrix-view",{class:e.$style.matrix,attrs:{matrix:e.dataset.getDirection(),rows:3,columns:3}})],1)],1)],1)],1)],1):e._e()};i._withStripped=!0;var s={name:"ImageDataInformation",props:["dataset"],components:{MatrixView:a(148).Z},methods:{showVect:(e,t=", ")=>e.map((e=>e.toFixed(2))).join(t)}},n=a(37),o=a(571),r=a(3),l=a.n(r),c=a(591),d=a(597),u=a(627),p=a(598),m=a(601);e=a.hmd(e);var v={},g=!1;e.hot,e.hot;var h=(0,o.Z)(s,i,[],!1,(function(e){g||(v.$style=n.Z.locals||n.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return v.$style}}))}),null,null);l()(h,{VCard:c.Z,VCardText:d.ZB,VCardTitle:d.EB,VContainer:u.Z,VFlex:p.Z,VLayout:m.Z}),h.options.__file="src/components/controls/Information/ImageData/index.vue";var y=h.exports},148:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"pa-1"},e._l(e.rows,(function(t){return a("v-layout",{key:t,attrs:{row:"","align-center":""}},e._l(e.columns,(function(i){return a("v-flex",{key:t*e.rows+i},[a("span",{class:e.$style.canSelect},[e._v("\n        "+e._s(e.matrix[(t-1)*e.rows+(i-1)].toFixed(2))+"\n      ")])])})),1)})),1)};i._withStripped=!0;var s={name:"MatrixViewInformation",props:{rows:{type:Number,required:!0},columns:{type:Number,required:!0},matrix:{required:!0}}},n=a(78),o=a(571),r=a(3),l=a.n(r),c=a(627),d=a(598),u=a(601);e=a.hmd(e);var p={},m=!1;e.hot,e.hot;var v=(0,o.Z)(s,i,[],!1,(function(e){m||(p.$style=n.Z.locals||n.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return p.$style}}))}),null,null);l()(v,{VContainer:c.Z,VFlex:d.Z,VLayout:u.Z}),v.options.__file="src/components/controls/Information/MatrixView/index.vue";var g=v.exports},149:function(e,t,a){"use strict";a.d(t,{Z:function(){return v}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.dataset.isA("vtkMolecule")?a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-card-title",{class:e.$style.blockTitle},[a("span",{staticClass:"body-2 font-weight-medium"},[e._v("vtkMolecule")])]),e._v(" "),a("v-card-text",{class:e.$style.blockContent})],1):e._e()};i._withStripped=!0;var s={name:"MoleculeInformation",props:["dataset"]},n=a(78),o=a(571),r=a(3),l=a.n(r),c=a(591),d=a(597);e=a.hmd(e);var u={},p=!1;e.hot,e.hot;var m=(0,o.Z)(s,i,[],!1,(function(e){p||(u.$style=n.Z.locals||n.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return u.$style}}))}),null,null);l()(m,{VCard:c.Z,VCardText:d.ZB,VCardTitle:d.EB}),m.options.__file="src/components/controls/Information/Molecule/index.vue";var v=m.exports},150:function(e,t,a){"use strict";a.d(t,{Z:function(){return b}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.dataset.isA("vtkPolyData")?a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-card-title",{class:e.$style.blockTitle},[a("span",{staticClass:"body-2 font-weight-medium"},[e._v("vtkPolyData")])]),e._v(" "),a("v-card-text",{class:e.$style.blockContent},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-xs":""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs6:""}},[e._v("# of points:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs6:""}},[e._v(e._s(e.formatNumbersWithThousandSeparator(e.dataset.getPoints().getNumberOfPoints(),",")))])],1),e._v(" "),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs6:""}},[e._v("# of cells:")]),e._v(" "),a("v-flex",{staticClass:"body-2",class:e.$style.canSelect,attrs:{xs6:""}},[e._v(e._s(e.formatNumbersWithThousandSeparator(e.dataset.getNumberOfCells(),",")))])],1)],1)],1)],1):e._e()};i._withStripped=!0;var s=a(8);const{formatNumbersWithThousandSeparator:n}=s.ZP;var o={name:"PolyDataInformation",props:["dataset"],methods:{formatNumbersWithThousandSeparator:n}},r=a(37),l=a(571),c=a(3),d=a.n(c),u=a(591),p=a(597),m=a(627),v=a(598),g=a(601);e=a.hmd(e);var h={},y=!1;e.hot,e.hot;var f=(0,l.Z)(o,i,[],!1,(function(e){y||(h.$style=r.Z.locals||r.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return h.$style}}))}),null,null);d()(f,{VCard:u.Z,VCardText:p.ZB,VCardTitle:p.EB,VContainer:m.Z,VFlex:v.Z,VLayout:g.Z}),f.options.__file="src/components/controls/Information/PolyData/index.vue";var b=f.exports},145:function(e,t,a){"use strict";a.d(t,{Z:function(){return v}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.available?a("div",[a("vtk-image-data",{attrs:{dataset:e.source.getDataset()}}),e._v(" "),a("vtk-molecule",{attrs:{dataset:e.source.getDataset()}}),e._v(" "),a("vtk-poly-data",{attrs:{dataset:e.source.getDataset()}}),e._v(" "),a("vtk-field-data",{attrs:{dataset:e.source.getDataset(),name:"Point Data",type:"PointData"}}),e._v(" "),a("vtk-field-data",{attrs:{dataset:e.source.getDataset(),name:"Cell Data",type:"CellData"}})],1):e._e()};i._withStripped=!0;var s=a(146),n=a(147),o=a(149),r=a(150),l={name:"Information",props:["sourceId"],components:{VtkFieldData:s.Z,VtkImageData:n.Z,VtkMolecule:o.Z,VtkPolyData:r.Z},computed:{source(){return this.$proxyManager.getProxyById(this.sourceId)},available(){if(this.source){const e=this.source.getDataset();if(e&&e.isA)return e.isA("vtkPolyData")||e.isA("vtkImageData")}return!1}}},c=a(78),d=a(571);e=a.hmd(e);var u={},p=!1;e.hot,e.hot;var m=(0,d.Z)(l,i,[],!1,(function(e){p||(u.$style=c.Z.locals||c.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return u.$style}}))}),null,null);m.options.__file="src/components/controls/Information/index.vue";var v=m.exports},151:function(e,t,a){"use strict";a.d(t,{Z:function(){return b}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.domains.atomicRadiusScaleFactor?a("div",[a("v-card",{class:e.$style.block,attrs:{light:"",flat:""}},[a("v-card-text",{class:e.$style.blockContent},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-xs":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Tolerance")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.domains.tolerance.min,max:e.domains.tolerance.max,step:e.domains.tolerance.step},model:{value:e.tolerance,callback:function(t){e.tolerance=t},expression:"tolerance"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.domains.tolerance.min,max:e.domains.tolerance.max,step:e.domains.tolerance.step},model:{value:e.tolerance,callback:function(t){e.tolerance=t},expression:"tolerance"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Atomic")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.domains.atomicRadiusScaleFactor.min,max:e.domains.atomicRadiusScaleFactor.max,step:e.domains.atomicRadiusScaleFactor.step},model:{value:e.atomicRadiusScaleFactor,callback:function(t){e.atomicRadiusScaleFactor=t},expression:"atomicRadiusScaleFactor"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.domains.atomicRadiusScaleFactor.min,max:e.domains.atomicRadiusScaleFactor.max,step:e.domains.atomicRadiusScaleFactor.step},model:{value:e.atomicRadiusScaleFactor,callback:function(t){e.atomicRadiusScaleFactor=t},expression:"atomicRadiusScaleFactor"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Bond")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.domains.bondRadius.min,max:e.atomicRadiusScaleFactor,step:e.domains.bondRadius.step},model:{value:e.bondRadius,callback:function(t){e.bondRadius=t},expression:"bondRadius"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.domains.bondRadius.min,max:e.atomicRadiusScaleFactor,step:e.domains.bondRadius.step},model:{value:e.bondRadius,callback:function(t){e.bondRadius=t},expression:"bondRadius"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Hide Elements")])]),e._v(" "),a("v-flex",{attrs:{xs9:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":""},model:{value:e.hideElements,callback:function(t){e.hideElements=t},expression:"hideElements"}})],1)],1)],1)],1)],1)],1):e._e()};i._withStripped=!0;var s=a(132).Z.generateComponent("Molecule",[{name:"tolerance",initialValue:1},{name:"atomicRadiusScaleFactor",initialValue:1},{name:"bondRadius",initialValue:1},{name:"hideElements",initialValue:""}],!1,{onChange:{bondRadius:"updateData",atomicRadiusScaleFactor:"updateData"}}),n=a(37),o=a(571),r=a(3),l=a.n(r),c=a(591),d=a(597),u=a(627),p=a(598),m=a(601),v=a(642),g=a(624);e=a.hmd(e);var h={},y=!1;e.hot,e.hot;var f=(0,o.Z)(s,i,[],!1,(function(e){y||(h.$style=n.Z.locals||n.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return h.$style}}))}),null,null);l()(f,{VCard:c.Z,VCardText:d.ZB,VContainer:u.Z,VFlex:p.Z,VLayout:m.Z,VSlider:v.Z,VTextField:g.Z}),f.options.__file="src/components/controls/Molecule/index.vue";var b=f.exports},152:function(e,t,a){"use strict";a.d(t,{Z:function(){return x}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.domains.representation||e.domains.opacity||e.domains.sampleDistance?a("div",[e.domains.representation?a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-xs":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{dense:"",flat:"",label:"Type",items:e.domains.representation.items},model:{value:e.representation,callback:function(t){e.representation=t},expression:"representation"}})],1)],1)],1)],1):e._e(),e._v(" "),e.domains.opacity&&e.domains.pointSize?a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-card-title",{class:e.$style.blockTitle,attrs:{flat:""}},[a("span",{staticClass:"body-2"},[e._v("Mesh")])]),e._v(" "),a("v-card-text",{class:e.$style.blockContent},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-xs":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Point Size")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.domains.pointSize.min,max:e.domains.pointSize.max,step:e.domains.pointSize.step},model:{value:e.pointSize,callback:function(t){e.pointSize=t},expression:"pointSize"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.domains.pointSize.min,max:e.domains.pointSize.max,step:e.domains.pointSize.step},model:{value:e.pointSize,callback:function(t){e.pointSize=t},expression:"pointSize"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Opacity")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.domains.opacity.min,max:e.domains.opacity.max,step:e.domains.opacity.step},model:{value:e.opacity,callback:function(t){e.opacity=t},expression:"opacity"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.domains.opacity.min,max:e.domains.opacity.max,step:e.domains.opacity.step,value:e.opacity},on:{input:function(t){e.opacity=Number(t)}}})],1)],1)],1)],1)],1):e._e(),e._v(" "),e.domains.sampleDistance&&e.domains.edgeGradient?a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-card-title",{class:e.$style.blockTitle,attrs:{flat:""}},[a("span",{staticClass:"body-2"},[e._v("Shadow & Edge")])]),e._v(" "),a("v-card-text",{class:e.$style.blockContent},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-xs":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Sample Distance")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.domains.sampleDistance.min,max:e.domains.sampleDistance.max,step:e.domains.sampleDistance.step},model:{value:e.sampleDistance,callback:function(t){e.sampleDistance=t},expression:"sampleDistance"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.domains.sampleDistance.min,max:e.domains.sampleDistance.max,step:e.domains.sampleDistance.step},model:{value:e.sampleDistance,callback:function(t){e.sampleDistance=t},expression:"sampleDistance"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Edge Gradient")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.domains.edgeGradient.min,max:e.domains.edgeGradient.max,step:e.domains.edgeGradient.step},model:{value:e.edgeGradient,callback:function(t){e.edgeGradient=t},expression:"edgeGradient"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.domains.edgeGradient.min,max:e.domains.edgeGradient.max,step:e.domains.edgeGradient.step},model:{value:e.edgeGradient,callback:function(t){e.edgeGradient=t},expression:"edgeGradient"}})],1)],1)],1)],1)],1):e._e()],1):e._e()};i._withStripped=!0;var s=a(132).Z.generateComponent("Representation",[{name:"pointSize",initialValue:1},{name:"opacity",initialValue:1},{name:"sampleDistance",initialValue:1},{name:"edgeGradient",initialValue:1},{name:"representation",initialValue:"Surface"}]),n=a(37),o=a(571),r=a(3),l=a.n(r),c=a(591),d=a(597),u=a(627),p=a(598),m=a(601),v=a(630),g=a(642),h=a(624);e=a.hmd(e);var y={},f=!1;e.hot,e.hot;var b=(0,o.Z)(s,i,[],!1,(function(e){f||(y.$style=n.Z.locals||n.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return y.$style}}))}),null,null);l()(b,{VCard:c.Z,VCardText:d.ZB,VCardTitle:d.EB,VContainer:u.Z,VFlex:p.Z,VLayout:m.Z,VSelect:v.Z,VSlider:g.Z,VTextField:h.Z}),b.options.__file="src/components/controls/Representation/index.vue";var x=b.exports},153:function(e,t,a){"use strict";a.d(t,{Z:function(){return C}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.domains.windowWidth&&e.domains.windowLevel?a("div",[a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-card-title",{class:e.$style.blockTitle},[a("span",{staticClass:"body-2"},[e._v("Window/Level")])]),e._v(" "),a("v-card-text",{class:e.$style.blockContent},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Window")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.domains.windowWidth.min,max:e.domains.windowWidth.max,step:e.domains.windowWidth.step},model:{value:e.windowWidth,callback:function(t){e.windowWidth=e._n(t)},expression:"windowWidth"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.domains.windowWidth.min,max:e.domains.windowWidth.max,step:e.domains.windowWidth.step},model:{value:e.windowWidth,callback:function(t){e.windowWidth=e._n(t)},expression:"windowWidth"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("label",{class:e.$style.smallLabel},[e._v("Level")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.domains.windowLevel.min,max:e.domains.windowLevel.max,step:e.domains.windowLevel.step},model:{value:e.windowLevel,callback:function(t){e.windowLevel=e._n(t)},expression:"windowLevel"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.domains.windowLevel.min,max:e.domains.windowLevel.max,step:e.domains.windowLevel.step},model:{value:e.windowLevel,callback:function(t){e.windowLevel=e._n(t)},expression:"windowLevel"}})],1)],1)],1)],1)],1),e._v(" "),a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-card-title",{class:e.$style.blockTitle,attrs:{flat:""}},[a("span",{staticClass:"body-2"},[e._v("Slices")])]),e._v(" "),a("v-card-text",{class:e.$style.blockContent},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{class:e.isSliceAvailable("x")||e.isSliceAvailable("default")&&e.xSliceVisibility?"":e.$style.disable,attrs:{xs2:""}},[a("v-btn",{staticClass:"flex-shrink-0",class:e.$style.button,attrs:{fab:"",small:"",outlined:!e.getToggleSliceX(),dark:e.getToggleSliceX(),color:"blue-grey"},on:{click:function(t){return t.stopPropagation(),e.setToggleSliceX()}}},[a("label",{class:e.$style.smallLabel},[e._v("X")])])],1),e._v(" "),a("v-flex",{class:e.isSliceAvailable("x")||e.isSliceAvailable("default")&&e.xSliceVisibility?"":e.$style.disable,attrs:{xs7:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.xSliceDomain.min,max:e.xSliceDomain.max,step:e.xSliceDomain.step},model:{value:e.xSlice,callback:function(t){e.xSlice=e._n(t)},expression:"xSlice"}})],1),e._v(" "),a("v-flex",{class:e.isSliceAvailable("x")||e.isSliceAvailable("default")&&e.xSliceVisibility?"":e.$style.disable,attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.xSliceDomain.min,max:e.xSliceDomain.max,step:e.xSliceDomain.step},model:{value:e.xSlice,callback:function(t){e.xSlice=e._n(t)},expression:"xSlice"}})],1),e._v(" "),a("v-flex",{class:e.isSliceAvailable("y")||e.isSliceAvailable("default")&&e.ySliceVisibility?"":e.$style.disable,attrs:{xs2:""}},[a("div",{staticStyle:{position:"relative"}},[a("v-btn",{class:e.$style.button,attrs:{fab:"",small:"",outlined:!e.getToggleSliceY(),dark:e.getToggleSliceY(),color:"blue-grey"},on:{click:function(t){return t.stopPropagation(),e.setToggleSliceY()}}},[a("label",{class:e.$style.smallLabel},[e._v("Y")])])],1)]),e._v(" "),a("v-flex",{class:e.isSliceAvailable("y")||e.isSliceAvailable("default")&&e.ySliceVisibility?"":e.$style.disable,attrs:{xs7:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.ySliceDomain.min,max:e.ySliceDomain.max,step:e.ySliceDomain.step},model:{value:e.ySlice,callback:function(t){e.ySlice=e._n(t)},expression:"ySlice"}})],1),e._v(" "),a("v-flex",{class:e.isSliceAvailable("y")||e.isSliceAvailable("default")&&e.ySliceVisibility?"":e.$style.disable,attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.ySliceDomain.min,max:e.ySliceDomain.max,step:e.ySliceDomain.step},model:{value:e.ySlice,callback:function(t){e.ySlice=e._n(t)},expression:"ySlice"}})],1),e._v(" "),a("v-flex",{class:e.isSliceAvailable("z")||e.isSliceAvailable("default")&&e.zSliceVisibility?"":e.$style.disable,attrs:{xs2:""}},[a("div",{staticStyle:{position:"relative"}},[a("v-btn",{class:e.$style.button,attrs:{fab:"",small:"",outlined:!e.getToggleSliceZ(),dark:e.getToggleSliceZ(),color:"blue-grey"},on:{click:function(t){return t.stopPropagation(),e.setToggleSliceZ()}}},[a("label",{class:e.$style.smallLabel},[e._v("Z")])])],1)]),e._v(" "),a("v-flex",{class:e.isSliceAvailable("z")||e.isSliceAvailable("default")&&e.zSliceVisibility?"":e.$style.disable,attrs:{xs7:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:e.zSliceDomain.min,max:e.zSliceDomain.max,step:e.zSliceDomain.step},model:{value:e.zSlice,callback:function(t){e.zSlice=e._n(t)},expression:"zSlice"}})],1),e._v(" "),a("v-flex",{class:e.isSliceAvailable("z")||e.isSliceAvailable("default")&&e.zSliceVisibility?"":e.$style.disable,attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:e.zSliceDomain.min,max:e.zSliceDomain.max,step:e.zSliceDomain.step},model:{value:e.zSlice,callback:function(t){e.zSlice=e._n(t)},expression:"zSlice"}})],1)],1)],1)],1)],1),e._v(" "),a("v-card",{class:e.$style.block,attrs:{flat:""}},[a("v-card-title",{class:e.$style.blockTitle},[a("span",{staticClass:"body-2"},[e._v("Opacity")])]),e._v(" "),a("v-card-text",{class:e.$style.blockContent},[a("v-container",{staticClass:"pa-0",attrs:{fluid:"","grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{xs9:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"","always-dirty":"",min:"0",max:"1",step:"0.01"},model:{value:e.opacity,callback:function(t){e.opacity=e._n(t)},expression:"opacity"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:"0",max:"1",step:"0.01"},model:{value:e.opacity,callback:function(t){e.opacity=e._n(t)},expression:"opacity"}})],1)],1)],1)],1)],1)],1):e._e()};i._withStripped=!0;var s=a(132);function n(e){const t=`set${e}`,a=`get${e}`;function i(){let e=null;return s.Z.findProxiesWithMethod(this,a).forEach((t=>{e=t[a]()})),e}return{get:i,set:function(){const e=!i.apply(this);s.Z.findProxiesWithMethod(this,t).forEach((a=>{a[t](e)})),this.$forceUpdate()}}}function o(e){return{set(){},get(){const t={...this.domains[e]};return t&&"min"in t&&"max"in t&&(t.min=Math.floor(t.min),t.max=Math.floor(t.max)),t}}}const r=[{name:"visibility",initialValue:!1},{name:"windowLevel",initialValue:1024},{name:"windowWidth",initialValue:2048},{name:"xSlice",initialValue:-1},{name:"ySlice",initialValue:-1},{name:"zSlice",initialValue:-1},{name:"xSliceVisibility",initialValue:!1},{name:"ySliceVisibility",initialValue:!1},{name:"zSliceVisibility",initialValue:!1},{name:"opacity",initialValue:1},{name:"xSliceDomain",computed:o("xSlice")},{name:"ySliceDomain",computed:o("ySlice")},{name:"zSliceDomain",computed:o("zSlice")},{name:"toggleSliceX",computed:n("XSliceVisibility")},{name:"toggleSliceY",computed:n("YSliceVisibility")},{name:"toggleSliceZ",computed:n("ZSliceVisibility")}];const l=s.Z.generateComponent("SliceControl",r,!0,{});Object.assign(l.methods,{isSliceAvailable:function(e){return!!this.$proxyManager.getViews().filter((e=>e.getContainer())).filter((t=>t.getName()===e)).length}});var c=l,d=a(37),u=a(571),p=a(3),m=a.n(p),v=a(572),g=a(591),h=a(597),y=a(627),f=a(598),b=a(601),x=a(642),w=a(624);e=a.hmd(e);var _={},S=!1;e.hot,e.hot;var P=(0,u.Z)(c,i,[],!1,(function(e){S||(_.$style=d.Z.locals||d.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return _.$style}}))}),null,null);m()(P,{VBtn:v.Z,VCard:g.Z,VCardText:h.ZB,VCardTitle:h.EB,VContainer:y.Z,VFlex:f.Z,VLayout:b.Z,VSlider:x.Z,VTextField:w.Z}),P.options.__file="src/components/controls/SliceControl/index.vue";var C=P.exports},131:function(e,t,a){"use strict";a.d(t,{Z:function(){return f}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("div",{class:e.$style.close},[a("v-btn",{attrs:{text:"",icon:""},on:{click:function(t){return e.$emit("close")}}},[a("v-icon",[e._v("mdi-close")])],1)],1),e._v(" "),a("v-card-title",{staticClass:"text-center"},[a("svg-icon",{class:e.$style.glanceIcon,attrs:{icon:"VizualSimuLab-logo"}})],1),e._v(" "),a("v-card-text",[a("p",{staticClass:"body-1"},[a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://mfermindev.github.io/"}},[e._v("VizalSimuLab")]),e._v("\n      is an extended web application of\n      "),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://kitware.github.io/glance/"}},[e._v("Glance")]),e._v("\n      for visualizing volumetric images, molecular structures, geometric\n      objects, and point clouds. It is part of the\n      "),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://www.paraview.org"}},[e._v("ParaView")]),e._v("\n      platform and can serve as a foundation for building custom web-based\n      visualization applications involving\n      "),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"http://insightsoftwareconsortium.github.io/itk-js/"}},[e._v("ITK.js")]),e._v("\n      and\n      "),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://kitware.github.io/vtk-js/"}},[e._v("VTK.js")]),e._v(".\n    ")]),e._v(" "),a("ul",{staticClass:"ml-5"},[a("li",{staticClass:"body-1"},[a("span",[e._v("Current version: testing")])])]),e._v(" "),a("v-layout",{staticClass:"text-center",attrs:{row:"",wrap:"","align-end":""}},[a("v-flex",{attrs:{xs4:""}},[a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://www.kitware.com"}},[a("svg-icon",{class:e.$style.aboutIcon,attrs:{icon:"kitware"}})],1)]),e._v(" "),a("v-flex",{attrs:{xs4:""}},[a("div",[e._v("")]),e._v(" "),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://kitware.github.io/vtk-js/"}},[a("svg-icon",{class:e.$style.aboutIcon,attrs:{icon:"vtkjs"}})],1)]),e._v(" "),a("v-flex",{attrs:{xs4:""}},[a("div",[e._v("")]),e._v(" "),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"http://insightsoftwareconsortium.github.io/itk-wasm/"}},[a("svg-icon",{class:e.$style.aboutIcon,attrs:{icon:"itkjs"}})],1)])],1),e._v(" "),a("div",{staticClass:"pt-4 d-block text-center grey--text text--darken-2"},[e._v("\n       "+e._s((new Date).getFullYear())+"  mecom.\n    ")])],1)],1)};i._withStripped=!0;var s={name:"AboutBox",components:{SvgIcon:a(75).Z},data:()=>({version:"not available"}),created(){window.VSL_VERSION&&("main"===window.VSL_VERSION?this.version="nightly-master (main)":this.version=window.VSL_VERSION)}},n={close:"AboutBox-close-_khm3",aboutIcon:"AboutBox-aboutIcon-npj_s",glanceIcon:"AboutBox-glanceIcon-x8OkE"},o=a(571),r=a(3),l=a.n(r),c=a(572),d=a(591),u=a(597),p=a(598),m=a(600),v=a(601);e=a.hmd(e);var g={},h=!1;e.hot,e.hot;var y=(0,o.Z)(s,i,[],!1,(function(e){h||(g.$style=n.locals||n,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return g.$style}}))}),null,null);l()(y,{VBtn:c.Z,VCard:d.Z,VCardText:u.ZB,VCardTitle:u.EB,VFlex:p.Z,VIcon:m.Z,VLayout:v.Z}),y.options.__file="src/components/core/AboutBox/index.vue";var f=y.exports},138:function(e,t,a){"use strict";a.d(t,{Z:function(){return te}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("drag-and-drop",{attrs:{enabled:!e.landingVisible&&!e.fileUploadDialog},on:{drop:e.openFileList},scopedSlots:e._u([{key:"default",fn:function(t){var i,s=t.dragHover;return[a("v-app",[a("v-navigation-drawer",{attrs:{clipped:e.$vuetify.breakpoint.mdAndUp,"mobile-breakpoint":e.$vuetify.breakpoint.thresholds.sm,app:"",fixed:"","disable-resize-watcher":"",touchless:"",width:"300"},model:{value:e.controlsDrawer,callback:function(t){e.controlsDrawer=t},expression:"controlsDrawer"}},[a("controls-drawer")],1),e._v(" "),a("v-app-bar",{attrs:{app:"","clipped-left":""}},[a("v-app-bar-nav-icon",{attrs:{disabled:e.landingVisible},nativeOn:{click:function(t){t.stopPropagation(),e.controlsDrawer=!e.controlsDrawer}}}),e._v(" "),a("v-tooltip",{attrs:{bottom:"",disabled:e.smallScreen},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("a",e._g({attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.toggleLanding.apply(null,arguments)}}},i),[a("svg-icon",{staticStyle:{"margin-top":"6px"},attrs:{icon:"glance-logo"+(e.smallScreen?"-mark":""),height:"36px"}})],1)]}}],null,!0)},[e._v(" "),e.landingVisible?a("span",{key:"if-landingVisible"},[e._v("Go to app")]):a("span",{key:"if-landingVisible"},[e._v("Back to landing page")])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-toolbar-items",[e.errors.length?a("v-btn",{key:"if-has-errors",attrs:{text:"",color:"error"},on:{click:function(t){e.errorDialog=!0}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-alert-circle")]),e._v(" "),a("span",[e._v(e._s(e.errors.length))]),e._v("\n            \n            "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.smallScreen,expression:"!smallScreen"}]},[e._v("error(s)")])],1):e._e()],1),e._v(" "),a("collapsible-toolbar",{attrs:{collapse:e.$vuetify.breakpoint.xsOnly,dense:e.smallScreen},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.state;return[a("collapsible-toolbar-item",{attrs:{state:i},on:{click:e.showFileUpload}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-folder")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"dense"!==i,expression:"state !== 'dense'"}]},[e._v("Open")])],1),e._v(" "),a("collapsible-toolbar-item",{directives:[{name:"show",rawName:"v-show",value:!e.landingVisible,expression:"!landingVisible"}],attrs:{state:i},on:{click:function(t){return e.saveState()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cloud-download")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"dense"!==i,expression:"state !== 'dense'"}]},[e._v("Save state")])],1),e._v(" "),a("collapsible-toolbar-item",{directives:[{name:"show",rawName:"v-show",value:!e.landingVisible,expression:"!landingVisible"}],attrs:{state:i},on:{click:function(t){e.screenshotsDrawer=!0}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-image-multiple")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"dense"!==i,expression:"state !== 'dense'"}]},[e._v("\n                Screenshots ("+e._s(e.screenshotCount)+")\n              ")])],1),e._v(" "),a("collapsible-toolbar-item",{attrs:{state:i},on:{click:function(t){e.aboutDialog=!0}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-information")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"dense"!==i,expression:"state !== 'dense'"}]},[e._v("About")])],1)]}}],null,!0)})],1),e._v(" "),a("v-content",{style:{position:e.landingVisible?"initial":"fixed"},attrs:{id:e.$style.appContent}},[e.landingVisible?a("landing",{key:"if-landing",on:{open:e.showFileUpload,"open-urls":e.autoLoadRemotes,"open-files":e.openFileList}}):a("layout-view",{key:"if-landing"})],1),e._v(" "),a("v-navigation-drawer",{attrs:{stateless:e.screenshotsDrawerStateless,app:"",right:"",temporary:"",touchless:"",width:"300"},model:{value:e.screenshotsDrawer,callback:function(t){e.screenshotsDrawer=t},expression:"screenshotsDrawer"}},[a("screenshots",{on:{"screenshot-count":function(t){e.screenshotCount=t},close:function(t){e.screenshotsDrawer=!1}}})],1),e._v(" "),a("file-loader",{on:{load:e.doneLoadingFiles},model:{value:e.fileUploadDialog,callback:function(t){e.fileUploadDialog=t},expression:"fileUploadDialog"}}),e._v(" "),a("v-dialog",{attrs:{persistent:"",width:"60%"},model:{value:e.autoloadDialog,callback:function(t){e.autoloadDialog=t},expression:"autoloadDialog"}},[a("v-card",{staticClass:"pa-4"},[a("v-card-title",{staticClass:"justify-center text-center title black--text pv-break-word"},[e._v("\n            Loading "+e._s(e.autoloadLabel)+"\n            "),1===e.fileLoadingProgress?a("span",[e._v("\n              (reading...)\n            ")]):e.fileLoadingProgress!==1/0?a("span",[e._v("\n              ("+e._s(Math.round(100*e.fileLoadingProgress))+"%)\n            ")]):e._e()]),e._v(" "),a("v-card-text",[a("v-progress-linear",{attrs:{indeterminate:e.fileLoadingProgress===1/0,value:100*e.fileLoadingProgress}})],1)],1)],1),e._v(" "),a("state-file-generator"),e._v(" "),a("div",{class:(i={},i[e.$style.overlay]=!0,i[e.$style.overlayVisible]=s,i)},[a("div",{class:e.$style.overlayText},[a("div",{staticClass:"display-3"},[e._v("Drop files here")]),e._v(" "),a("v-icon",{attrs:{size:"4.75rem"}},[e._v("mdi-publish")])],1)]),e._v(" "),a("browser-issues"),e._v(" "),a(e.dialogType,{tag:"component",attrs:{"max-width":"50%"},model:{value:e.aboutDialog,callback:function(t){e.aboutDialog=t},expression:"aboutDialog"}},[a("about-box",{on:{close:function(t){e.aboutDialog=!1}}})],1),e._v(" "),a(e.dialogType,{tag:"component",attrs:{"max-width":"50%"},model:{value:e.errorDialog,callback:function(t){e.errorDialog=t},expression:"errorDialog"}},[a("error-box",{attrs:{errors:e.errors},on:{close:function(t){e.errorDialog=!1},clear:function(t){e.errors=[]}}})],1),e._v(" "),a("v-snackbar",{attrs:{value:!!e.globalSingleNotification,bottom:"",left:"",timeout:e.notifyPermanent?0:6e3},on:{input:function(t){e.globalSingleNotification=""},click:function(t){e.globalSingleNotification=""}}},[e._v("\n        "+e._s(e.globalSingleNotification)+"\n        "),a("v-btn",{attrs:{text:""}},[e._v("close")])],1),e._v(" "),a("div",{attrs:{id:"app-portal-mount"}})],1)]}}])})};i._withStripped=!0;var s=a(602),n=a(130),o=a.n(n),r=a(679),l=a(612),c=a(8),d=a(131),u=a(139),p=a(140),m=a(166),v=a(167),g=a(168),h=a(307),y=a(308),f=a(311),b=a(313),x=a(75),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.collapse?a("v-menu",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{icon:""}},i),[a("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!1,2097855828)},[e._v(" "),a("v-list",[e._t("default",null,{state:e.state})],2)],1):a("v-toolbar-items",[e._t("default",null,{state:e.state})],2)};w._withStripped=!0;var _={name:"CollapsibleToolbar",props:{collapse:{type:Boolean,default:!1},dense:{type:Boolean,default(){return this.$vuetify.breakpoint.smAndDown}}},computed:{state(){return this.collapse?"collapse":this.dense?"dense":"expand"}}},S=a(571),P=a(3),C=a.n(P),k=a(572),V=a(600),I=a(637),T=a(628),$=a(676),D=(0,S.Z)(_,w,[],!1,null,null,null);C()(D,{VBtn:k.Z,VIcon:V.Z,VList:I.Z,VMenu:T.Z,VToolbarItems:$.lj}),D.options.__file="src/components/widgets/CollapsibleToolbar/index.vue";var M=D.exports,Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"collapse"===e.state?a("v-list-item",e._g({attrs:{link:""}},e.$listeners),[e._t("default")],2):a("v-btn",e._g({attrs:{text:""}},e.$listeners),[e._t("default")],2)};Z._withStripped=!0;var L={name:"CollapsibleToolbarItem",props:{state:{type:String,default:"expand"}}},R=a(631),O=(0,S.Z)(L,Z,[],!1,null,null,null);C()(O,{VBtn:k.Z,VListItem:R.Z}),O.options.__file="src/components/widgets/CollapsibleToolbar/Item/index.vue";var B=O.exports,A=[{key:"ctrl+o",action:"files/promptForFiles"},{key:"ctrl+g",action:"takeScreenshot"},{key:"r",action:"resetActiveCamera"},{key:".",action:"increaseSlice"},{key:",",action:"decreaseSlice"},{key:"b",action:"previousViewPoint"},{key:"n",action:"nextViewPoint"}],F={name:"App",components:{AboutBox:d.Z,BrowserIssues:u.Z,CollapsibleToolbar:M,CollapsibleToolbarItem:B,ControlsDrawer:p.Z,DragAndDrop:m.Z,ErrorBox:v.Z,FileLoader:g.Z,Landing:h.Z,LayoutView:y.Z,Screenshots:f.Z,StateFileGenerator:b.Z,SvgIcon:x.Z,VBottomSheet:r.Z,VDialog:l.Z},provide(){return{$notify:this.notify}},data:()=>({aboutDialog:!1,errorDialog:!1,fileUploadDialog:!1,autoloadDialog:!1,autoloadLabel:"",internalControlsDrawer:!0,screenshotsDrawer:!1,screenshotCount:0,errors:[],globalSingleNotification:"",notifyPermanent:!1}),computed:{controlsDrawer:{get(){return!this.landingVisible&&this.internalControlsDrawer},set(e){this.landingVisible||(this.internalControlsDrawer=e)}},...(0,s.rn)({loadingState:"loadingState",landingVisible:e=>"landing"===e.route,screenshotsDrawerStateless(e){return this.screenshotsDrawer&&!!e.screenshotDialog},smallScreen(){return this.$vuetify.breakpoint.smAndDown},dialogType(){return this.smallScreen?"v-bottom-sheet":"v-dialog"}}),...(0,s.Se)("files",{anyFileLoadingErrors:"anyErrors",fileLoadingProgress:"totalProgress"})},proxyManagerHooks:{onProxyModified(){this.loadingState||this.$proxyManager.autoAnimateViews()}},created(){this.internalControlsDrawer=!this.smallScreen},mounted(){this.$root.$on("open_girder_panel",(()=>{this.fileUploadDialog=!0})),this.initViews(),this.initializeAnimations(),A.forEach((({key:e,action:t})=>o().bind(e,(e=>{e.preventDefault(),this.$store.dispatch(t)})))),window.addEventListener("error",this.recordError),c.ZP.setLoggerFunction("error",((...e)=>{this.recordError(e.join(" ")),window.console.error(...e)}))},beforeDestroy(){window.removeEventListener("error",this.recordError),A.forEach((({key:e})=>o().unbind(e)))},methods:{...(0,s.OI)({showApp:"showApp",showLanding:"showLanding",toggleLanding(){this.landingVisible?this.showApp():this.showLanding()}}),...(0,s.nv)({saveState:"saveState",initViews:"views/initViews"}),...(0,s.nv)("files",["openFiles","openRemoteFiles","load","resetQueue"]),...(0,s.nv)("animations",["initializeAnimations"]),showFileUpload(){this.fileUploadDialog=!0},openFileList(e){this.fileUploadDialog=!0,this.$nextTick((()=>this.openFiles(Array.from(e))))},autoLoadRemotes(e,t,a){const i=t.map(((e,t)=>({name:a[t],url:e})));this.autoloadDialog=!0,this.autoloadLabel=e,setTimeout((()=>this.openRemoteFiles(i).then((()=>this.load())).then((()=>{this.anyFileLoadingErrors?this.$nextTick((()=>{this.fileUploadDialog=!0})):this.doneLoadingFiles()})).finally((()=>{this.resetQueue(),this.autoloadDialog=!1}))),10)},doneLoadingFiles(){this.showApp()},recordError(e){this.errors.push(e)},notify(e,t=!1){this.globalSingleNotification&&(this.globalSingleNotification="",this.permanent=!1),this.$nextTick((()=>{this.globalSingleNotification=e,this.notifyPermanent=t}))}}},N={appContent:"App-appContent-GhXJH",overlay:"App-overlay-B_drw",overlayVisible:"App-overlayVisible-XKImt",overlayText:"App-overlayText-WTZRN",noTransition:"App-noTransition-IOu4K"},E=a(680),j=a(681),G=a(682),W=a(591),U=a(597),z=a(683),H=a(684),K=a(593),Y=a(657),q=a(643),X=a(644);e=a.hmd(e);var J={},Q=!1;e.hot,e.hot;var ee=(0,S.Z)(F,i,[],!1,(function(e){Q||(J.$style=N.locals||N,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return J.$style}}))}),null,null);C()(ee,{VApp:E.Z,VAppBar:j.Z,VAppBarNavIcon:G.Z,VBtn:k.Z,VCard:W.Z,VCardText:U.ZB,VCardTitle:U.EB,VContent:z.Z,VDialog:l.Z,VIcon:V.Z,VNavigationDrawer:H.Z,VProgressLinear:K.Z,VSnackbar:Y.Z,VSpacer:q.Z,VToolbarItems:$.lj,VTooltip:X.Z}),ee.options.__file="src/components/core/App/index.vue";var te=ee.exports},139:function(e,t,a){"use strict";a.d(t,{Z:function(){return f}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"90%","max-width":"900px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"title"},[e._v("Welcome to VizualSimuLab")]),e._v(" "),a("v-card-text",{staticClass:"body-2"},[a("p",[e._v("\n        You may experience slower rendering speeds because of the following\n        reason(s):\n      ")]),e._v(" "),a("ul",{staticClass:"pl-10"},[e.issues.webglVersion?a("li",[e._v("\n          Detected WebGL version "+e._s(e.issues.webglVersion)+". For best performance,\n          please use a computer and/or browser with at least WebGL 2.\n        ")]):e._e(),e._v(" "),e.issues.integratedGPU?a("li",[e._v('\n          Using GPU "'+e._s(e.issues.integratedGPU)+'". A dedicated GPU would\n          offer better performance.\n          '),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://wevideo.zendesk.com/hc/en-us/articles/225259448-How-to-enable-WebGL"}},[e._v("\n            More info on enabling dedicated GPUs in browsers.\n          ")])]):e._e()])]),e._v(" "),a("v-card-actions",{staticClass:"d-flex justify-space-between align-center pa-5"},[a("v-checkbox",{staticClass:"mt-0 pt-0",attrs:{label:"Don't show again","hide-details":"",value:e.suppressBrowserWarning},on:{input:e.setSuppressBrowserWarning}}),e._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.dialog=!1}}},[e._v("\n        Okay\n      ")])],1)],1)],1)};i._withStripped=!0;var s=a(602);var n={name:"BrowserIssues",data:()=>({issues:{},dialog:!1}),computed:(0,s.rn)(["suppressBrowserWarning"]),mounted(){this.getBrowserIssues()},methods:{getBrowserIssues:function(){const e=this.$proxyManager.getViews()[0];if(e){const t=e.getOpenglRenderWindow().getGLInformations(),{UNMASKED_RENDERER:a,UNMASKED_VENDOR:i,WEBGL_VERSION:s}=t;s.value<2&&this.$set(this.issues,"webglVersion",s.value);-1!==`${i.value} / ${a.value}`.toLowerCase().indexOf("intel")&&this.$set(this.issues,"integratedGPU",a.value)}Object.keys(this.issues).length&&!this.suppressBrowserWarning&&(this.dialog=!0)},...(0,s.nv)({setSuppressBrowserWarning:"suppressBrowserWarning"})}},o={},r=a(571),l=a(3),c=a.n(l),d=a(572),u=a(591),p=a(597),m=a(603),v=a(612);e=a.hmd(e);var g={},h=!1;e.hot,e.hot;var y=(0,r.Z)(n,i,[],!1,(function(e){h||(g.$style=o.locals||o,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return g.$style}}))}),null,null);c()(y,{VBtn:d.Z,VCard:u.Z,VCardActions:p.h7,VCardText:p.ZB,VCardTitle:p.EB,VCheckbox:m.Z,VDialog:v.Z}),y.options.__file="src/components/core/BrowserIssues/index.vue";var f=y.exports},140:function(e,t,a){"use strict";a.d(t,{Z:function(){return b}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-tabs",{class:e.$style.tabsContainer,attrs:{centered:"",grow:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("v-tab",[e._v("Datasets")]),e._v(" "),a("v-tab",[e._v("Tools")]),e._v(" "),a("v-tab",[e._v("Global")]),e._v(" "),a("v-tabs-items",{class:e.$style.tabItems,attrs:{touchless:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("v-tab-item",{class:e.$style.tabItem},[a("datasets")],1),e._v(" "),a("v-tab-item",{class:e.$style.tabItem,attrs:{eager:""}},[a("edit-tools")],1),e._v(" "),a("v-tab-item",{class:e.$style.tabItem},[a("global-settings")],1)],1)],1)};i._withStripped=!0;var s=a(77),n=a(155),o=a(162),r={name:"ControlsDrawer",components:{Datasets:s.Z,EditTools:n.Z,GlobalSettings:o.Z},data:()=>({activeTab:0})},l={tabsContainer:"ControlsDrawer-tabsContainer-D9UMb",tabItems:"ControlsDrawer-tabItems-O9Lf9",tabItem:"ControlsDrawer-tabItem-voKeM",tabComponent:"ControlsDrawer-tabComponent-K9eUY"},c=a(571),d=a(3),u=a.n(d),p=a(659),m=a(660),v=a(661),g=a(664);e=a.hmd(e);var h={},y=!1;e.hot,e.hot;var f=(0,c.Z)(r,i,[],!1,(function(e){y||(h.$style=l.locals||l,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return h.$style}}))}),null,null);u()(f,{VTab:p.Z,VTabItem:m.Z,VTabs:v.Z,VTabsItems:g.Z}),f.options.__file="src/components/core/ControlsDrawer/index.vue";var b=f.exports},77:function(e,t,a){"use strict";a.d(t,{Z:function(){return M}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-expansion-panels",{attrs:{multiple:"",accordion:""},model:{value:e.panelState,callback:function(t){e.panelState=t},expression:"panelState"}},e._l(e.datasets,(function(t,i){return a("v-expansion-panel",{key:t,class:e.$style.datasetPanel},[a("v-expansion-panel-header",{staticClass:"pv-no-select pl-3 pr-3 pt-1 pb-1",class:e.$style.panelHeader},[a("v-btn",{staticClass:"flex-shrink-0",attrs:{icon:"",small:""},on:{click:function(a){return a.stopPropagation(),e.toggleDatasetVisibility(t)}}},[a("v-icon",[e._v("\n          "+e._s(e.getDatasetVisibility(t)?"mdi-eye":"mdi-eye-off")+"\n        ")])],1),e._v(" "),a("div",{staticClass:"subtitle-2 text-truncate pl-2 pr-2",attrs:{title:e.getSourceName(t)}},[e._v("\n        "+e._s(e.getSourceName(t))+"\n      ")]),e._v(" "),a("v-spacer"),e._v(" "),e.datasets.length>1?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",e._g({class:e.$style.headerMenuButton,attrs:{icon:"",small:""},on:{click:function(a){return a.stopPropagation(),e.activateSource(t)}}},s),[a("v-icon",[e._v("\n              "+e._s(e.activeSourceId===t?"mdi-bookmark-check":"mdi-bookmark-outline")+"\n            ")])],1)]}}],null,!0)},[a("span",{staticClass:"pv-no-select"},[e._v("Activate source")])]):e._e(),e._v(" "),a("div",{on:{click:function(e){e.stopPropagation()}}},[a("v-menu",{attrs:{"offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({class:e.$style.headerMenuButton,attrs:{icon:"",small:""}},i),[a("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e._v(" "),a("v-list",{attrs:{dense:""}},[a("v-list-item",{on:{click:function(a){return e.deleteDataset(t)}}},[a("v-list-item-title",[e._v("Delete")])],1),e._v(" "),a("v-list-item",{on:{click:function(a){return e.uploadDataset(t)}}},[a("v-list-item-title",[e._v("Upload To Girder")])],1)],1)],1)],1)],1),e._v(" "),a("v-expansion-panel-content",{class:e.$style.panelContent,attrs:{eager:""}},[a("color-group",{attrs:{index:i,visible:e.datasets.length>1}}),e._v(" "),a("v-expansion-panels",{attrs:{multiple:"",accordion:""},model:{value:e.subpanels[t],callback:function(a){e.$set(e.subpanels,t,a)},expression:"subpanels[sourceId]"}},e._l(e.panels,(function(i,s){return i.visible(e.$proxyManager.getProxyById(t))?a("v-expansion-panel",{key:s,class:e.$style.subpanel},[a("v-expansion-panel-header",{staticClass:"pv-no-select",class:e.$style.subpanelHeader},[a("v-icon",{staticClass:"flex-grow-0",attrs:{left:""}},[e._v(e._s(i.icon))]),e._v(" "),a("span",{staticClass:"body-2 font-weight-medium flex-grow-0"},[e._v("\n              "+e._s(i.name)+"\n            ")])],1),e._v(" "),a("v-expansion-panel-content",{class:e.$style.panelContent,attrs:{eager:""}},[a(i.component,{tag:"component",attrs:{sourceId:t}})],1)],1):e._e()})),1)],1)],1)})),1)};i._withStripped=!0;var s=a(602),n=a(141),o=a(145),r=a(151),l=a(152),c=a(153),d=[{component:l.Z,defaultExpand:!0,icon:"mdi-brightness-6",name:"Representation",visible:e=>e.getDataset().isA("vtkPolyData")||e.getDataset().isA("vtkImageData")},{component:n.Z,defaultExpand:!0,icon:"mdi-invert-colors",name:"Colors",visible:e=>e.getDataset().isA("vtkPolyData")||e.getDataset().isA("vtkImageData")},{component:c.Z,defaultExpand:!0,icon:"mdi-tune",name:"Slice",visible:e=>e.getDataset().isA("vtkImageData")},{component:r.Z,defaultExpand:!0,icon:"mdi-molecule",name:"Molecule",visible:e=>e.getDataset().isA("vtkMolecule")},{component:o.Z,defaultExpand:!1,icon:"mdi-help-circle-outline",name:"Information",visible:e=>e.getDataset().isA("vtkPolyData")||e.getDataset().isA("vtkImageData")}],u={name:"Datasets",components:{ColorGroup:a(154).Z},data:()=>({datasets:[],internalPanelState:{},subpanels:{},activeSourceId:-1}),computed:{...(0,s.rn)({collapseDatasetPanels:"collapseDatasetPanels",panels:e=>{const t=Object.keys(e.panels).map((e=>Number(e)));return t.sort(((e,t)=>e-t)),[].concat(...t.map((t=>e.panels[t])))}}),...(0,s.rn)("widgets",["imageToLabelmaps"]),panelState:{get(){const e=[];for(let t=0;t<this.datasets.length;t++){const a=this.datasets[t];this.internalPanelState[a]&&e.push(t)}return e},set(e){for(let t=0;t<this.datasets.length;t++){const a=this.datasets[t];this.internalPanelState[a]=e.indexOf(t)>-1}}},smallScreen(){return this.$vuetify.breakpoint.smAndDown}},created(){d.forEach(((e,t)=>this.addPanel(e,t+10)))},mounted(){this.updateDatasetList()},proxyManagerHooks:{onProxyModified(){this.updateDatasetList()},onProxyCreated({proxyGroup:e,proxyName:t}){"Sources"===e&&"TrivialProducer"===t&&this.updateDatasetList()},onProxyDeleted({proxyId:e,proxyGroup:t,proxyName:a}){if("Sources"===t&&"TrivialProducer"===a){this.datasets.indexOf(e)>-1&&(this.$delete(this.internalPanelState,e),this.$delete(this.subpanels,e),this.updateDatasetList())}},onActiveSourceChange(e){this.activeSourceId=e?e.getProxyId():-1}},methods:{updateDatasetList(){const e=this.$proxyManager.getSources().filter((e=>"Sources"===e.getProxyGroup()&&"TrivialProducer"===e.getProxyName())).filter((e=>Boolean(e.getDataset())));for(let t=0;t<e.length;t++){const a=e[t],i=a.getProxyId();i in this.internalPanelState||(this.internalPanelState[i]=!this.collapseDatasetPanels),i in this.subpanels||(this.collapseDatasetPanels?this.subpanels[i]=[]:this.subpanels[i]=d.filter((e=>e.visible(a))).map(((e,t)=>e.defaultExpand?t:-1)).filter((e=>e>-1)))}this.datasets=e.map((e=>e.getProxyId())),this.$store.dispatch("views/updateMasterSourceId",this.datasets)},getSourceName(e){const t=this.$proxyManager.getProxyById(e);return t?t.getName():null},activateSource(e){const t=this.$proxyManager.getProxyById(e);return t&&t.activate(),null},deleteDataset(e){const t=this.$proxyManager.getProxyById(e);t&&this.$proxyManager.deleteProxy(t)},uploadDataset(e){this.$proxyManager.getProxyById(e)&&(this.$root.$emit("open_girder_panel"),setTimeout((()=>{this.$root.$emit("girder_upload_proxy",e)}),10))},getDatasetVisibility(e){const t=this.$proxyManager.getRepresentations().find((t=>t.getInput().getProxyId()===e));return!!t&&t.isVisible()},toggleDatasetVisibility(e){const t=!this.getDatasetVisibility(e),a=this.imageToLabelmaps[e]||[];this.$proxyManager.getRepresentations().filter((t=>{const i=t.getInput().getProxyId();return i===e||a.indexOf(i)>-1})).forEach((e=>e.setVisibility(t))),this.$forceUpdate()},addPanel(e,t){this.$store.commit("addPanel",{component:e,priority:t})}}},p=u,m=a(78),v=a(571),g=a(3),h=a.n(g),y=a(572),f=a(645),b=a(646),x=a(647),w=a(648),_=a(600),S=a(637),P=a(631),C=a(636),k=a(628),V=a(643),I=a(644);e=a.hmd(e);var T={},$=!1;e.hot,e.hot;var D=(0,v.Z)(p,i,[],!1,(function(e){$||(T.$style=m.Z.locals||m.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return T.$style}}))}),null,null);h()(D,{VBtn:y.Z,VExpansionPanel:f.Z,VExpansionPanelContent:b.Z,VExpansionPanelHeader:x.Z,VExpansionPanels:w.Z,VIcon:_.Z,VList:S.Z,VListItem:P.Z,VListItemTitle:C.V9,VMenu:k.Z,VSpacer:V.Z,VTooltip:I.Z}),D.options.__file="src/components/core/Datasets/index.vue";var M=D.exports},155:function(e,t,a){"use strict";a.d(t,{Z:function(){return x}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-expansion-panels",{attrs:{accordion:""}},[a("v-expansion-panel",[a("v-expansion-panel-header",{staticClass:"subtitle-2"},[e._v("\n      Measurements\n    ")]),e._v(" "),a("v-expansion-panel-content",{class:e.$style.panelContent,attrs:{eager:""}},[a("measurement-tools",{attrs:{enabled:"measurement"===e.enabledTool},on:{enable:function(t){return e.setEnabledTool("measurement",t)}}})],1)],1),e._v(" "),a("v-expansion-panel",[a("v-expansion-panel-header",{staticClass:"subtitle-2"},[e._v("\n      Painting\n    ")]),e._v(" "),a("v-expansion-panel-content",{class:e.$style.panelContent},[a("paint-tool",{attrs:{enabled:"paint"===e.enabledTool},on:{enable:function(t){return e.setEnabledTool("paint",t)}}})],1)],1),e._v(" "),a("v-expansion-panel",[a("v-expansion-panel-header",{staticClass:"subtitle-2"},[e._v("\n      Cropping\n    ")]),e._v(" "),a("v-expansion-panel-content",{class:e.$style.panelContent},[a("crop-tool",{attrs:{enabled:"crop"===e.enabledTool},on:{enable:function(t){return e.setEnabledTool("crop",t)}}})],1)],1),e._v(" "),a("v-expansion-panel",[a("v-expansion-panel-header",{staticClass:"subtitle-2"},[e._v("\n      Median Filter\n    ")]),e._v(" "),a("v-expansion-panel-content",{class:e.$style.panelContent},[a("median-filter")],1)],1)],1)};i._withStripped=!0;var s=a(156),n=a(157),o=a(158),r=a(159),l={name:"EditTools",components:{PaintTool:s.Z,MeasurementTools:n.Z,CropTool:o.Z,MedianFilter:r.Z},data:()=>({enabledTool:""}),methods:{setEnabledTool(e,t){this.enabledTool=t?e:""}}},c={panelContent:"EditTools-panelContent-wgcJ9"},d=a(571),u=a(3),p=a.n(u),m=a(645),v=a(646),g=a(647),h=a(648);e=a.hmd(e);var y={},f=!1;e.hot,e.hot;var b=(0,d.Z)(l,i,[],!1,(function(e){f||(y.$style=c.locals||c,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return y.$style}}))}),null,null);p()(b,{VExpansionPanel:m.Z,VExpansionPanelContent:v.Z,VExpansionPanelHeader:g.Z,VExpansionPanels:h.Z}),b.options.__file="src/components/core/EditTools/index.vue";var x=b.exports},167:function(e,t,a){"use strict";a.d(t,{Z:function(){return h}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"title"},[e._v("Application errors")]),e._v(" "),a("v-card-text",[a("p",[e._v("\n      The following is debug output for errors that have occurred. Please\n      copy and paste the below text and post it to our\n      "),a("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://github.com/Kitware/Glance/issues"}},[e._v("issue tracker")]),e._v(".\n    ")]),e._v(" "),a("textarea",{ref:"errorTextarea",class:e.$style.errorTextarea,attrs:{readonly:""}},[e._v(e._s(e.readableErrors))])]),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"secondary"},on:{click:function(t){return e.$emit("clear")}}},[e._v("\n      Clear Errors\n    ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{on:{click:function(t){return e.$emit("close")}}},[e._v("Cancel")]),e._v(" "),e.isClipboardEnabled()?a("v-btn",{key:"if-clipboard-enabled",attrs:{color:"info",loading:e.copiedToClipboard},on:{click:e.copyErrorToClipboard}},[a("span",[e._v("Copy to clipboard")]),e._v(" "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Copied!")])]):e._e()],1)],1)};i._withStripped=!0;var s={name:"ErrorBox",props:{errors:{type:Array,default:[]}},data:()=>({copiedToClipboard:!1}),computed:{readableErrors(){const e=window.VSL_VERSION||"not available",t=this.errors.map((e=>e instanceof ErrorEvent?e.message:e)).join("\n");return`ParaViewGlance: ${e}\n${navigator.userAgent}\n\n\`\`\`\n${t}\n\`\`\``}},methods:{isClipboardEnabled:function(){try{return document.queryCommandSupported("copy")}catch(e){return!1}},copyErrorToClipboard:function(){this.$refs.errorTextarea.select(),document.execCommand("copy")&&(this.copiedToClipboard=!0,window.setTimeout((()=>{this.copiedToClipboard=!1}),2e3))}}},n={errorTextarea:"ErrorBox-errorTextarea-_ViHl"},o=a(571),r=a(3),l=a.n(r),c=a(572),d=a(591),u=a(597),p=a(643);e=a.hmd(e);var m={},v=!1;e.hot,e.hot;var g=(0,o.Z)(s,i,[],!1,(function(e){v||(m.$style=n.locals||n,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return m.$style}}))}),null,null);l()(g,{VBtn:c.Z,VCard:d.Z,VCardActions:u.h7,VCardText:u.ZB,VCardTitle:u.EB,VSpacer:p.Z}),g.options.__file="src/components/core/ErrorBox/index.vue";var h=g.exports},168:function(e,t,a){"use strict";a.d(t,{Z:function(){return Z}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"70%",value:e.value,persistent:e.loading,fullscreen:e.$vuetify.breakpoint.smAndDown},on:{input:e.onDialogChange,"click:outside":function(t){!e.loading&&e.close()}}},[a("v-card",[a("v-card-text",{staticClass:"pa-0"},[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-container",[a("v-tabs",{model:{value:e.active_tab,callback:function(t){e.active_tab=t},expression:"active_tab"}},[a("v-tab",[e._v("Local")]),e._v(" "),a("v-tab",[e._v("Girder")]),e._v(" "),a("v-tab-item",{attrs:{transition:"fade-transition"}},[a("drag-and-drop",{attrs:{enabled:""},on:{drop:function(t){return e.openFiles(t)}},scopedSlots:e._u([{key:"default",fn:function(t){var i,s=t.dragHover;return[a("v-row",{staticClass:"pa-3",class:(i={},i[e.$style.dragBox]=!0,i[e.$style.dropTarget]=s,i),attrs:{align:"center"},on:{click:e.promptLocal}},[a("v-btn",[e._v("browse")]),e._v(" "),a("span",{staticClass:"ml-2"},[e._v("\n                        or drop your files here\n                      ")])],1)]}}])})],1),e._v(" "),a("v-tab-item",{attrs:{transition:"fade-transition"}},[a("girder-box")],1)],1),e._v(" "),a("v-row",{staticClass:"mt-2"},[a("v-expansion-panels",{attrs:{accordion:""}},e._l(e.fileList,(function(t,i){return a("v-expansion-panel",{key:i},[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("div",{staticClass:"d-flex flex-row align-center"},["ready"===t.state?[a("v-icon",{attrs:{color:"teal"}},[e._v("mdi-check")])]:"error"===t.state?[a("v-icon",{attrs:{color:"error"}},[e._v("mdi-alert")])]:"needsInfo"===t.state?[a("v-icon",{attrs:{color:"blue"}},[e._v("mdi-information")])]:"loading"===t.state||"needsDownload"===t.state?[a("v-progress-circular",{attrs:{indeterminate:"",color:"secondary",size:"16",width:"2"}})]:e._e(),e._v(" "),a("v-btn",{staticClass:"ml-3",attrs:{icon:""}},[a("v-icon",{on:{click:function(t){return t.stopPropagation(),e.deleteFileAtRevIndex(i)}}},[e._v("mdi-delete")])],1)],2)]},proxy:!0},{key:"default",fn:function(i){i.open;return[a("v-row",{staticStyle:{width:"80%"},attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"8"}},[e._v(e._s(t.name))]),e._v(" "),a("v-col",{staticClass:"text--secondary pr-3 text-right",attrs:{cols:"4"}},["error"===t.state?a("span",[e._v("\n                            Click to see error\n                          ")]):"raw"===t.ext?a("span",[e._v("\n                            Click to edit raw file info\n                          ")]):"glance"===t.ext?a("span",[e._v("\n                            State file will be loaded first\n                          ")]):e._e()])],1)]}}],null,!0)}),e._v(" "),a("v-expansion-panel-content",["error"===t.state?[e._v("\n                      "+e._s(t.error)+"\n                    ")]:"raw"===t.ext?[a("raw-file-reader",{attrs:{file:t.files[0]},on:{change:function(t){return e.setRawFileInfoAtRevIndex(i,t)}}})]:e._e()],2)],1)})),1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),e.anyErrors?a("span",{staticClass:"red--text mr-3"},[e._v("Only checked files will be loaded.")]):e._e(),e._v(" "),a("v-btn",{attrs:{text:"",disabled:e.loading},on:{click:e.close}},[e._v("\n            Cancel\n          ")]),e._v(" "),a("v-btn",{attrs:{color:"primary",disabled:e.loading||e.pendingFiles||!e.hasReadyFiles},on:{click:e.loadFiles}},[e._v("\n            "+e._s(e.loading?"Loading...":"Load")+"\n          ")])],1)],1)],1)],1)],1)};i._withStripped=!0;var s=a(602),n=a(169),o=a(166),r=a(170),l={name:"FileLoader",components:{RawFileReader:n.Z,DragAndDrop:o.Z,GirderBox:r.Z},props:{value:{type:Boolean,default:!1}},data:()=>({loading:!1,active_tab:0}),mounted(){this.$root.$on("open_girder_panel",(()=>{this.active_tab=1}))},computed:{...(0,s.rn)("files",{fileList:e=>Array.from(e.fileList).reverse(),pendingFiles:e=>e.fileList.reduce(((e,t)=>e||"ready"!==t.state&&"error"!==t.state),!1),hasReadyFiles:e=>e.fileList.reduce(((e,t)=>e||"ready"===t.state),!1)}),...(0,s.Se)("files",["anyErrors"])},methods:{...(0,s.nv)("files",["openFiles","promptLocal","deleteFile","setRawFileInfo","load","resetQueue"]),loadFiles(){this.loading=!0,this.load().finally((()=>{this.close(),this.$emit("load"),setTimeout((()=>{this.loading=!1}),10)}))},deleteFileAtRevIndex(e){return this.deleteFile(this.fileList.length-1-e)},setRawFileInfoAtRevIndex(e,t){return this.setRawFileInfo({index:this.fileList.length-1-e,info:t})},onDialogChange(e){e?this.$emit("input",!0):this.close()},close(){this.$emit("input",!1),setTimeout((()=>this.resetQueue()),10)}}},c={dragBox:"FileLoader-dragBox-wtic9",dropTarget:"FileLoader-dropTarget-KZYE7"},d=a(571),u=a(3),p=a.n(u),m=a(572),v=a(591),g=a(597),h=a(672),y=a(627),f=a(612),b=a(645),x=a(646),w=a(647),_=a(648),S=a(600),P=a(589),C=a(669),k=a(643),V=a(659),I=a(660),T=a(661);e=a.hmd(e);var $={},D=!1;e.hot,e.hot;var M=(0,d.Z)(l,i,[],!1,(function(e){D||($.$style=c.locals||c,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return $.$style}}))}),null,null);p()(M,{VBtn:m.Z,VCard:v.Z,VCardActions:g.h7,VCardText:g.ZB,VCol:h.Z,VContainer:y.Z,VDialog:f.Z,VExpansionPanel:b.Z,VExpansionPanelContent:x.Z,VExpansionPanelHeader:w.Z,VExpansionPanels:_.Z,VIcon:S.Z,VProgressCircular:P.Z,VRow:C.Z,VSpacer:k.Z,VTab:V.Z,VTabItem:I.Z,VTabs:T.Z}),M.options.__file="src/components/core/FileLoader/index.vue";var Z=M.exports},170:function(e,t,a){"use strict";a.d(t,{Z:function(){return R}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",{attrs:{"no-gutters":"",align:"center"}},[a("v-col",[a("v-text-field",{attrs:{label:"Girder URL","single-line":"",outlined:"","hide-details":""},model:{value:e.newGirderURL,callback:function(t){e.newGirderURL=t},expression:"newGirderURL"}})],1),e._v(" "),a("v-btn",{staticClass:"ml-2",attrs:{disabled:e.noURLChange,text:""},on:{click:function(t){e.changeURLPrompt=!0}}},[e._v("\n        Update\n      ")]),e._v(" "),e.loggedOut?e._e():a("v-btn",{staticClass:"ml-2",attrs:{tile:"",color:"secondary"},on:{click:e.logout}},[e._v("\n        Log out\n      ")])],1),e._v(" "),a("v-row",[e.loggedOut?a("v-col",[a("GirderAuthentication",{key:e.girderRest.token,attrs:{register:"",oauth:!0}}),e._v(" "),a("div",{staticClass:"mt-2"},[a("v-icon",[e._v("mdi-information")]),e._v(" "),a("span",[e._v("Logging in will refresh and lose any unsaved data.")])],1)],1):e._e(),e._v(" "),a("v-col",[a("GirderFileManager",{ref:"girderFileManager",attrs:{"root-location-disabled":!1,selectable:!0,location:e.location},on:{"update:location":function(t){e.location=t}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e._v(" "),a("v-toolbar",[a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"mt-4",attrs:{disabled:!e.selected.length},on:{click:function(t){return e.load()}}},[e._v("\n             Select\n          ")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{width:"30%"},model:{value:e.changeURLPrompt,callback:function(t){e.changeURLPrompt=t},expression:"changeURLPrompt"}},[a("v-card",[a("v-card-title",[e._v("Change Girder URL")]),e._v(" "),a("v-card-text",[e._v("\n          Changing the girder URL to "),a("pre",[e._v(e._s(e.newGirderURL))]),e._v(" will require a refresh.\n          Do you want to continue?\n        ")]),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.changeURLPrompt=!1}}},[e._v("Cancel")]),e._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:e.refreshPage}},[e._v("Refresh")])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[a("girder-upload",{ref:"girderUploader",attrs:{dest:e.location}})],1)],1)};i._withStripped=!0;var s=a(75),n=a(602),o=a(77),r=a(666),l=a(668),c=a(501),d=a(498),u=a(83),p=a(499),m=a(382),v=a(500);function g(e,t){const a=new Blob([e]);return new File([a],t)}var h={name:"GirderBox",components:{SvgIcon:s.Z,GirderAuthentication:r.Z,GirderFileManager:l.Z,Datasets:o.Z,GirderUpload:c.Z},inject:["girderRest","$notify"],data(){return{selected:[],internalLocation:null,changeServer:!1,newGirderURL:this.girderRest.apiRoot,changeURLPrompt:!1}},computed:{currentUserLogin(){return this.girderRest.user?this.girderRest.user.login:"anonymous"},loggedOut(){return null===this.girderRest.user},location:{get(){return this.internalLocation||(this.loggedOut?{_id:"5e84eb3e2660cbefba7d71d9",_modelType:"folder"}:this.girderRest.user)},set(e){this.internalLocation=e}},noURLChange(){return this.newGirderURL===this.girderRest.apiRoot},...(0,n.rn)("widgets",{dataMeasurements:"measurements"})},mounted(){this.$root.$on("girder_upload_proxy",(e=>{this.upload(e)})),this.$root.$on("girder_upload_measurements",(e=>{this.uploadMeasurements(e)}))},methods:{load(){const e=this.selected.map((e=>({url:`${this.girderRest.apiRoot}/item/${e._id}/download`,name:e.name,withGirderToken:!0,proxyKeys:{girderProvenance:{...this.location,apiRoot:this.girderRest.apiRoot},girderItem:{itemId:e._id,itemName:e.name},meta:e.meta}})));this.$store.dispatch("files/openRemoteFiles",e)},export2pc(e){const t=this.$proxyManager.getProxyById(e).get().dataset,a=u.Z.convertVtkToItkImage(t);a.data=a.data.slice(0),(0,d.Z)(null,!1,a,"out.mha").then((({arrayBuffer:e})=>{const t=new Blob([e]),a=URL.createObjectURL(t),i=document.createElement("a");i.setAttribute("href",a),i.setAttribute("download","out.mha"),document.body.appendChild(i),i.click(),document.body.removeChild(i)}))},checkUploadPossible(){return this.loggedOut?(this.$notify("Cannot upload to Girder unless logged in. Please log in then try again"),!1):this.location?"user"!==this.location._modelType||(this.$notify("Cannot upload here. Please select public or private and then try again"),!1):(this.$notify("Cannot upload to Girder root location. Please navigate to a folder you own then try again"),!1)},upload(e){if(!this.checkUploadPossible())return;const t=this.$proxyManager.getProxyById(e),a=t.getDataset(),i=t.getName(),s={glanceDataType:a.getClassName()};"vtkLabelMap"===a.getClassName()&&Object.assign(s,{colorMap:a.getColorMap()}),this.$notify("Uploading...",!0),function(e,t){return new Promise(((a,i)=>{if(e.isA("vtkImageData")){const i=u.Z.convertVtkToItkImage(e);i.data=i.data.slice(0),(0,d.Z)(null,!1,i,t).then((e=>a(g(e,t))))}else if(e.isA("vtkPolyData")){let s=null;t.endsWith(".vtp")?(s=p.ZP.newInstance(),s.setFormat(m.Z.FormatTypes.BINARY)):t.endsWith(".stl")&&(s=v.ZP.newInstance()),s?a(g(s.write(e),t)):i(new Error(`Cannot save polydata dataset ${t}`))}else i(new Error(`Cannot save dataset ${t}`))}))}(a,i).then((t=>{const a=this.$proxyManager.getProxyById(e).getKey("girderProvenance")||this.location;this.$refs.girderUploader.setFiles([t]),this.$refs.girderUploader.inputFilesChanged([t]),this.$refs.girderUploader.start({dest:a,postUpload:({results:e})=>{const{itemId:t}=e[0];this.girderRest.put(`${this.girderRest.apiRoot}/item/${t}`,`metadata=${JSON.stringify(s)}`),this.$notify("Dataset uploaded"),this.$refs.girderFileManager.refresh()}}).catch((e=>{this.$notify(`Upload error: ${e}`),console.error("Upload error",e)}))}))},uploadMeasurements(e){if(!this.checkUploadPossible())return;const t=this.dataMeasurements[e];if(t){const a=`${this.$proxyManager.getProxyById(e).getName()}.measurements.json`,i=new File([JSON.stringify(t)],a),s=this.$proxyManager.getProxyById(e).getKey("girderProvenance")||this.location;this.$notify("Uploading...",!0),this.$refs.girderUploader.setFiles([i]),this.$refs.girderUploader.inputFilesChanged([i]),this.$refs.girderUploader.start({dest:s,postUpload:()=>{this.$notify("Measurements uploaded"),this.$refs.girderFileManager.refresh()}}).catch((e=>{this.$notify(`Upload error: ${e}`),console.error("Upload error",e)}))}},refreshPage(){const e=new URL(window.location.href),t=new URLSearchParams(e.search);t.set("girderRoute",this.newGirderURL),e.search=t.toString(),window.location.href=e.toString()},logout(){this.girderRest.logout()}}},y={close:"GirderBox-close-eeT8j"},f=a(571),b=a(3),x=a.n(b),w=a(572),_=a(591),S=a(597),P=a(672),C=a(627),k=a(612),V=a(600),I=a(669),T=a(643),$=a(624),D=a(673);e=a.hmd(e);var M={},Z=!1;e.hot,e.hot;var L=(0,f.Z)(h,i,[],!1,(function(e){Z||(M.$style=y.locals||y,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return M.$style}}))}),null,null);x()(L,{VBtn:w.Z,VCard:_.Z,VCardActions:S.h7,VCardText:S.ZB,VCardTitle:S.EB,VCol:P.Z,VContainer:C.Z,VDialog:k.Z,VIcon:V.Z,VRow:I.Z,VSpacer:T.Z,VTextField:$.Z,VToolbar:D.Z}),L.options.__file="src/components/core/GirderBox/index.vue";var R=L.exports},162:function(e,t,a){"use strict";a.d(t,{Z:function(){return T}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{class:e.$style.container},[e.isAnimated?a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("span",{staticClass:"subtitle-2"},[e._v("Animation controls")])]),e._v(" "),a("v-divider",{staticClass:"mb-4"}),e._v(" "),a("animationControls")],1):e._e(),e._v(" "),a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("span",{staticClass:"subtitle-2"},[e._v("General Settings")])]),e._v(" "),a("v-divider",{staticClass:"mb-4"}),e._v(" "),a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{staticClass:"pt-1",attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs10:""}},[a("span",{staticClass:"body-2"},[e._v("Default collapse datasets")])]),e._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-switch",{class:e.$style.slimInput,attrs:{"hide-details":""},model:{value:e.collapseDatasetPanelsModel,callback:function(t){e.collapseDatasetPanelsModel=t},expression:"collapseDatasetPanelsModel"}})],1)],1)],1)],1),e._v(" "),a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("span",{staticClass:"subtitle-2"},[e._v("Measurements")])]),e._v(" "),a("v-divider",{staticClass:"mb-4"}),e._v(" "),a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{staticClass:"pt-1",attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs9:""}},[a("span",{staticClass:"body-2"},[e._v("Distance unit symbol")])]),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{hint:"Symbol","hide-details":"",required:""},model:{value:e.distanceUnitSymbolModel,callback:function(t){e.distanceUnitSymbolModel=t},expression:"distanceUnitSymbolModel"}})],1),e._v(" "),a("v-flex",{attrs:{xs9:""}},[a("span",{staticClass:"body-2"},[e._v("Distance unit factor")])]),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{type:"number",hint:"Factor","hide-details":"",min:0,step:.1,required:""},model:{value:e.distanceUnitFactorModel,callback:function(t){e.distanceUnitFactorModel=t},expression:"distanceUnitFactorModel"}})],1)],1)],1)],1),e._v(" "),a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("span",{staticClass:"subtitle-2"},[e._v("Background")])]),e._v(" "),a("v-divider",{staticClass:"mb-4"}),e._v(" "),a("palette-picker",{attrs:{palette:e.palette,size:24},model:{value:e.backgroundColorModel,callback:function(t){e.backgroundColorModel=t},expression:"backgroundColorModel"}})],1),e._v(" "),a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("span",{staticClass:"subtitle-2"},[e._v("Interaction Style")])]),e._v(" "),a("v-divider",{class:e.$style.divider}),e._v(" "),a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{staticClass:"pt-1",attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[a("span",{staticClass:"body-2"},[e._v("3D")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-select",{staticClass:"pv-no-select",class:e.$style.slimInput,attrs:{dense:"",flat:"","hide-details":"",items:e.interactionStyles3D},model:{value:e.interactionStyle3DModel,callback:function(t){e.interactionStyle3DModel=t},expression:"interactionStyle3DModel"}})],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[e.firstPersonInteraction?a("span",{staticClass:"body-2"},[e._v("\n            Movement Speed\n          ")]):e._e()]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[e.firstPersonInteraction?a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:0,step:.1},model:{value:e.firstPersonMovementSpeedModel,callback:function(t){e.firstPersonMovementSpeedModel=t},expression:"firstPersonMovementSpeedModel"}}):e._e()],1)],1)],1)],1),e._v(" "),a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("span",{staticClass:"subtitle-2"},[e._v("Overlay")])]),e._v(" "),a("v-divider",{class:e.$style.divider}),e._v(" "),a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{staticClass:"pt-1",attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[a("span",{staticClass:"body-2"},[e._v("Text opacity")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"",min:0,max:1,step:.01},model:{value:e.annotationOpacityModel,callback:function(t){e.annotationOpacityModel=t},expression:"annotationOpacityModel"}})],1)],1)],1)],1),e._v(" "),a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs10:""}},[a("span",{staticClass:"subtitle-2"},[e._v("Orientation Axis")])]),e._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-switch",{class:e.$style.slimInput,attrs:{"hide-details":""},model:{value:e.orientationAxisModel,callback:function(t){e.orientationAxisModel=t},expression:"orientationAxisModel"}})],1)],1)],1)],1),e._v(" "),a("v-divider",{class:e.$style.divider}),e._v(" "),a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{staticClass:"pt-1",attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs3:""}},[a("span",{staticClass:"body-2"},[e._v("Type")])]),e._v(" "),a("v-flex",{attrs:{xs9:""}},[a("v-select",{staticClass:"pv-no-select",class:e.$style.slimInput,attrs:{dense:"",flat:"","hide-details":"",disabled:!e.orientationAxis,items:e.axisTypes},model:{value:e.axisTypeModel,callback:function(t){e.axisTypeModel=t},expression:"axisTypeModel"}})],1)],1),e._v(" "),a("v-layout",{staticClass:"pt-1",attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs3:""}},[a("span",{staticClass:"body-2"},[e._v("Preset")])]),e._v(" "),a("v-flex",{attrs:{xs9:""}},[a("v-select",{staticClass:"pv-no-select",class:e.$style.slimInput,attrs:{dense:"",flat:"","hide-details":"",items:e.orientationPresets},model:{value:e.orientationPresetModel,callback:function(t){e.orientationPresetModel=t},expression:"orientationPresetModel"}})],1)],1)],1)],1),e._v(" "),a("gpu-information",{attrs:{width:250,proxyManager:e.$proxyManager}}),e._v(" "),e.hasVR()?a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs10:""}},[a("span",{staticClass:"subtitle-2"},[e._v("Virtual Reality")])]),e._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-switch",{class:e.$style.slimInput,attrs:{"hide-details":""},on:{change:e.toggleVR},model:{value:e.vrEnabled,callback:function(t){e.vrEnabled=t},expression:"vrEnabled"}})],1)],1)],1)],1),e._v(" "),a("v-divider",{class:e.$style.divider}),e._v(" "),a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{staticClass:"pt-1",attrs:{row:"","align-center":"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("span",{staticClass:"body-2"},[e._v("Physical scale")])]),e._v(" "),a("v-flex",{attrs:{xs7:""}},[a("v-slider",{class:e.$style.slimInput,attrs:{"hide-details":"",min:"0.1",max:"10",step:"any"},model:{value:e.physicalScale,callback:function(t){e.physicalScale=t},expression:"physicalScale"}})],1)],1)],1)],1):e._e(),e._v(" "),a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("span",{staticClass:"subtitle-2"},[e._v("LOD Settings")])]),e._v(" "),a("v-divider",{class:e.$style.divider}),e._v(" "),a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{staticClass:"pt-1",attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs7:""}},[a("span",{staticClass:"body-2"},[e._v("Max Texture LOD Size")])]),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{class:e.$style.slimInput,attrs:{"hide-details":"",type:"number",min:100,suffix:"KiB"},model:{value:e.maxTextureLODSizeModel,callback:function(t){e.maxTextureLODSizeModel=t},expression:"maxTextureLODSizeModel"}})],1)],1)],1)],1)],1)};i._withStripped=!0;var s=a(602),n=a(163),o=a(164),r=a(36),l=a(165);const c=[{text:"Default",value:"3D"},{text:"First Person",value:"FirstPerson"}],d=[{text:"XYZ",value:"default"},{text:"LPS",value:"lps"}],u=[{text:"Arrows",value:"arrow"},{text:"Cube",value:"cube"}];var p={name:"GlobalSettings",components:{AnimationControls:n.Z,PalettePicker:r.Z,GpuInformation:o.Z},data:()=>({palette:l.qg,orientationPresets:d,interactionStyles3D:c,axisTypes:u,vrEnabled:!1,physicalScale:1,basePhysicalScale:1}),computed:{distanceUnitSymbolModel:{get(){return this.distanceUnitSymbol},set(e){this.setDistanceUnitSymbol(e)}},distanceUnitFactorModel:{get(){return this.distanceUnitFactor},set(e){this.setDistanceUnitFactor(e)}},collapseDatasetPanelsModel:{get(){return this.collapseDatasetPanels},set(e){this.setCollapseDatasetPanels(e)}},backgroundColorModel:{get(){return this.backgroundColor},set(e){this.setBackgroundColor(e)}},orientationAxisModel:{get(){return this.orientationAxis},set(e){this.setOrientationAxis(e)}},orientationPresetModel:{get(){return this.orientationPreset},set(e){this.setOrientationPreset(e)}},axisTypeModel:{get(){return this.axisType},set(e){this.setAxisType(e)}},annotationOpacityModel:{get(){return this.annotationOpacity},set(e){this.setAnnotationOpacity(e)}},firstPersonMovementSpeedModel:{get(){let e=this.firstPersonMovementSpeed;return null===e&&(this.resetFirstPersonMovementSpeed(),e=this.firstPersonMovementSpeed),e},set(e){this.setFirstPersonMovementSpeed(e)}},interactionStyle3DModel:{get(){return this.interactionStyle3D},set(e){this.setInteractionStyle3D(e)}},firstPersonInteraction(){return"FirstPerson"===this.interactionStyle3D},maxTextureLODSizeModel:{get(){return this.maxTextureLODSize},set(e){this.setMaxTextureLODSize(e)}},...(0,s.rn)(["collapseDatasetPanels"]),...(0,s.rn)("animations",{isAnimated:e=>e.frames.length>0}),...(0,s.rn)("views",{backgroundColor:e=>e.globalBackgroundColor,orientationAxis:e=>e.axisVisible,orientationPreset:e=>e.axisPreset,axisType:e=>e.axisType,annotationOpacity:e=>e.annotationOpacity,interactionStyle3D:e=>e.interactionStyle3D,firstPersonMovementSpeed:e=>e.firstPersonMovementSpeed,maxTextureLODSize:e=>e.maxTextureLODSize}),...(0,s.rn)("widgets",{distanceUnitSymbol:e=>e.distanceUnitSymbol,distanceUnitFactor:e=>e.distanceUnitFactor})},watch:{physicalScale(){const e=this.getViewForVR();e&&e.getCamera().setPhysicalScale(this.basePhysicalScale/Number(this.physicalScale))}},methods:{hasVR(){const e=this.getViewForVR();return e&&!!e.getOpenglRenderWindow().getVrDisplay()},getViewForVR:function(){const e=this.$proxyManager.getViews();for(let t=0;t<e.length;t++)if("View3D"===e[t].getProxyName())return e[t];return null},toggleVR(e){const t=this.getViewForVR();if(t){const a=t.getCamera(),i=t.getRenderer(),s=t.getOpenglRenderWindow();if(e){t.setOrientationAxesVisibility(!1),i.resetCamera(),this.basePhysicalScale=a.getPhysicalScale(),this.physicalScale=1;const e=e=>e>0?1:-1,n=a.getDirectionOfProjection(),o=Math.max(...n.map(Math.abs));a.setPhysicalViewNorth(n.map((t=>Math.abs(t)===o?e(t):0)));const r=a.getViewUp(),l=Math.max(...r.map(Math.abs));a.setPhysicalViewUp(r.map((t=>Math.abs(t)===l?e(t):0))),s.startVR()}else s.stopVR(),t.setOrientationAxesVisibility(this.orientationAxis)}},...(0,s.nv)({setCollapseDatasetPanels:"collapseDatasetPanels"}),...(0,s.nv)("views",{setBackgroundColor:(e,t)=>e("setGlobalBackground",t),setOrientationAxis:(e,t)=>e("setAxisVisible",t),setOrientationPreset:(e,t)=>e("setAxisPreset",t),setAxisType:(e,t)=>e("setAxisType",t),setAnnotationOpacity:(e,t)=>e("setAnnotationOpacity",t),setInteractionStyle3D:(e,t)=>e("setInteractionStyle3D",t),setFirstPersonMovementSpeed:(e,t)=>e("setFirstPersonMovementSpeed",t),resetFirstPersonMovementSpeed:e=>e("resetFirstPersonMovementSpeed"),setMaxTextureLODSize:(e,t)=>e("setMaxTextureLODSize",t)}),...(0,s.nv)("widgets",{setDistanceUnitSymbol:(e,t)=>e("setDistanceUnitSymbol",t),setDistanceUnitFactor:(e,t)=>e("setDistanceUnitFactor",t)})}},m={container:"GlobalSettings-container-_zf5o",card:"GlobalSettings-card-zqI_u",heading:"GlobalSettings-heading-ftN6X",divider:"GlobalSettings-divider-_12Zl",slimInput:"GlobalSettings-slimInput-tiNot"},v=a(571),g=a(3),h=a.n(g),y=a(591),f=a(627),b=a(634),x=a(598),w=a(601),_=a(630),S=a(642),P=a(651),C=a(624);e=a.hmd(e);var k={},V=!1;e.hot,e.hot;var I=(0,v.Z)(p,i,[],!1,(function(e){V||(k.$style=m.locals||m,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return k.$style}}))}),null,null);h()(I,{VCard:y.Z,VContainer:f.Z,VDivider:b.Z,VFlex:x.Z,VLayout:w.Z,VSelect:_.Z,VSlider:S.Z,VSwitch:P.Z,VTextField:C.Z}),I.options.__file="src/components/core/GlobalSettings/index.vue";var T=I.exports},307:function(e,t,a){"use strict";a.d(t,{Z:function(){return C}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"grey lighten-3",attrs:{id:e.$style.root}},[a("v-responsive",{staticClass:"grey darken-3"},[a("v-container",{attrs:{"grid-list-lg":"","fill-height":"",id:e.$style.banner}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs6:!e.$vuetify.breakpoint.smAndDown,xs12:e.$vuetify.breakpoint.smAndDown}},[a("v-card",{attrs:{flat:"",dark:"",color:"transparent"}},[a("v-card-title",{staticClass:"display-1 text-center pv-break-word"},[e._v("\n              VizualSimuLab open file \n            ")]),e._v(" "),a("v-card-text",[e._v("\n              An remote web aplication that allows visualization of cardiovascular surgery Fontan fluid dynamics simulations.\n            ")])],1)],1),e._v(" "),e.$vuetify.breakpoint.smAndDown?e._e():a("v-flex",{key:"if-large-enough-screen",attrs:{xs6:"","fill-height":""}},[a("drag-and-drop",{class:e.$style.dnd,attrs:{enabled:""},on:{drop:function(t){return e.$emit("open-files",t)}},scopedSlots:e._u([{key:"default",fn:function(t){var i,s=t.dragHover;return[a("div",{class:(i={},i[e.$style.fileUpload]=!0,i[e.$style.fileUploadHover]=s,i),on:{click:function(t){return t.stopPropagation(),e.$emit("open")}}},[a("div",{staticClass:"white--text body-2",class:e.$style.fileUploadContents},[a("v-btn",{attrs:{color:"primary",raised:"false"},on:{click:function(t){return t.stopPropagation(),e.$emit("open")}}},[a("span",{staticClass:"text-uppercase mr-2"},s?[e._v("drop your file")]:[e._v("open a file")]),e._v(" "),a("v-icon",[e._v("mdi-folder-outline")])],1),e._v(" "),a("div",{staticClass:"pv-no-select mt-2"},[e._v("\n                    or drop one anywhere in this box to begin.\n                  ")])],1)])]}}],null,!1,1487670387)})],1)],1)],1)],1),e._v(" "),a("v-container",{staticClass:"mt-4 pv-no-select",attrs:{"grid-list-lg":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("span",{staticClass:"title"},[e._v("Simulated Cases")])]),e._v(" "),e._l(e.samples,(function(t,i){return a("v-flex",{key:i,attrs:{xs4:e.$vuetify.breakpoint.mdAndUp,xs6:e.$vuetify.breakpoint.sm,xs12:e.$vuetify.breakpoint.xs}},[a("v-card",{class:e.$style.sampleData,attrs:{flat:"",tile:""}},[a("v-img",{attrs:{src:t.image,height:"300px"}}),e._v(" "),a("div",{class:e.$style.linkOverlay,on:{click:function(a){return a.stopPropagation(),e.openSample(t)}}},[a("div",{staticClass:"body-2",class:e.$style.linkOverlayText},[e._v("\n              "+e._s(t.label)+" ("+e._s(t.size)+")\n              "),t.description?a("div",{class:e.$style.description},[e._v("\n                "+e._s(t.description)+"\n              ")]):e._e(),e._v(" "),t.acknowledgement?a("div",{class:e.$style.acknowledgement},[e._v("\n                "+e._s(t.acknowledgement)+"\n              ")]):e._e()])])],1)],1)}))],2)],1),e._v(" "),a("v-footer",{staticClass:"d-flex flex-column",attrs:{height:"48px",color:"transparent"}},[a("div",{staticClass:"mb-2 text-center grey--text text--darken-2"},[a("div",[e._v(" "+e._s((new Date).getFullYear())+"  Mecom.")]),e._v(" "),a("div",[e._v("VizualSimuLab ("+e._s(e.version)+")")])])])],1)};i._withStripped=!0;var s={caso07:a(508),caso08:a(509),caso08b:a(510)};const n=window.VSL_VERSION&&"main"!==window.VSL_VERSION?window.VSL_VERSION:"main";var o=[{label:"Case a815746-run1@10seg",image:s.caso08,size:"14.7 MB",description:"bi-glenn  lglenn:1.4[L/m], rglenn:1.0[L/m], vci:2.2[L/m]",acknowledgement:"case a815746",datasets:[{name:"caso08.glance",url:`https://raw.githubusercontent.com/maurferdev/dataset_res/${n}/caso08.glance`}]},{label:"Case a815746-run2@2seg",image:s.caso08b,size:"14.7 MB",description:"bi-glenn  lglenn:1.0[L/m], rglenn:1.0[L/m], vci:2.2[L/m]",acknowledgement:"case a815746",datasets:[{name:"caso08b.glance",url:`https://raw.githubusercontent.com/maurferdev/dataset_res/${n}/caso08b.glance`}]},{label:"Case a844152",image:s.caso07,size:"8.4 MB",description:"preplanning simulation Extracardiac Tube - Fontan step. CFD. Tricuspid atresia 12 years old patient",acknowledgement:"case a844152",datasets:[{name:"caso.glance",url:`https://raw.githubusercontent.com/maurferdev/dataset_res/${n}/caso.glance`}]}],r={name:"Landing",components:{DragAndDrop:a(166).Z},data:()=>({samples:o,version:window.VSL_VERSION||"version testing"}),methods:{openSample(e){const t=[],a=[];for(let i=0;i<e.datasets.length;++i)t.push(e.datasets[i].url),a.push(e.datasets[i].name);this.$emit("open-urls",e.label,t,a)}}},l={root:"Landing-root-MDMR5",dnd:"Landing-dnd-wOnpL",banner:"Landing-banner-glRow",fileUpload:"Landing-fileUpload-yjnik",fileUploadHover:"Landing-fileUploadHover-gEEmi",fileUploadContents:"Landing-fileUploadContents-G0R9l",sampleData:"Landing-sampleData-LDmnt",linkOverlay:"Landing-linkOverlay-HstJ9",acknowledgement:"Landing-acknowledgement-jf6A6",description:"Landing-description-_xRo0",linkOverlayText:"Landing-linkOverlayText-o_OYL"},c=a(571),d=a(3),u=a.n(d),p=a(572),m=a(591),v=a(597),g=a(627),h=a(598),y=a(677),f=a(600),b=a(674),x=a(601),w=a(675);e=a.hmd(e);var _={},S=!1;e.hot,e.hot;var P=(0,c.Z)(r,i,[],!1,(function(e){S||(_.$style=l.locals||l,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return _.$style}}))}),null,null);u()(P,{VBtn:p.Z,VCard:m.Z,VCardText:v.ZB,VCardTitle:v.EB,VContainer:g.Z,VFlex:h.Z,VFooter:y.Z,VIcon:f.Z,VImg:b.Z,VLayout:x.Z,VResponsive:w.Z}),P.options.__file="src/components/core/Landing/index.vue";var C=P.exports},308:function(e,t,a){"use strict";a.d(t,{Z:function(){return h}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{class:e.$style.container,attrs:{fluid:""}},[a("div",{class:e.$style.grid,style:{gridTemplateRows:e.gridTemplateRows,gridTemplateColumns:e.gridTemplateColumns}},e._l(e.views,(function(t,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:i<e.visibleCount,expression:"index < visibleCount"}],key:i+"::"+t,class:e.$style.viewContainer},[a("vtk-view",{attrs:{"view-type":t,"layout-index":i,"layout-count":e.visibleCount,"background-color":e.backgroundColors[t]},on:{"bg-change":function(t){return e.setViewBackground(e.view,arguments[0])}}})],1)})),0)])};i._withStripped=!0;var s=a(602),n=a(309),o=a(438),r={name:"LayoutView",components:{VtkView:n.Z},computed:{smallScreen(){return this.$vuetify.breakpoint.width<o.u3.md},gridTemplateRows(){return this.visibleCount<4?"1fr":"1fr 1fr"},gridTemplateColumns(){return this.visibleCount<2?"1fr":"1fr 1fr"},...(0,s.rn)("views",{views:e=>e.viewOrder,backgroundColors:e=>e.backgroundColors,visibleCount(e){return this.smallScreen?1:e.visibleCount}})},methods:{getView(e){const[t,a]=e.split(":");return this.$proxyManager.getViews().find((e=>e.getProxyName()===t&&(!a||e.getName()===a)))},...(0,s.nv)("views",["updateLayout"])},updated(){this.$proxyManager.resizeAllViews()}},l={container:"LayoutView-container-_kxKm",grid:"LayoutView-grid-T7vhg",viewContainer:"LayoutView-viewContainer-kpqmi"},c=a(571),d=a(3),u=a.n(d),p=a(627);e=a.hmd(e);var m={},v=!1;e.hot,e.hot;var g=(0,c.Z)(r,i,[],!1,(function(e){v||(m.$style=l.locals||l,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return m.$style}}))}),null,null);u()(g,{VContainer:p.Z}),g.options.__file="src/components/core/LayoutView/index.vue";var h=g.exports},169:function(e,t,a){"use strict";a.d(t,{Z:function(){return w}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{flat:""}},[a("v-card-title",[a("span",{staticClass:"body-2"},[e._v("Enter your raw data specs below:")])]),e._v(" "),a("v-card-text",[a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs3:""}},[e._v("Filename:")]),e._v(" "),a("v-flex",{staticClass:"body-1",attrs:{xs9:""}},[e._v(e._s(e.file.name))])],1),e._v(" "),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs3:""}},[e._v("File size:")]),e._v(" "),a("v-flex",{staticClass:"body-1",attrs:{xs9:""}},[e._v(e._s(e.file.size)+" bytes")])],1),e._v(" "),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs3:""}},[e._v("Data type:")]),e._v(" "),a("v-flex",{staticClass:"body-1",attrs:{xs9:""}},[a("v-select",{attrs:{items:e.allDataTypes,"item-text":"label","item-value":"label","single-line":"","return-object":""},model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs3:""}},[e._v("Dimensions:")]),e._v(" "),e._l(3,(function(t){return a("v-flex",{key:t,staticClass:"body-1",attrs:{xs3:""}},[a("v-text-field",{attrs:{type:"number",min:"1",max:e.file.size},model:{value:e.dimensions[t-1],callback:function(a){e.$set(e.dimensions,t-1,a)},expression:"dimensions[i-1]"}})],1)}))],2),e._v(" "),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"body-2",attrs:{xs3:""}},[e._v("Spacing:")]),e._v(" "),e._l(3,(function(t){return a("v-flex",{key:t,staticClass:"body-1",attrs:{xs3:""}},[a("v-text-field",{attrs:{type:"number",min:"1",max:e.file.size},model:{value:e.spacing[t-1],callback:function(a){e.$set(e.spacing,t-1,a)},expression:"spacing[i-1]"}})],1)}))],2),e._v(" "),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs3:""}},[e._v("Effective size:")]),e._v(" "),a("v-flex",{attrs:{xs3:""}},[e._v(e._s(e.effectiveSize))]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[e.effectiveSize!==e.file.size?a("span",{staticClass:"red--text"},[e._v("\n            Effective size does not match total size!\n          ")]):a("span",{staticClass:"teal--text"},[e._v("Effective size matches file size")])])],1)],1)],1)],1)};i._withStripped=!0;const s=[{label:"Integer 8",constructor:Int8Array,size:1},{label:"Unsigned Integer 8",constructor:Uint8Array,size:1},{label:"Integer 16",constructor:Int16Array,size:2},{label:"Unsigned Integer 16",constructor:Uint16Array,size:2},{label:"Integer 32",constructor:Int32Array,size:4},{label:"Unsigned Integer 32",constructor:Uint32Array,size:4},{label:"Float",constructor:Float32Array,size:4},{label:"Double",constructor:Float64Array,size:8}];function n(){this.effectiveSize===this.file.size?this.$emit("change",{dimensions:this.dimensions,spacing:this.spacing,dataType:this.dataType,effectiveSize:this.effectiveSize}):this.$emit("change",null)}var o={name:"RawFileReader",props:{file:{type:File,required:!0}},data:()=>({allDataTypes:s,dataType:s[0],dimensions:[1,1,1],spacing:[1,1,1]}),watch:{dimensions:n,spacing:n,dataType:n},computed:{effectiveSize(){return this.dimensions.reduce(((e,t)=>e*t),1)*this.dataType.size}}},r={toolbarButton:"RawFileReader-toolbarButton-Qwep7",overlay:"RawFileReader-overlay-EEhkR",overlayHidden:"RawFileReader-overlayHidden-A2Yvq",overlayText:"RawFileReader-overlayText-iq_lG"},l=a(571),c=a(3),d=a.n(c),u=a(591),p=a(597),m=a(627),v=a(598),g=a(601),h=a(630),y=a(624);e=a.hmd(e);var f={},b=!1;e.hot,e.hot;var x=(0,l.Z)(o,i,[],!1,(function(e){b||(f.$style=r.locals||r,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return f.$style}}))}),null,null);d()(x,{VCard:u.Z,VCardText:p.ZB,VCardTitle:p.EB,VContainer:m.Z,VFlex:v.Z,VLayout:g.Z,VSelect:h.Z,VTextField:y.Z}),x.options.__file="src/components/core/RawFileReader/index.vue";var w=x.exports},312:function(e,t,a){"use strict";a.d(t,{Z:function(){return I}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(e.dialogType,{tag:"component",attrs:{value:e.showDialog,"max-width":"60%"},on:{input:e.close}},[e.screenshot?a("v-card",{attrs:{flat:""}},[a("v-card-title",[e._v("Save Screenshot")]),e._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",e._b({},"v-flex",e.flexLayout,!1),[a("v-img",{class:e.$style.imagePreview,attrs:{src:e.imageUrl,contain:"",height:e.smallScreen?"125px":"250px"}})],1),e._v(" "),a("v-flex",e._b({},"v-flex",e.flexLayout,!1),[a("v-container",{class:{"pa-1":e.smallScreen}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs9:""}},[a("v-text-field",{attrs:{label:"Filename"},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.save(),e.close()}},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-select",{attrs:{label:"File type","hide-details":"","single-line":"",items:e.fileTypes},model:{value:e.fileType,callback:function(t){e.fileType=t},expression:"fileType"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-checkbox",{attrs:{label:"Transparent background"},model:{value:e.transparentBackground,callback:function(t){e.transparentBackground=t},expression:"transparentBackground"}})],1)],1)],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{text:"",color:"red"},nativeOn:{click:function(t){return e.close.apply(null,arguments)}}},[a("span",[e._v("Cancel")])]),e._v(" "),a("v-btn",{attrs:{color:"secondary"},nativeOn:{click:function(t){e.save(),e.close()}}},[a("span",[e._v("Save")])]),e._v(" "),a("v-btn",{attrs:{color:"primary",href:e.imageUrl,download:e.filename+e.fileType},nativeOn:{click:function(t){return e.close.apply(null,arguments)}}},[a("span",[e._v("Download")])])],1)],1):e._e()],1)};i._withStripped=!0;var s=a(602),n=a(679),o=a(612);const r=[".png",".jpeg"];function l(){const e=new Image;e.addEventListener("load",(()=>{const t=this.canvas.getContext("2d");t.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.width=e.width,this.canvas.height=e.height,this.transparentBackground||(t.fillStyle=this.backgroundToFillStyle(this.screenshot.viewData.background),t.fillRect(0,0,this.canvas.width,this.canvas.height)),t.drawImage(e,0,0);const a=`image/${this.fileType.substr(1)}`;this.imageUrl=this.canvas.toDataURL(a)})),e.src=this.screenshot.imgSrc}var c={name:"ScreenshotDialog",components:{VBottomSheet:n.Z,VDialog:o.Z},data:()=>({filename:"",imageUrl:"",transparentBackground:!1,fileType:"",fileTypes:r}),computed:{smallScreen(){return this.$vuetify.breakpoint.smAndDown},landscapeScreen(){const{width:e,height:t}=this.$vuetify.breakpoint;return e>t},dialogType(){return this.smallScreen?"v-bottom-sheet":"v-dialog"},flexLayout(){return{[!this.smallScreen||this.landscapeScreen?"xs6":"xs12"]:!0}},...(0,s.rn)({screenshot:e=>e.pendingScreenshot,showDialog:e=>e.screenshotDialog})},watch:{transparentBackground:l,fileType:l,showDialog(e){e&&(this.filename="Untitled",this.fileType=".png",this.generateImage())}},methods:{generateImage:l,backgroundToFillStyle:function(e){if(e.startsWith("linear-gradient(")){const t=e.substring(e.indexOf("(")+1,e.indexOf(")")).split(","),a=this.canvas.getContext("2d").createLinearGradient(0,0,0,this.canvas.height);return a.addColorStop(0,t[0]),a.addColorStop(1,t[1]),a}return e},save:function(){this.$emit("save",this.screenshot.viewName,{image:this.imageUrl,filename:this.filename+this.fileType})},...(0,s.nv)({close:"closeScreenshotDialog"})},created(){this.canvas=document.createElement("canvas")}},d={imagePreview:"ScreenshotDialog-imagePreview-UShNL"},u=a(571),p=a(3),m=a.n(p),v=a(572),g=a(591),h=a(597),y=a(603),f=a(627),b=a(598),x=a(674),w=a(601),_=a(630),S=a(643),P=a(624);e=a.hmd(e);var C={},k=!1;e.hot,e.hot;var V=(0,u.Z)(c,i,[],!1,(function(e){k||(C.$style=d.locals||d,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return C.$style}}))}),null,null);m()(V,{VBtn:v.Z,VCard:g.Z,VCardActions:h.h7,VCardTitle:h.EB,VCheckbox:y.Z,VContainer:f.Z,VFlex:b.Z,VImg:x.Z,VLayout:w.Z,VSelect:_.Z,VSpacer:S.Z,VTextField:P.Z}),V.options.__file="src/components/core/Screenshots/ScreenshotDialog/index.vue";var I=V.exports},311:function(e,t,a){"use strict";a.d(t,{Z:function(){return P}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.$style.container},[a("v-toolbar",{staticClass:"flex-grow-0",attrs:{color:"transparent",flat:""}},[a("v-toolbar-title",[e._v("Screenshots")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$emit("close")}}},[a("v-icon",[e._v("mdi-arrow-right")])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.atLeastOneScreenshot,expression:"!atLeastOneScreenshot"}],class:e.$style.emptyState},[a("v-icon",{attrs:{large:""}},[e._v("mdi-image-multiple")]),e._v(" "),a("span",{staticClass:"subtitle-1 grey--text text--darken-1"},[e._v("No screenshots yet!")]),e._v(" "),a("v-btn",{staticClass:"mt-4",attrs:{disabled:!e.activeView},on:{click:e.takeScreenshot}},[e._v("\n      Capture Active View\n    ")])],1),e._v(" "),a("v-list",{directives:[{name:"show",rawName:"v-show",value:e.atLeastOneScreenshot,expression:"atLeastOneScreenshot"}]},e._l(Object.keys(e.screenshots),(function(t){return a("v-list-group",{key:t,attrs:{"prepend-icon":"mdi-folder","no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",[e._v("\n            "+e._s(t)+" ("+e._s(e.screenshots[t].length)+")\n          ")])],1)]},proxy:!0}],null,!0)},[e._v(" "),e._l(e.screenshots[t],(function(i,s){return a("v-tooltip",{key:s,attrs:{left:"",disabled:e.smallScreen,"content-class":e.$style.hoverTooltip},scopedSlots:e._u([{key:"activator",fn:function(n){var o=n.on;return[a("v-list-item",e._g({attrs:{link:""},on:{click:function(a){return e.viewScreenshot(t,s)}}},o),[a("v-list-item-title",{class:e.$style.filename,attrs:{title:i.filename}},[e._v("\n              "+e._s(i.filename)+"\n            ")]),e._v(" "),a("v-list-item-action",{class:e.$style.action},[a("v-btn",{attrs:{icon:"",href:i.image,download:i.filename},on:{click:function(e){e.stopPropagation()}}},[a("v-icon",[e._v("mdi-download")])],1)],1),e._v(" "),a("v-list-item-action",{class:e.$style.action},[a("v-btn",{attrs:{icon:""},on:{click:[function(a){return e.deleteScreenshot(t,s)},function(e){e.stopPropagation()}]}},[a("v-icon",[e._v("mdi-delete")])],1)],1)],1)]}}],null,!0)},[e._v(" "),a("img",{class:e.$style.hoverImage,attrs:{src:i.image}})])}))],2)})),1),e._v(" "),a("screenshot-dialog",{on:{save:e.addScreenshot}})],1)};i._withStripped=!0;var s=a(602);var n={name:"Screenshots",components:{ScreenshotDialog:a(312).Z},data:()=>({screenshots:{},activeViewId:-1}),computed:{atLeastOneScreenshot(){const e=Object.keys(this.screenshots);for(let t=0;t<e.length;++t){const a=this.screenshots[e[t]];if(a&&a.length)return!0}return!1},smallScreen(){return this.$vuetify.breakpoint.smAndDown},activeView(){return this.$proxyManager.getProxyById(this.activeViewId)}},proxyManagerHooks:{onActiveViewChange(e){this.activeViewId=e.getProxyId()}},mounted(){const e=this.$proxyManager.getActiveView();e&&(this.activeViewId=e.getProxyId())},methods:{addScreenshot:function(e,t){e in this.screenshots||this.$set(this.screenshots,e,[]),this.screenshots[e].push(t);const a=this.getTotalCount();this.$emit("screenshot-count",a)},deleteScreenshot:function(e,t){this.screenshots[e]&&this.screenshots[e].splice(t,1);const a=this.getTotalCount();this.$emit("screenshot-count",a)},viewScreenshot:function(e,t){if(this.screenshots[e]){const a=this.screenshots[e][t],i=new Image;i.src=a.image;const s=window.open("","_blank");s.document.write(i.outerHTML),s.document.title=a.filename,window.focus()}},getTotalCount:function(){return Object.values(this.screenshots).map((e=>e.length)).reduce(((e,t)=>e+t))},...(0,s.nv)({takeScreenshot(e){return e("takeScreenshot",this.activeView)}})}},o={container:"Screenshots-container-QUtU6",emptyState:"Screenshots-emptyState-A_kb2",filename:"Screenshots-filename-_4xgf",action:"Screenshots-action-BSST7",hoverTooltip:"Screenshots-hoverTooltip-WDQlH",hoverImage:"Screenshots-hoverImage-_Qhil"},r=a(571),l=a(3),c=a.n(l),d=a(572),u=a(600),p=a(637),m=a(638),v=a(631),g=a(632),h=a(636),y=a(643),f=a(673),b=a(676),x=a(644);e=a.hmd(e);var w={},_=!1;e.hot,e.hot;var S=(0,r.Z)(n,i,[],!1,(function(e){_||(w.$style=o.locals||o,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return w.$style}}))}),null,null);c()(S,{VBtn:d.Z,VIcon:u.Z,VList:p.Z,VListGroup:m.Z,VListItem:v.Z,VListItemAction:g.Z,VListItemContent:h.km,VListItemTitle:h.V9,VSpacer:y.Z,VToolbar:f.Z,VToolbarTitle:b.qW,VTooltip:x.Z}),S.options.__file="src/components/core/Screenshots/index.vue";var P=S.exports},313:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.fileGenerationInProgress?e.$style.visible:e.$style.hidden},[a("v-progress-circular",{attrs:{indeterminate:"",color:"green",size:70,width:7}}),e._v(" "),a("label",{class:e.$style.label},[e._v("\n    Compressing..."),a("br"),e._v(e._s(e.fileName)+"\n  ")])],1)};i._withStripped=!0;var s={name:"StateFileGenerator",computed:(0,a(602).rn)({proxyManager:"proxyManager",fileGenerationInProgress:e=>!!e.savingStateName,fileName:"savingStateName"})},n={hidden:"StateFileGenerator-hidden-W1iZI",visible:"StateFileGenerator-visible-mpB0c",label:"StateFileGenerator-label-kWzey"},o=a(571),r=a(3),l=a.n(r),c=a(589);e=a.hmd(e);var d={},u=!1;e.hot,e.hot;var p=(0,o.Z)(s,i,[],!1,(function(e){u||(d.$style=n.locals||n,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return d.$style}}))}),null,null);l()(p,{VProgressCircular:c.Z}),p.options.__file="src/components/core/StateFileGenerator/index.vue";var m=p.exports},310:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var i=function(){var e,t=this,a=t.$createElement,i=t._self._c||a;return i("div",{class:(e={},e[t.$style.sheet]=!0,e[t.$style.visible]=t.value,e),style:{top:t.sheetTop+"px"}},[i("div",{ref:"slotWrapper",staticClass:"grey darken-3 white--text",class:t.$style.slotWrapper,style:{transform:"translateY("+(t.visible?0:"100%")+")"}},[t._t("default")],2)])};i._withStripped=!0;var s={props:{value:{type:Boolean,default:!1}},data:()=>({sheetTop:0,visible:!1}),methods:{onMouseDown:function(e){this.$el.contains(e.target)||this.$emit("input",!1)},updateHeight:function(){this.sheetTop=-this.$refs.slotWrapper.offsetHeight}},watch:{value:function(e,t){e&&!t?(document.addEventListener("mousedown",this.onMouseDown,!0),this.$nextTick((()=>{this.updateHeight(),this.visible=!0}))):(document.removeEventListener("mousedown",this.onMouseDown,!0),this.visible=!1)}},mounted(){window.addEventListener("resize",this.updateHeight)},beforeDestroy(){window.removeEventListener("resize",this.updateHeight)}},n={sheet:"ToolbarSheet-sheet-xndXH",slotWrapper:"ToolbarSheet-slotWrapper-NSeT7",visible:"ToolbarSheet-visible-dRAdL"},o=a(571);e=a.hmd(e);var r={},l=!1;e.hot,e.hot;var c=(0,o.Z)(s,i,[],!1,(function(e){l||(r.$style=n.locals||n,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return r.$style}}))}),null,null);c.options.__file="src/components/core/ToolbarSheet/index.vue";var d=c.exports},309:function(e,t,a){"use strict";a.d(t,{Z:function(){return M}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{class:e.$style.container,attrs:{fluid:""}},[a("v-layout",{class:e.$style.floatToolbar,attrs:{column:""}},[a("v-tooltip",{attrs:{left:"",disabled:e.smallScreen},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{icon:"",dark:""},on:{click:function(t){return e.resetCamera()}}},i),[a("v-icon",[e._v("mdi-image-filter-center-focus")])],1)]}}])},[a("span",{staticClass:"pv-no-select"},[e._v("Reset camera")])]),e._v(" "),a("v-tooltip",{attrs:{left:"",disabled:e.smallScreen},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{icon:"",dark:""},on:{click:function(t){return e.rollLeft()}}},i),[a("v-icon",[e._v("mdi-rotate-left")])],1)]}}])},[a("span",{staticClass:"pv-no-select"},[e._v("Rotate camera left 90")])]),e._v(" "),a("v-tooltip",{attrs:{left:"",disabled:e.smallScreen},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{icon:"",dark:""},on:{click:function(t){return e.rollRight()}}},i),[a("v-icon",[e._v("mdi-rotate-right")])],1)]}}])},[a("span",{staticClass:"pv-no-select"},[e._v("Rotate camera right 90")])]),e._v(" "),"View3D"===e.type?a("v-tooltip",{attrs:{left:"",disabled:e.smallScreen},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{icon:"",dark:""},on:{click:function(t){return e.updateOrientation("x")}}},i),[e._v("\n          "+e._s(e.orientationLabels[0])+"\n        ")])]}}],null,!1,2132146526)},[a("span",{staticClass:"pv-no-select"},[e._v("Reset Camera to Orientation "+e._s(e.orientationLabels[0]))])]):e._e(),e._v(" "),"View3D"===e.type?a("v-tooltip",{attrs:{left:"",disabled:e.smallScreen},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{icon:"",dark:""},on:{click:function(t){return e.updateOrientation("y")}}},i),[e._v("\n          "+e._s(e.orientationLabels[1])+"\n        ")])]}}],null,!1,1991408638)},[a("span",{staticClass:"pv-no-select"},[e._v("Reset Camera to Orientation "+e._s(e.orientationLabels[1]))])]):e._e(),e._v(" "),"View3D"===e.type?a("v-tooltip",{attrs:{left:"",disabled:e.smallScreen},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{icon:"",dark:""},on:{click:function(t){return e.updateOrientation("z")}}},i),[e._v("\n          "+e._s(e.orientationLabels[2])+"\n        ")])]}}],null,!1,617031326)},[a("span",{staticClass:"pv-no-select"},[e._v("Reset Camera to Orientation "+e._s(e.orientationLabels[2]))])]):e._e()],1),e._v(" "),a("v-layout",{attrs:{column:"","fill-height":""}},[a("v-flex",{staticClass:"js-view",class:e.$style.vtkView,style:{background:e.backgroundColor},attrs:{"fill-height":""},on:{mousedown:function(t){return e.view.activate()}}}),e._v(" "),e.isActive?a("div",{class:e.$style.activeView}):e._e(),e._v(" "),a("div",{class:e.$style.toolbarWrapper},[a("toolbar-sheet",{model:{value:e.backgroundSheet,callback:function(t){e.backgroundSheet=t},expression:"backgroundSheet"}},[a("v-container",{staticClass:"mr-0",attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:""}},[a("v-spacer"),e._v(" "),a("palette-picker",{attrs:{size:24,palette:e.palette,value:e.backgroundColor},on:{input:e.changeBackgroundColor}})],1)],1)],1),e._v(" "),a("v-toolbar",{class:e.$style.smallToolbar,attrs:{dark:"",height:"45px"}},[a("v-select",{class:e.$style.viewTypeSelector,attrs:{dense:"",flat:"","hide-details":"",items:e.viewTypeItems,value:e.viewType},on:{change:e.changeViewType}}),e._v(" "),a("v-spacer"),e._v(" "),"View3D"===e.type?a("v-tooltip",{attrs:{top:"",disabled:e.smallScreen||e.viewPointMenuVisible},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-menu",{attrs:{"offset-y":"",top:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:e.cameraViewPoints.length,expression:"cameraViewPoints.length"}],class:e.$style.button,attrs:{icon:"",disabled:e.viewPointMenuVisible}},Object.assign({},i,s)),[a("v-icon",[e._v("mdi-camera-switch")])],1)]}}],null,!0),model:{value:e.viewPointMenuVisible,callback:function(t){e.viewPointMenuVisible=t},expression:"viewPointMenuVisible"}},[e._v(" "),a("v-list",e._l(e.cameraViewPoints,(function(t,i){return a("v-list-item",{key:i,on:{click:function(a){return e.changeCameraViewPoint(t)}}},[a("v-list-item-title",[e._v(e._s(t))])],1)})),1)],1)]}}],null,!1,205776964)},[e._v(" "),a("span",{staticClass:"pv-no-select"},[e._v("Change View Point")])]):e._e(),e._v(" "),a("v-tooltip",{attrs:{top:"",disabled:e.smallScreen},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({class:e.$style.button,attrs:{icon:"",disabled:e.backgroundSheet||!e.view},on:{click:function(t){e.backgroundSheet=!e.backgroundSheet}}},i),[a("v-icon",[e._v("mdi-palette")])],1)]}}])},[a("span",{staticClass:"pv-no-select"},[e._v("Background color")])]),e._v(" "),a("v-tooltip",{attrs:{top:"",disabled:e.smallScreen},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({class:e.$style.button,attrs:{icon:""},on:{click:function(t){return e.screenCapture()}}},i),[a("v-icon",[e._v("mdi-camera-plus")])],1)]}}])},[a("span",{staticClass:"pv-no-select"},[e._v("Screenshot")])]),e._v(" "),!e.smallScreen&&e.singleViewButton?a("v-tooltip",{key:"singleView",attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({class:e.$style.button,attrs:{icon:""},on:{click:function(t){return e.singleView(e.layoutIndex)}}},i),[a("v-icon",[e._v("mdi-fullscreen")])],1)]}}],null,!1,3656610843)},[a("span",{staticClass:"pv-no-select"},[e._v("Single view")])]):e._e(),e._v(" "),!e.smallScreen&&e.flipViewButton?a("v-tooltip",{key:"flipView",attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({class:e.$style.button,attrs:{icon:""},on:{click:function(t){return e.splitView(e.layoutIndex)}}},i),[a("v-icon",[e._v("mdi-flip-horizontal")])],1)]}}],null,!1,1302128140)},[a("span",{staticClass:"pv-no-select"},[e._v("Split view")])]):e._e(),e._v(" "),!e.smallScreen&&e.quadViewButton?a("v-tooltip",{key:"quadView",attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({class:e.$style.button,attrs:{icon:""},on:{click:function(t){return e.quadView(e.layoutIndex)}}},i),[a("v-icon",[e._v("mdi-widgets")])],1)]}}],null,!1,1168904256)},[a("span",{staticClass:"pv-no-select"},[e._v("Quad view")])]):e._e()],1)],1)],1)],1)};i._withStripped=!0;var s=a(602),n=a(438),o=a(439),r=a(36),l=a(310),c=a(165),d=a(27);var u={name:"VtkView",components:{PalettePicker:r.Z,ToolbarSheet:l.Z},props:{layoutIndex:{default:0,type:Number},layoutCount:{default:1,type:Number},viewType:{default:"",type:String},backgroundColor:{default:"#000",type:String}},data:()=>({internalViewId:-1,internalIsActive:!1,palette:c.qg,backgroundSheet:!1,inAnimation:!1,viewPointMenuVisible:!1}),computed:{...(0,s.rn)("views",{view(e){return this.$proxyManager.getProxyById(e.viewTypeToId[this.viewType])},axisVisible:e=>e.axisVisible,axisType:e=>e.axisType,axisPreset:e=>e.axisPreset,viewOrientation:e=>e.viewOrientation,viewTypeItems:e=>Object.entries(e.viewTypes).map((([e,t])=>({text:t,value:e})))}),...(0,s.Se)(["cameraViewPoints"]),type(){return this.viewType.split(":")[0]},name(){return this.viewType.split(":")[1]},orientationLabels(){return"lps"===this.axisPreset?["L","P","S"]:["X","Y","Z"]},smallScreen(){return this.$vuetify.breakpoint.width<n.u3.md},singleViewButton(){return this.layoutCount>1},flipViewButton(){return 1===this.layoutCount||4===this.layoutCount&&this.layoutIndex%2==1},quadViewButton(){return 2===this.layoutCount&&1===this.layoutIndex},isActive(){return this.internalIsActive||this.view===this.$proxyManager.getActiveView()}},watch:{view(e){this.tryMountView(e)}},proxyManagerHooks:{onActiveViewChange(e){this.internalIsActive=e===this.view},onActiveSourceChange(e){if(e&&"TrivialProducer"===e.getProxyName()&&this.view.bindRepresentationToManipulator){const t=this.$proxyManager.getRepresentation(e,this.view);this.view.bindRepresentationToManipulator(t),this.view.updateWidthHeightAnnotation()}},onProxyRegistrationChange(){const e=this.$proxyManager.getSources().find((e=>e.getDataset().isA&&e.getDataset().isA("vtkImageData"))),t=this.$proxyManager.getViews();for(let a=0;a<t.length;a++){const i=t[a];i.setCornerAnnotation("se",""),-1!==i.getProxyName().indexOf("2D")&&e?i.setCornerAnnotations(o.jB,!0):i.setCornerAnnotation("nw","")}}},mounted(){this.view&&this.tryMountView(this.view),window.addEventListener("resize",this.resizeCurrentView),this.resizeCurrentView()},beforeDestroy(){this.view&&this.unmountView(this.view),window.removeEventListener("resize",this.resizeCurrentView)},beforeUpdate(){this.view||this.changeViewType(o.H_)},methods:{tryMountView(e){if(this.internalViewId>-1){const e=this.$proxyManager.getProxyById(this.internalViewId);this.unmountView(e),this.internalViewId=-1}if(e){this.internalViewId=e.getProxyId(),e.setContainer(this.$el.querySelector(".js-view")),e.setOrientationAxesVisibility(this.axisVisible);const t=e.getReferenceByName("widgetManager");t&&(t.setUseSvgLayer(!0),t.getPickingEnabled()||t.disablePicking())}},unmountView(e){const t=e.getReferenceByName("widgetManager");t&&t.setUseSvgLayer(!1),e.setContainer(null)},changeViewType(e){this.swapViews({index:this.layoutIndex,viewType:e})},getAvailableActions(){return{single:this.layoutCount>1,split:this.layoutCount<4}},resetCamera(){this.view&&this.view.resetCamera()},rollLeft(){if(this.view){this.view.setAnimation(!0,this);let e=0,t=null;t=setInterval((()=>{e<90?(e+=2,this.view.rotate(2)):(clearInterval(t),this.view.setAnimation(!1,this))}),1)}},rollRight(){if(this.view){this.view.setAnimation(!0,this);let e=0,t=null;t=setInterval((()=>{e<90?(e+=2,this.view.rotate(-2)):(clearInterval(t),this.view.setAnimation(!1,this))}),1)}},updateOrientation(e){this.view&&!this.inAnimation&&(this.inAnimation=!0,(0,d.XC)(this.view,this.viewOrientation,e,"View3D"===this.type?100:0).then((()=>{this.inAnimation=!1})))},resizeCurrentView(){this.view&&this.view.resize()},screenCapture(){this.takeScreenshot(this.view)},changeBackgroundColor(e){this.changeBackground({viewType:this.viewType,color:e})},...(0,s.nv)("views",["changeBackground","swapViews","singleView","splitView","quadView"]),...(0,s.nv)(["takeScreenshot","changeCameraViewPoint"])}},p={container:"VtkView-container-xoSjw",vtkView:"VtkView-vtkView-_T34c",viewTypeSelector:"VtkView-viewTypeSelector-Y_5cJ",floatToolbar:"VtkView-floatToolbar-_eQCk",toolbarWrapper:"VtkView-toolbarWrapper-_mikW",button:"VtkView-button-B4bSE",smallToolbar:"VtkView-smallToolbar-ZdwuJ",activeView:"VtkView-activeView-ES8oq"},m=a(571),v=a(3),g=a.n(v),h=a(572),y=a(627),f=a(598),b=a(600),x=a(601),w=a(637),_=a(631),S=a(636),P=a(628),C=a(630),k=a(643),V=a(673),I=a(644);e=a.hmd(e);var T={},$=!1;e.hot,e.hot;var D=(0,m.Z)(u,i,[],!1,(function(e){$||(T.$style=p.locals||p,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return T.$style}}))}),null,null);g()(D,{VBtn:h.Z,VContainer:y.Z,VFlex:f.Z,VIcon:b.Z,VLayout:x.Z,VList:w.Z,VListItem:_.Z,VListItemTitle:S.V9,VMenu:P.Z,VSelect:C.Z,VSpacer:k.Z,VToolbar:V.Z,VTooltip:I.Z}),D.options.__file="src/components/core/VtkView/index.vue";var M=D.exports},158:function(e,t,a){"use strict";a.d(t,{Z:function(){return w}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{class:e.$style.container},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("source-select",{attrs:{label:"Target volume",filterFunc:e.filterImages,bindToActiveSource:"",hideIfOneDataset:""},on:{input:e.setTargetVolume}})],1)],1)],1),e._v(" "),a("v-container",{class:e.$style.container},[a("v-layout",{attrs:{wrap:"","align-center":""}},[e.enabled?[a("v-btn",{attrs:{text:""},on:{click:e.disable}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-crop-free")]),e._v("\n          Hide\n        ")],1)]:[a("v-btn",{attrs:{text:"",disabled:!e.canCrop},on:{click:e.enable}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-crop")]),e._v("\n          Crop\n        ")],1)],e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{disabled:!e.canReset,text:""},on:{click:e.reset}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-replay")]),e._v("\n        Reset\n      ")],1)],2)],1)],1)};i._withStripped=!0;var s=a(602),n=a(81),o=a(27),r={name:"CropTool",components:{SourceSelect:n.Z},props:["enabled"],data:()=>({targetVolumeId:-1,widgetId:-1,canReset:!1}),computed:{targetVolume(){return this.$proxyManager.getProxyById(this.targetVolumeId)},cropProxy(){return this.$proxyManager.getProxyById(this.widgetId)},canCrop(){return this.targetVolumeId>-1},...(0,s.rn)("widgets",{allCropStates:"croppingStates"})},watch:{enabled(e){if(e){const e=this.getCropFilter(this.targetVolume);let t=this.cropProxy;t||(t=this.$proxyManager.getProxyInGroup("Widgets").find((e=>"Crop"===e.getProxyName())),t||(t=this.$proxyManager.createProxy("Widgets","Crop")),this.widgetId=t.getProxyId());const a=t.getWidget(),i=t.getWidgetState();a.setFaceHandlesEnabled(!1),a.setEdgeHandlesEnabled(!1);const s=this.targetVolume.getDataset();if(a.copyImageDataDescription(s),a.placeWidget(s.getBounds()),e.isResetAvailable()){i.getCroppingPlanes().setPlanes(e.getCroppingPlanes())}const n=i.getCroppingPlanes();this.stateSub.sub(n.onModified((()=>{const t=n.getPlanes();e.setCroppingPlanes(t),this.canReset=e.isResetAvailable(),this.storeCropState(this.targetVolumeId,t)}))),t.addToViews()}else this.cropProxy.removeFromViews(),this.$proxyManager.deleteProxy(this.cropProxy),this.widgetId=-1,this.stateSub.unsub()},targetVolumeId(e){if(this.enabled&&this.disable(),this.canReset=!1,-1!==e){const e=this.getCropFilter(this.targetVolume);this.canReset=e.isResetAvailable()}}},mounted(){this.stateSub=(0,o.y5)()},beforeDestroy(){this.stateSub.unsub()},methods:{filterImages:e=>"TrivialProducer"===e.getProxyName()&&"vtkImageData"===e.getType(),getCropFilter(e){return(0,o.aX)(this.$proxyManager,e)},setTargetVolume(e){this.targetVolumeId=e},enable(){this.$emit("enable",!0)},disable(){this.$emit("enable",!1)},reset(){if(this.targetVolume){const e=this.getCropFilter(this.targetVolume);if(e.reset(),this.canReset=!1,this.cropProxy){this.cropProxy.getWidgetState().getCroppingPlanes().setPlanes(e.getCroppingPlanes())}}},storeCropState(e,t){this.setCroppingState({datasetId:e,planes:t})},...(0,s.nv)("widgets",["setCroppingState"])}},l={container:"CropTool-container-O3Hvl"},c=a(571),d=a(3),u=a.n(d),p=a(572),m=a(627),v=a(598),g=a(600),h=a(601),y=a(643);e=a.hmd(e);var f={},b=!1;e.hot,e.hot;var x=(0,c.Z)(r,i,[],!1,(function(e){b||(f.$style=l.locals||l,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return f.$style}}))}),null,null);u()(x,{VBtn:p.Z,VContainer:m.Z,VFlex:v.Z,VIcon:g.Z,VLayout:h.Z,VSpacer:y.Z}),x.options.__file="src/components/tools/CropTool/index.vue";var w=x.exports},157:function(e,t,a){"use strict";a.d(t,{Z:function(){return L}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{class:e.$style.container},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("source-select",{attrs:{label:"Target Dataset",filterFunc:e.filterImageData,bindToActiveSource:""},on:{input:e.setTargetDataset}})],1)],1),e._v(" "),a("v-card",{attrs:{flat:""}},[a("div",{class:e.$style.heading},[a("v-layout",{attrs:{"align-center":""}},[a("v-flex",{attrs:{xs10:""}},[a("span",{staticClass:"body-2"},[e._v("Tool List")])]),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-btn-toggle",{class:e.$style.toolList,attrs:{value:e.activeToolIndex},on:{change:e.toggleActiveTool}},e._l(e.uiToolList,(function(t){return a("v-tooltip",{key:t.name,attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",e._g({class:e.$style.toolButton,attrs:{small:"",text:"",disabled:-1===e.targetPid}},s),[a("svg-icon",{class:e.$style.toolIcon,attrs:{icon:t.icon}})],1)]}}],null,!0)},[e._v("\n                "+e._s(t.name)+"\n              ")])})),1)],1)],1)],1),e._v(" "),a("v-divider",{class:e.$style.divider}),e._v(" "),a("div",{class:e.$style.fullWidth},[e.tools.length>0?e._l(e.tools,(function(t,i){return a(t.component,{key:i,tag:"component",attrs:{targetPid:e.targetPid,"tool-data":t.data},on:{remove:function(t){return e.removeTool(i)},saveData:function(t){return e.saveToolData(i,t)}},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",{class:e.$style.row},[a("span",{class:e.$style.rowAvatar},[a("svg-icon",{class:e.$style.toolIcon,attrs:{icon:t.icon}})],1),e._v(" "),a("div",{class:e.$style.rowContent},[a("span",{class:e.$style.rowContentName,attrs:{title:i.toolName}},[e._v("\n                  "+e._s(i.toolName||t.name)+"\n                ")]),e._v(" "),e._l(i.labels,(function(t){return a("span",{key:t,class:e.$style.rowContentDetails},[e._v("\n                  "+e._s(t)+": "+e._s(i.measurements[t])+"\n                ")])}))],2),e._v(" "),a("div",{class:e.$style.action},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",e._g({attrs:{small:"",icon:""},on:{click:function(a){return e.jumpTo(t.data.axis,t.data.lockToSlice)}}},s),[a("v-icon",[e._v("mdi-crosshairs-gps")])],1)]}}],null,!0)},[e._v("\n                  Jump to slice\n                ")])],1),e._v(" "),a("div",{class:e.$style.action},[a("pop-up",{scopedSlots:e._u([{key:"trigger",fn:function(){return[a("v-btn",{attrs:{small:"",icon:""}},[a("v-icon",[e._v("mdi-dots-vertical")])],1)]},proxy:!0},{key:"popup",fn:function(s){var n=s.close;return[a("v-container",{class:[e.$style.container,e.$style.popup],attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Name",placeholder:t.name,value:i.toolName},on:{input:i.setName}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("div",{staticClass:"body-1"},[e._v("Tool color")]),e._v(" "),a("v-divider",{class:e.$style.divider}),e._v(" "),a("palette-picker",{staticClass:"pt-2",attrs:{palette:e.palette,size:28,value:i.color},on:{input:i.setColor}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("div",{staticClass:"body-1"},[e._v("Text Size")]),e._v(" "),a("v-divider",{class:e.$style.divider})],1),e._v(" "),a("v-flex",{attrs:{xs9:""}},[a("v-slider",{attrs:{min:"8",max:"32",step:"1",dirty:"","hide-details":"",value:i.textSize},on:{input:i.setTextSize}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{type:"number",min:"8",max:"32",step:"1",value:i.textSize},on:{input:i.setTextSize}})],1)],1),e._v(" "),a("v-divider",{class:e.$style.divider}),e._v(" "),a("v-layout",{attrs:{"align-center":""}},[a("v-flex",{staticClass:"text-center",attrs:{xs3:""}},[a("v-btn",{attrs:{icon:""},on:{click:n}},[a("v-icon",[e._v("mdi-content-save")])],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{staticClass:"text-center",attrs:{xs3:""}},[a("v-btn",{attrs:{icon:""},on:{click:function(e){i.remove(),n()}}},[a("v-icon",{attrs:{color:"red"}},[e._v("mdi-delete")])],1)],1)],1)],1)]}}],null,!0)})],1)])]}}],null,!0)})})):[a("div",{staticClass:"pt-2 body-1 teal--text text-center"},[e._v("No measurements yet")])],e._v(" "),a("v-btn",{attrs:{disabled:!e.targetProxy||!e.girderRest.user},on:{click:e.upload}},[e._v("\n          Upload\n        ")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.girderRest.user,expression:"!girderRest.user"}],staticClass:"body-2"},[e._v("Log in to upload")])],2)],1)],1)],1)};i._withStripped=!0;var s=a(602),n=a(80),o=a(36),r=a(81),l=a(75),c=a(56);function d(e,t){const a=Object.keys(t);for(let i=0;i<a.length;i++){const s=a[i],n=e[`get${s}Props`]();e[`set${s}Props`](Object.assign(n,t[s]))}}var u=(e,t={})=>({name:`${e}Tool`,props:{targetPid:{required:!0},toolData:{required:!0}},data(){return{name:`2D ${e}`,finalized:!1,lockToSlice:null,axis:null,widgetPid:-1,targetViewId:-1,color:c.wY[0],textSize:16,measurements:this.initialMeasurements(),measurementLabels:this.getMeasurementLabels()}},computed:{targetProxy(){return this.$proxyManager.getProxyById(this.targetPid)},targetView(){return this.$proxyManager.getProxyById(this.targetViewId)},widgetProxy(){return this.$proxyManager.getProxyById(this.widgetPid)},targetRepresentation(){return this.$proxyManager.getRepresentation(this.targetProxy,this.targetView)},displayedMeasurements(){return this.getDisplayedMeasurements()},...(0,s.rn)("widgets",{distanceUnitSymbol:e=>e.distanceUnitSymbol,distanceUnitFactor:e=>e.distanceUnitFactor})},watch:t.watch||{},proxyManagerHooks:{onProxyModified(e){if(e&&e===this.targetRepresentation&&this.widgetProxy&&(this.finalized?this.updateWidgetVisibility():null!==this.initialSlicePlacement&&Math.round(e.getSlice())!==this.initialSlicePlacement?this.emitRemove():this.updateOrientation()),e===this.widgetProxy){1===this.widgetProxy.getWidgetState().getHandleList().length&&-1===this.targetViewId&&null===this.initialSlicePlacement&&(this.targetViewId=this.mouseFocusedViewId,this.initialSlicePlacement=Math.round(this.targetRepresentation.getSlice()),this.constrainPickableViews(this.targetViewId)),!this.finalized&&this.donePlacing()&&(this.lockToSlice=this.initialSlicePlacement,this.axis=this.targetView.getAxis(),this.finalized=!0),this.updateMeasurements(),this.finalized&&this.saveData()}}},created(){this.initialSlicePlacement=null,this.mouseFocusedViewId=-1},mounted(){const t=this.$proxyManager.createProxy("Widgets",e);if(this.widgetPid=t.getProxyId(),this.toolData){const{name:e,lockToSlice:a,points:i,color:s,textSize:n,axis:o}=this.toolData;this.name=e,this.lockToSlice=a,this.color=s,this.textSize=n;const r=this.$proxyManager.getViews().filter((e=>e.isA("vtkView2DProxy"))).find((e=>e.getAxis()===o));if(!r)throw new Error("Cannot restore saved data: invalid axis");this.targetViewId=r.getProxyId();const l=t.getWidgetState();for(let e=0;e<i.length;e++){l.addHandle().setOrigin(...i[e])}this.finalized=!0}this.addWidgetToViews(t),this.finalized&&(this.updateMeasurements(),this.updateWidgetVisibility())},beforeDestroy(){this.remove()},methods:{addWidgetToViews(e){this.targetProxy&&e.getWidget().placeWidget(this.targetProxy.getDataset().getBounds());const t=(t,a,i)=>{this.setupViewWidget(i),i.setVisibility(this.axis===t.getAxis()),this.setWidgetColor(i,this.color),this.setWidgetTextSize(i,this.textSize);const s=t.getInteractor().onMouseMove((()=>{-1===this.targetViewId&&t.getProxyId()!==this.mouseFocusedViewId&&(this.mouseFocusedViewId=t.getProxyId(),this.updateOrientation(),i.getVisibility()||(i.setVisibility(!0),e.getAllViewWidgets().filter((e=>e!==i)).forEach((e=>e.setVisibility(!1))),a.renderWidgets(),this.$proxyManager.renderAllViews()))}),i.getPriority()+1);return a.grabFocus(i),a.enablePicking(),[s.unsubscribe]};e.addToViews(),e.executeViewFuncs({View3D:(e,t,a)=>{t.removeWidget(a)},View2D_X:t,View2D_Y:t,View2D_Z:t})},updateOrientation(){const e=this.targetView||this.$proxyManager.getProxyById(this.mouseFocusedViewId),t=this.$proxyManager.getRepresentation(this.targetProxy,e),a=Math.round(t.getSlice()),i=e.getAxis(),s=this.widgetProxy.getWidget().getManipulator(),n=[0,0,0];n[i]=1;const o=n.map((e=>e*a));s.setUserNormal(n),s.setUserOrigin(o)},toggleLock(){null===this.lockToSlice?this.lockToSlice=Math.round(this.targetRepresentation.getSlice()):this.lockToSlice=null,this.updateWidgetVisibility()},updateWidgetVisibility(){const e=this.widgetProxy.getViewWidget(this.targetView);if(!e)return;const t=Math.round(this.targetRepresentation.getSlice());e.setVisibility(null===this.lockToSlice||this.lockToSlice===t),this.renderViewWidgets()},remove(){this.widgetProxy&&(this.widgetProxy.releaseFocus(),this.widgetProxy.removeFromViews(),this.$proxyManager.deleteProxy(this.widgetProxy),this.widgetPid=-1)},setName(e){this.name=e,this.renderViewWidgets(),this.saveData()},setColor(e){this.color=e,this.widgetProxy.getAllViewWidgets().forEach((t=>this.setWidgetColor(t,e))),this.renderViewWidgets(),this.saveData()},setTextSize(e){this.textSize=e,this.widgetProxy.getAllViewWidgets().forEach((t=>this.setWidgetTextSize(t,e))),this.renderViewWidgets(),this.saveData()},renderViewWidgets(){this.$proxyManager.getViews().forEach((e=>{const t=e.getReferenceByName("widgetManager");t&&(t.renderWidgets(),e.renderLater())}))},saveData(){const e=this.widgetProxy.getWidgetState(),t={name:this.name,lockToSlice:this.lockToSlice,points:e.getHandleList().map((e=>e.getOrigin())),color:this.color,textSize:this.textSize,axis:this.targetView.getAxis()};this.$emit("saveData",t)},emitRemove(){this.$emit("remove")},constrainPickableViews(e){this.$proxyManager.getViews().forEach((t=>{const a=this.widgetProxy.getViewWidget(t);a&&a.setPickable(t.getProxyId()===e)}))},initialMeasurements(){throw new Error("initialMeasurements not implemented")},getMeasurementLabels(){throw new Error("getMeasurementLabels not implemented")},getDisplayedMeasurements(){throw new Error("getDisplayedMeasurements not implemented")},updateMeasurements(){throw new Error("updateMeasurements not implemented")},donePlacing(){throw new Error("donePlacing not implemented")},setupViewWidget(){throw new Error("setupViewWidget not implemented")},setWidgetColor(){throw new Error("setWidgetColor not implemented")},setWidgetTextSize(){throw new Error("setWidgetTextSize not implemented")},...t.methods||{}},template:'\n    <div>\n      <slot\n        :finalized="finalized"\n        :tool-name="name"\n        :color="color"\n        :text-size="textSize"\n        :measurements="displayedMeasurements"\n        :labels="measurementLabels"\n        :toggle-lock="toggleLock"\n        :remove="emitRemove"\n        :set-name="setName"\n        :set-color="setColor"\n        :set-text-size="setTextSize"\n      >\n      </slot>\n    </div>\n  '});const p=[{name:"2D Angle",icon:"angle-tool",component:u("Angle",{methods:{initialMeasurements:()=>({angle:0}),getMeasurementLabels:()=>["Angle"],getDisplayedMeasurements(){return{Angle:`${this.measurements.angle.toFixed(2)}`}},updateMeasurements(){const e=this.widgetProxy.getWidget();this.measurements.angle=180*e.getAngle()/Math.PI,this.finalized&&this.widgetProxy.getAllViewWidgets().forEach((e=>{e.setText(this.displayedMeasurements.Angle)}))},donePlacing(){return 3===this.widgetProxy.getWidgetState().getHandleList().length},setupViewWidget(e){e.setCircleProps({"stroke-width":3,fill:"transparent",r:8}),e.setLineProps({"stroke-width":2}),e.setTextProps({dx:12,dy:-12}),e.setText(""),e.setHandleVisibility(!1),e.setTextStateIndex(1)},setWidgetColor(e,t){d(e,{Text:{fill:t},Circle:{stroke:t},Line:{stroke:t}})},setWidgetTextSize(e,t){d(e,{Text:{style:`font-size: ${t*(window.devicePixelRatio||1)}px`}})}}})},{name:"2D Ruler",icon:"length-tool",component:u("Ruler",{methods:{initialMeasurements:()=>({length:0}),getMeasurementLabels:()=>["Length"],getDisplayedMeasurements(){return{Length:`${(this.measurements.length*(this.distanceUnitFactor||1)).toFixed(2)} ${this.distanceUnitSymbol||""}`}},updateMeasurements(){const e=this.widgetProxy.getWidget();this.measurements.length=e.getDistance(),this.finalized&&this.widgetProxy.getAllViewWidgets().forEach((e=>{e.setText(this.displayedMeasurements.Length)}))},donePlacing(){return 2===this.widgetProxy.getWidgetState().getHandleList().length},setupViewWidget(e){e.setCircleProps({"stroke-width":3,fill:"transparent",r:8}),e.setLineProps({"stroke-width":2}),e.setTextProps({dx:12,dy:-12}),e.setText(""),e.setHandleVisibility(!1),e.setTextStateIndex(0)},setWidgetColor(e,t){d(e,{Text:{fill:t},Circle:{stroke:t},Line:{stroke:t}})},setWidgetTextSize(e,t){d(e,{Text:{style:`font-size: ${t*(window.devicePixelRatio||1)}px`}})}},watch:{distanceUnitSymbol(){this.widgetProxy.modified()},distanceUnitFactor(){this.widgetProxy.modified()}}})},{name:"2D Text",icon:"text-tool",component:u("Text",{watch:{name(){this.updateMeasurements()}},methods:{initialMeasurements:()=>({}),getMeasurementLabels:()=>[],getDisplayedMeasurements:()=>({}),updateMeasurements(){this.widgetProxy.getAllViewWidgets().forEach((e=>{e.setText(this.name)}))},donePlacing(){return 1===this.widgetProxy.getWidgetState().getHandleList().length},setupViewWidget(e){e.setCircleProps({"stroke-width":3,fill:"transparent",r:8}),e.setTextProps({dx:12,dy:-12}),e.setText(""),e.setHandleVisibility(!1),e.setTextStateIndex(0)},setWidgetColor(e,t){d(e,{Text:{fill:t},Circle:{stroke:t}})},setWidgetTextSize(e,t){d(e,{Text:{style:`font-size: ${t*(window.devicePixelRatio||1)}px`}})}}})}],m={};p.forEach((e=>{m[e.component.name]=e}));var v={name:"MeasurementTools",props:["enabled"],components:{PopUp:n.Z,PalettePicker:o.Z,SvgIcon:l.Z,SourceSelect:r.Z},inject:["$notify","girderRest"],data:()=>({uiToolList:p,activeToolIndex:void 0,activeToolId:-1,targetPid:-1,pendingTool:null,palette:c.wY}),computed:{...(0,s.rn)("widgets",["measurements"]),tools(){let e=[];if(this.measurements[this.targetPid]){const t=this.measurements[this.targetPid];e=e.concat(t.map((e=>({...m[e.componentName],data:e.data}))))}return this.pendingTool&&(e=e.concat(this.pendingTool)),e},targetProxy(){return this.$proxyManager.getProxyById(this.targetPid)}},watch:{enabled(e){e?this.enableActiveTool():this.clearActiveTool()},targetPid(){this.enabled&&this.clearActiveTool()}},methods:{...(0,s.nv)("widgets",["addMeasurementTool","removeMeasurementTool","updateMeasurementTool"]),filterImageData:e=>"TrivialProducer"===e.getProxyName()&&"vtkImageData"===e.getType(),setTargetDataset(e){this.targetPid=e},toggleActiveTool(e){this.enabled?void 0===e?this.$emit("enable",!1):(this.removeTool(this.activeToolIndex),this.activeToolIndex=e,this.enableActiveTool()):void 0!==e&&(this.activeToolIndex=e,this.$emit("enable",!0))},enableActiveTool(){-1!==this.targetPid&&void 0!==this.activeToolIndex&&(this.pendingTool=p[this.activeToolIndex])},clearActiveTool(){this.pendingTool=null,this.activeToolIndex=void 0,this.activeToolId=-1},removeTool(e){this.pendingTool&&e===this.tools.length-1?(this.pendingTool=null,this.clearActiveTool()):this.removeMeasurementTool({datasetId:this.targetPid,index:e})},jumpTo(e,t){if(null!==t){const a=this.$proxyManager.getViews().find((t=>t.getAxis&&t.getAxis()===e));if(a){const e=a.getRepresentations().find((e=>e.getInput()===this.targetProxy));e&&e.setSlice(t)}}},saveToolData(e,t){this.pendingTool&&e===this.tools.length-1?(this.addMeasurementTool({datasetId:this.targetPid,componentName:this.pendingTool.component.name,data:t}),this.pendingTool=null,this.$emit("enable",!1)):this.updateMeasurementTool({datasetId:this.targetPid,index:e,data:t})},upload(){this.targetProxy&&setTimeout((()=>{this.$root.$emit("girder_upload_measurements",this.targetPid)}),10)}}},g={container:"MeasurementTools-container-T9yiM",fullWidth:"MeasurementTools-fullWidth-jg_o5",heading:"MeasurementTools-heading-x9G8M",popup:"MeasurementTools-popup-Rgjca",toolButton:"MeasurementTools-toolButton-AuiAl",tools:"MeasurementTools-tools-Zplkp",toolIcon:"MeasurementTools-toolIcon-_ACfO",row:"MeasurementTools-row-IsEDx",rowAvatar:"MeasurementTools-rowAvatar-AoIB_",rowContent:"MeasurementTools-rowContent-OAflc",rowContentName:"MeasurementTools-rowContentName-qZi21",rowContentDetails:"MeasurementTools-rowContentDetails-IT3d5",action:"MeasurementTools-action-pSwKW",toolIconOverlay:"MeasurementTools-toolIconOverlay-PpV_8"},h=a(571),y=a(3),f=a.n(y),b=a(572),x=a(653),w=a(591),_=a(627),S=a(634),P=a(598),C=a(600),k=a(601),V=a(642),I=a(643),T=a(624),$=a(644);e=a.hmd(e);var D={},M=!1;e.hot,e.hot;var Z=(0,h.Z)(v,i,[],!1,(function(e){M||(D.$style=g.locals||g,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return D.$style}}))}),null,null);f()(Z,{VBtn:b.Z,VBtnToggle:x.Z,VCard:w.Z,VContainer:_.Z,VDivider:S.Z,VFlex:P.Z,VIcon:C.Z,VLayout:k.Z,VSlider:V.Z,VSpacer:I.Z,VTextField:T.Z,VTooltip:$.Z}),Z.options.__file="src/components/tools/MeasurementTools/index.vue";var L=Z.exports},159:function(e,t,a){"use strict";a.d(t,{Z:function(){return B}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{class:e.$style.container},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("source-select",{attrs:{label:"Target volume",filterFunc:e.filterImages,bindToActiveSource:"",disabled:e.running},on:{input:e.setTargetImage}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-menu",{attrs:{"offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-select",{staticStyle:{overflow:"hidden","text-overflow":"ellipses"},attrs:{label:"Select/create an output image","append-outer-icon":"mdi-dots-vertical",items:e.imageList,"item-text":"name","item-value":"proxyId",disabled:!e.targetImage||e.running,value:e.outputImageSelection},on:{input:e.setOutputImage,"click:append-outer":i.click}})]}}])},[e._v(" "),a("v-list",[e.outputImageSelection?[a("v-list-item",{on:{click:e.editOutputImageName}},[a("v-list-item-title",[e._v("Edit Name")])],1),e._v(" "),a("v-list-item",{on:{click:e.deleteOutputImage}},[a("v-list-item-title",[e._v("Delete")])],1)]:[a("v-list-item",[a("v-list-item-title",[e._v("(no image selected)")])],1)]],2)],1)],1),e._v(" "),e.editingOutputName?[a("v-flex",{attrs:{xs10:""}},[a("v-text-field",{attrs:{label:"Renaming image"},on:{keydown:function(t){if(!t.type.indexOf("key")&&13!==t.keyCode)return null;e.editingOutputName=!1}},model:{value:e.editableOutputImageName,callback:function(t){e.editableOutputImageName=t},expression:"editableOutputImageName"}})],1),e._v(" "),a("v-flex",{staticClass:"text-center",attrs:{xs2:""}},[a("v-btn",{attrs:{icon:""},on:{click:function(t){e.editingOutputName=!1}}},[a("v-icon",[e._v("mdi-content-save")])],1)],1)]:e._e()],2)],1),e._v(" "),a("v-container",{class:e.$style.container},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs10:""}},[a("v-slider",{attrs:{label:"Radius",min:"1",max:"20",step:"1",disabled:e.running,"hide-details":""},model:{value:e.blurRadius,callback:function(t){e.blurRadius=t},expression:"blurRadius"}})],1),e._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{type:"number",min:"1",max:"20",disabled:e.running,step:"1"},model:{value:e.blurRadius,callback:function(t){e.blurRadius=t},expression:"blurRadius"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-btn",{attrs:{text:"",loading:e.running,disabled:e.buttonDisabled},on:{click:e.runBlur},scopedSlots:e._u([{key:"loader",fn:function(){return[a("v-progress-circular",{attrs:{indeterminate:"",size:"24",width:"3"}}),e._v(" "),a("span",{staticClass:"ml-2"},[e._v("Running...")])]},proxy:!0}])},[a("v-icon",{attrs:{left:""}},[e._v("mdi-blur")]),e._v(" "),e._v("\n          Blur Image\n        ")],1)],1)],1)],1),e._v(" "),e.error?a("v-container",{class:e.$style.container},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-alert",{attrs:{type:"error",dismissible:""},on:{input:function(t){e.error=null}}},[e._v("\n          Median filter error: "+e._s(e.error.message)+"\n        ")])],1)],1)],1):e._e(),e._v(" "),e.snackbar.show?a("portal",{attrs:{selector:"#app-portal-mount"}},[a("v-snackbar",{attrs:{top:"",color:e.snackbar.type,timeout:6e3},model:{value:e.snackbar.show,callback:function(t){e.$set(e.snackbar,"show",t)},expression:"snackbar.show"}},[e._v("\n      "+e._s(e.snackbar.msg)+"\n      "),a("v-btn",{attrs:{dark:"",text:""},on:{click:function(t){e.snackbar.show=!1}}},[e._v("close")])],1)],1):e._e()],1)};i._withStripped=!0;var s=a(494),n=a(57),o=a.n(n),r=a(8),l=a(83),c=a(376),d=a(81),u=a(27);const{vtkErrorMacro:p}=r.ZP,m=-2;var v={name:"MedianFilter",components:{SourceSelect:d.Z,Portal:c.h_},props:["enabled"],data:()=>({targetImageId:-1,outputImageId:-1,imageList:[],blurRadius:1,running:!1,webWorker:null,error:null,editingOutputName:!1,editableOutputImageName:"",snackbar:{show:!1,type:"",msg:""}}),computed:{targetImage(){return this.$proxyManager.getProxyById(this.targetImageId)},outputImage(){return this.$proxyManager.getProxyById(this.outputImageId)},outputImageSelection(){return this.outputImage?{name:this.outputImage.getName(),proxyId:this.outputImageId}:null},buttonDisabled(){return this.running||!this.outputImage}},watch:{targetImageId(){this.targetImageId===this.outputImageId&&(this.outputImageId=-1),this.refreshImageList()},outputImage(){this.outputImage?this.editableOutputImageName=this.outputImage.getName():this.editableOutputImageName=""},editableOutputImageName(e){this.outputImage&&this.outputImage.setName(e)}},proxyManagerHooks:{onProxyModified(){this.refreshImageList()},onProxyCreated(){this.refreshImageList()},onProxyDeleted({proxyId:e}){e===this.targetImageId&&(this.targetImageId=-1),e===this.outputImageId&&(this.outputImageId=-1)}},mounted(){this.refreshImageList()},methods:{filterImages:e=>"TrivialProducer"===e.getProxyName()&&"vtkImageData"===e.getType(),setTargetImage(e){this.targetImageId=e},setOutputImage(e){if(e===m){const e=this.createOutputImageProxy();this.outputImageId=e.getProxyId()}else this.outputImageId=e;this.editingOutputName=!1},refreshImageList(){const e=this.$proxyManager.getSources().filter((e=>e.getProxyId()!==this.targetImageId)).map((e=>({name:e.getName(),proxyId:e.getProxyId()})));this.imageList=[{name:"Create image",proxyId:m}].concat(e)},createOutputImageProxy(){return this.$proxyManager.createProxy("Sources","TrivialProducer",{name:`Median filter of ${this.targetImage.getName()}`})},runBlur(){const e=l.Z.convertVtkToItkImage(this.targetImage.getDataset());e.data=e.data.slice(0),this.running=!0;const t=String(this.blurRadius);(0,s.Z)(this.webWorker,"itkfiltering",["medianfilter","input.json","output.json",t],[{path:"output.json",type:o().Image}],[{path:"input.json",type:o().Image,data:e}]).then((e=>{if(this.webWorker=e.webWorker,!this.outputImage){const e=this.createOutputImageProxy();this.outputImageId=e.getProxyId()}const t=e.outputs[0].data;t.data=new Float32Array(t.data);const a=l.Z.convertItkToVtkImage(t);this.outputImage.setInputData(a),this.targetImage.getKey("girderProvenance")&&this.outputImage.setKey("girderProvenance",this.targetImage.getKey("girderProvenance")),(0,u._3)(this.$proxyManager,this.outputImage),this.$proxyManager.renderAllViews(),this.running=!1,this.showSnack({type:"success",msg:"Median filter done!"})})).catch((e=>{p(`Median filter error: ${e.message}`),this.error=e,this.showSnack({type:"error",msg:"Median filter error!"})}))},showSnack({type:e,msg:t}){this.snackbar.show=!0,this.snackbar.type=e,this.snackbar.msg=t},editOutputImageName(){this.outputImage&&(this.editingOutputName=!this.editingOutputName)},deleteOutputImage(){this.$proxyManager.deleteProxy(this.outputImage)}}},g={container:"MedianFilter-container-Bl5Bg"},h=a(571),y=a(3),f=a.n(y),b=a(655),x=a(572),w=a(627),_=a(598),S=a(600),P=a(601),C=a(637),k=a(631),V=a(636),I=a(628),T=a(589),$=a(630),D=a(642),M=a(657),Z=a(624);e=a.hmd(e);var L={},R=!1;e.hot,e.hot;var O=(0,h.Z)(v,i,[],!1,(function(e){R||(L.$style=g.locals||g,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return L.$style}}))}),null,null);f()(O,{VAlert:b.Z,VBtn:x.Z,VContainer:w.Z,VFlex:_.Z,VIcon:S.Z,VLayout:P.Z,VList:C.Z,VListItem:k.Z,VListItemTitle:V.V9,VMenu:I.Z,VProgressCircular:T.Z,VSelect:$.Z,VSlider:D.Z,VSnackbar:M.Z,VTextField:Z.Z}),O.options.__file="src/components/tools/MedianFilter/index.vue";var B=O.exports},156:function(e,t,a){"use strict";a.d(t,{Z:function(){return z}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{class:e.$style.container},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("source-select",{attrs:{label:"Select a Base Image",filterFunc:e.filterImageData,bindToActiveSource:"",hideIfOneDataset:""},on:{input:e.setTargetVolume}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-menu",{attrs:{"offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-select",{staticStyle:{overflow:"hidden","text-overflow":"ellipses"},attrs:{label:"Select a Labelmap","append-outer-icon":"mdi-dots-vertical",items:e.labelmaps,"item-text":"name","item-value":"sourceId",disabled:-1===e.targetImageId,value:e.labelmapSelection},on:{input:e.setLabelMap,"click:append-outer":i.click}})]}}])},[e._v(" "),a("v-list",[e.labelmapSelection?[a("v-list-item",{on:{click:e.editName}},[a("v-list-item-title",[e._v("Edit Name")])],1),e._v(" "),a("v-list-item",{on:{click:e.deleteLabelmap}},[a("v-list-item-title",[e._v("Delete")])],1)]:[a("v-list-item",[a("v-list-item-title",[e._v("(no labelmap selected)")])],1)]],2)],1)],1),e._v(" "),e.editingName?[a("v-flex",{attrs:{xs10:""}},[a("v-text-field",{attrs:{label:"Renaming labelmap"},model:{value:e.editableLabelmapName,callback:function(t){e.editableLabelmapName=t},expression:"editableLabelmapName"}})],1),e._v(" "),a("v-flex",{staticClass:"text-center",attrs:{xs2:""}},[a("v-btn",{attrs:{icon:""},on:{click:function(t){e.editingName=!1}}},[a("v-icon",[e._v("mdi-content-save")])],1)],1)]:e._e()],2)],1),e._v(" "),a("v-card",{attrs:{color:"teal lighten-5"}},[a("v-card-text",{class:e.$style.paintActions},[a("v-switch",{class:e.$style.paintSwitch,attrs:{value:e.enabled,"hide-details":"",label:"Paint Mode",disabled:!e.canPaint},on:{change:function(t){e.$emit("enable",Boolean(t))}}}),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"mr-3",attrs:{icon:"",small:"",disabled:!e.canPaint},on:{click:e.undo}},[a("v-icon",[e._v("mdi-undo")])],1),e._v(" "),a("v-btn",{attrs:{icon:"",small:"",disabled:!e.canPaint},on:{click:e.redo}},[a("v-icon",[e._v("mdi-redo")])],1)],1)],1),e._v(" "),a("v-container",{class:e.$style.container,attrs:{"grid-list-md":""}},[a("v-layout",{directives:[{name:"show",rawName:"v-show",value:e.canPaint,expression:"canPaint"}],attrs:{wrap:"","align-center":""}},[a("v-flex",{staticClass:"mt-1",attrs:{xs10:""}},[a("label",{staticClass:"v-label theme--light",attrs:{for:"paint-2D-brush-toggle"}},[e._v("2D Brush")])]),e._v(" "),a("v-flex",{staticClass:"mt-1",attrs:{xs2:""}},[a("v-switch",{staticClass:"mt-n1 pt-0",attrs:{id:"paint-2D-brush-toggle","hide-details":""},model:{value:e.brush2D,callback:function(t){e.brush2D=t},expression:"brush2D"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-slider",{attrs:{label:"Radius",min:"1",max:e.brushSizeMax,step:"1",dirty:"","hide-details":"",value:e.radius},on:{input:e.setRadius},scopedSlots:e._u([{key:"append",fn:function(){return[a("v-text-field",{staticClass:"mt-n1 pt-0",attrs:{type:"number",min:"1",max:e.brushSizeMax,step:"1","hide-details":"","single-line":"",value:e.radius},on:{input:e.setRadius}})]},proxy:!0}])})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-list",{class:e.$style.fullWidth},[a("v-subheader",{class:e.$style.headerRow},[a("span",{staticClass:"black--text subtitle-1 body-2"},[e._v("Labels")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{class:e.$style.lowercaseText,attrs:{text:""},on:{click:e.addLabel}},[a("v-icon",{attrs:{small:"",color:"blue"}},[e._v("mdi-plus-circle")]),e._v(" "),a("span",{staticClass:"pl-2 grey--text text--darken-2"},[e._v("Add Label")])],1)],1),e._v(" "),a("v-radio-group",{class:e.$style.radioGroup,attrs:{value:e.activeLabel},on:{change:e.setLabel}},[e._l(e.colormapArray,(function(t,i){return[a("v-divider",{key:"divider_"+i}),e._v(" "),a("v-list-item",{key:t.label},[a("v-list-item-action",[a("v-radio",{class:e.$style.activeRadio,attrs:{value:t.label}})],1),e._v(" "),a("v-list-item-content",{class:e.$style.listRow},[0===t.label?[a("div",{class:e.$style.colorBoxBackground},[a("div",{class:e.$style.colorBox,style:e.colorToBackgroundCSS(e.colormapArray,0)})]),e._v(" "),a("span",{staticClass:"pl-1"},[e._v("Eraser")])]:[a("pop-up",{staticClass:"flex-grow-0 flex-shrink-1",scopedSlots:e._u([{key:"trigger",fn:function(){return[a("div",{class:e.$style.colorBoxBackground},[a("div",{class:e.$style.colorBox,style:e.colorToBackgroundCSS(e.colormapArray,i)})])]},proxy:!0},{key:"popup",fn:function(){return[a("div",{class:e.$style.colorPicker},[a("palette-picker",{attrs:{palette:e.palette,size:28,value:e.asHex(t.color)},on:{input:function(a){return e.setLabelColor(t.label,arguments[0])}}}),e._v(" "),a("div",{class:e.$style.opacitySlider},[a("v-slider",{attrs:{label:"Opacity",value:t.opacity,min:0,max:255,step:1},on:{input:function(a){return e.setLabelOpacity(t.label,arguments[0])}}})],1)],1)]},proxy:!0}],null,!0)}),e._v(" "),a("span",{staticClass:"pl-1"},[e._v("Label "+e._s(t.label))])]],2),e._v(" "),a("v-list-item-action",[0!==t.label?a("v-btn",{class:e.$style.deleteButton,attrs:{icon:""},on:{click:function(a){return e.deleteLabel(t.label)}}},[a("v-icon",[e._v("mdi-delete")])],1):e._e()],1)],1)]})),e._v(" "),a("v-divider")],2)],1)],1),e._v(" "),a("v-btn",{attrs:{disabled:!e.girderRest.user},on:{click:function(t){return e.upload()}}},[e._v("\n        Upload\n      ")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.girderRest.user,expression:"!girderRest.user"}],staticClass:"body-2"},[e._v("Log in to upload")])],1)],1)],1)};i._withStripped=!0;var s=a(602),n=a(4),o=a(493),r=a(71),l=a(375),c=a(36),d=a(80),u=a(81),p=a(27),m=a(56);const v="PaintToolSync",g=-2;function h(e){const t=e.slice(1),a=[];for(let e=0;e<t.length;e+=2)a.push(Number.parseInt(t.slice(e,e+2),16));return a}var y={name:"PaintTool",inject:["girderRest"],components:{PalettePicker:c.Z,PopUp:d.Z,SourceSelect:u.Z},props:["enabled"],data:()=>({targetImageId:-1,activeLabelmapId:-1,internalLabelmaps:[],widgetId:-1,editingName:!1,editableLabelmapName:"",brushSizeMax:100,radius:5,brush2D:!1,colormapArray:[]}),computed:{...(0,s.rn)("widgets",{imageToLabelmaps:e=>e.imageToLabelmaps,labelmapToImage:e=>e.labelmapToImage,labelmapStates:e=>e.labelmapStates}),labelmaps(){return[{name:"Create new labelmap",sourceId:g}].concat(this.internalLabelmaps)},activeLabel(){return this.activeLabelmapState?this.activeLabelmapState.selectedLabel:-1},activeLabelmapProxy(){return this.$proxyManager.getProxyById(this.activeLabelmapId)},activeLabelmapParentImageProxy(){return this.$proxyManager.getProxyById(this.labelmapToImage[this.activeLabelmapId])},activeLabelmapState(){return this.labelmapStates[this.activeLabelmapId]},targetImageProxy(){return this.$proxyManager.getProxyById(this.targetImageId)},labelmapSelection(){return this.activeLabelmapProxy?{name:this.editableLabelmapName||this.activeLabelmapProxy.getName(),sourceId:this.activeLabelmapProxy.getProxyId()}:null},canPaint(){return this.targetImageId>-1&&this.activeLabelmapId>-1},paintProxy(){return this.$proxyManager.getProxyById(this.widgetId)}},watch:{editableLabelmapName(e){this.activeLabelmapProxy&&this.activeLabelmapProxy.setName(e)},activeLabel(e){this.filter&&this.filter.setLabel(e)},radius(e){this.filter&&this.filter.setRadius(e),this.paintProxy&&this.paintProxy.getWidget().setRadius(e)},enabled(e){e?this.enablePainting():this.disablePainting()},activeLabelmapProxy(){if(this.activeLabelmapProxy){this.editableLabelmapName=this.activeLabelmapProxy.getName();const e=this.activeLabelmapProxy.getDataset().getDimensions();this.brushSizeMax=Math.floor(Math.max(...e)/2);const t=this.activeLabelmapProxy.getDataset();this.labelmapSub.sub(t.onModified(this.updateColorMap)),this.updateColorMap()}else this.labelmapSub.unsub();this.editingName=!1}},proxyManagerHooks:{onProxyModified(e){if(this.enabled&&"Representations"===e.getProxyGroup()&&e.getInput()===this.activeLabelmapProxy&&this.mousedViewId>-1){const e=this.$proxyManager.getProxyById(this.mousedViewId);this.updateHandleSlice(e)}if("Sources"===e.getProxyGroup()&&"LabelMap"===e.getProxyName()){const t=this.internalLabelmaps.find((t=>t.sourceId===e.getProxyId()));t&&(t.name=e.getName())}},onProxyCreated({proxy:e,proxyGroup:t,proxyName:a,proxyId:i}){"Sources"===t&&"LabelMap"===a&&this.internalLabelmaps.push({name:e.getName(),sourceId:i})},onProxyDeleted({proxyGroup:e,proxyName:t,proxyId:a}){if("Sources"===e&&"LabelMap"===t){const e=this.internalLabelmaps.findIndex((e=>e.sourceId===a));e>-1&&this.internalLabelmaps.splice(e,1)}a===this.activeLabelmapId?(this.activeLabelmapId=-1,this.$emit("enable",!1)):a===this.targetImageId&&(this.targetImageId=-1,this.$emit("enable",!1))}},created(){this.palette=m.oe,this.mousedViewId=-1,this.filter=null,this.labelmapSub=(0,p.y5)(),this.internalLabelmaps=this.$proxyManager.getSources().filter((e=>"LabelMap"===e.getProxyName())).map((e=>({name:e.getName(),sourceId:e.getProxyId()})))},beforeDestroy(){this.enabled&&this.disablePainting(),this.labelmapSub.unsub()},methods:{...(0,s.nv)({addLabelmapToImage:(e,t,a)=>e("widgets/addLabelmapToImage",{imageId:a,labelmapId:t}),setLabelmapState:(e,t,a)=>e("widgets/setLabelmapState",{labelmapId:t,labelmapState:a}),deleteLabelmapInternal:(e,t)=>e("widgets/deleteLabelmap",t)}),setRadius(e){this.radius=Math.max(1,Math.round(e))},setLabel(e){const t=this.activeLabelmapState;t&&(t.selectedLabel=Number(e))},editName(){this.labelmapSelection&&(this.editingName=!this.editingName)},deleteLabelmap(){this.activeLabelmapProxy&&(this.deleteLabelmapInternal(this.activeLabelmapProxy.getProxyId()),this.$proxyManager.deleteProxy(this.activeLabelmapProxy))},filterImageData:e=>"TrivialProducer"===e.getProxyName()&&"vtkImageData"===e.getType(),asHex:e=>`#${e.map((e=>`00${e.toString(16)}`.slice(-2))).join("")}`,setTargetVolume(e){this.targetImageId=e,this.$emit("enable",!1)},setLabelMap(e){if(this.filter=o.ZP.newInstance(),e===g){const e=this.targetImageProxy.getDataset();this.filter.setBackgroundImage(e);const t=this.$proxyManager.createProxy("Sources","LabelMap"),a=t.getProxyId();this.activeLabelmapId=a,this.addLabelmapToImage(a,this.targetImageId);const i=this.imageToLabelmaps[this.targetImageId].length,s={selectedLabel:1,lastColorIndex:0};this.setLabelmapState(a,s);const o=this.targetImageProxy.getName();t.setName(`Labelmap ${i} ${o}`);const r=function(e){const t=l.ZP.newInstance(e.get("spacing","origin","direction"));t.setDimensions(e.getDimensions());const a=new Uint16Array(e.getNumberOfPoints()),i=n.ZP.newInstance({numberOfComponents:1,values:a});return t.getPointData().setScalars(i),t.computeTransforms(),t}(e);r.setLabelColor(s.selectedLabel,h(this.palette[0])),t.setInputData(r),this.filter.setLabelMap(r),(0,p._3)(this.$proxyManager,t),this.$proxyManager.renderAllViews()}else{const t=this.$proxyManager.getProxyById(e);t&&(this.activeLabelmapId=t.getProxyId(),this.filter.setLabelMap(t.getDataset()))}this.filter.setLabel(this.activeLabelmapState.selectedLabel),this.filter.setRadius(this.radius),this.$proxyManager.getViews().forEach((e=>{const t=this.targetImageProxy,a=this.$proxyManager.getRepresentation(t,e);e.bindRepresentationToManipulator&&a&&e.bindRepresentationToManipulator(a)}))},updateColorMap(){const e=this.activeLabelmapProxy;if(e){const t=e.getDataset().getColorMap(),a=(e,t)=>e-t;this.colormapArray=Object.keys(t).sort(a).map((e=>({label:Number(e),color:t[e].slice(0,3),opacity:t[e][3]})))}},setLabelColor(e,t){const a=this.activeLabelmapProxy.getDataset(),i=a.getColorMap()[e],s=h(t);3===s.length&&(a.setLabelColor(e,[...s,i[3]]),this.$proxyManager.renderAllViews())},setLabelOpacity(e,t){const a=this.activeLabelmapProxy.getDataset(),i=a.getColorMap()[e].slice();t&&(i[3]=Number(t),a.setLabelColor(e,i)),this.$proxyManager.renderAllViews()},addLabel(){const e=this.colormapArray.map((e=>e.label));let t=0;for(;e.length;){const a=e.shift();if(a-t>1){t++;break}if(0===e.length){t=a+1;break}t=a}const a=this.activeLabelmapState,i=(a.lastColorIndex+1)%this.palette.length,s=h(this.palette[i]);this.activeLabelmapProxy.getDataset().setLabelColor(t,s),a.lastColorIndex=i,this.setLabel(t)},deleteLabel(e){const t=this.activeLabelmapProxy.getDataset();t.removeLabel(e);const a=t.getPointData().getScalars().getData();for(let t=0;t<a.length;t++)a[t]===e&&(a[t]=0);this.setLabel(0),this.$proxyManager.renderAllViews()},undo(){this.filter.undo(),this.$proxyManager.renderAllViews()},redo(){this.filter.redo(),this.$proxyManager.renderAllViews()},colorToBackgroundCSS(e,t){const{color:a,opacity:i}=e[t];return{backgroundColor:`rgba(${[...a,i/255].join(",")})`}},updateHandleSlice(e){const t=[0,0,0],a=this.paintProxy.getWidget().getManipulator(),i=this.$proxyManager.getRepresentation(this.targetImageProxy,e);t[e.getAxis()]=i.getSlice(),a.setHandleOrigin(t)},enablePainting(){const e=this.$proxyManager.createProxy("Widgets","Paint");e.getWidget().setRadius(this.radius),e.getWidget().placeWidget(this.activeLabelmapProxy.getDataset().getBounds()),this.widgetId=e.getProxyId(),this.mousedViewId=-1;const t=(e,t,a)=>{e.getInteractor().requestAnimation(v),t.grabFocus(a);const i=a.getPriority()+1,s=e.getInteractor().onMouseMove((()=>{this.mousedViewId!==e.getProxyId()&&(this.mousedViewId=e.getProxyId(),this.updateHandleSlice(e))}),i),n=a.onStartInteractionEvent((()=>{this.brush2D?this.filter.setSlicingMode(r.P["XYZ"[e.getAxis()]]):this.filter.setSlicingMode(r.P.NONE),this.filter.startStroke(),this.filter.addPoint(this.paintProxy.getWidgetState().getTrueOrigin())})),o=a.onInteractionEvent((()=>{a.getPainting()&&this.filter.addPoint(this.paintProxy.getWidgetState().getTrueOrigin())})),l=a.onEndInteractionEvent((()=>{this.filter.addPoint(this.paintProxy.getWidgetState().getTrueOrigin()),this.filter.endStroke()}));return[()=>e.getInteractor().cancelAnimation(v),s.unsubscribe,n.unsubscribe,o.unsubscribe,l.unsubscribe]};e.addToViews(),e.executeViewFuncs({View3D:e=>(e.getInteractor().requestAnimation(v),()=>{e.getInteractor().cancelAnimation(v)}),View2D_X:t,View2D_Y:t,View2D_Z:t})},disablePainting(){this.paintProxy.removeFromViews(),this.$proxyManager.deleteProxy(this.paintProxy),this.widgetId=-1},upload(){setTimeout((()=>{const e=this.activeLabelmapProxy,t=this.activeLabelmapParentImageProxy;e&&t&&(t.getKey("girderProvenance")&&e.setKey("girderProvenance",t.getKey("girderProvenance")),this.$root.$emit("girder_upload_proxy",this.activeLabelmapId))}),10)}}},f={container:"PaintTool-container-K_01H",fullWidth:"PaintTool-fullWidth-ygvJa",labelInput:"PaintTool-labelInput-CX7Np",paintActions:"PaintTool-paintActions-NWnXC",paintSwitch:"PaintTool-paintSwitch-CEy8P",radioGroup:"PaintTool-radioGroup-oAs8K",headerRow:"PaintTool-headerRow-SXk6M",listRow:"PaintTool-listRow-QOnht",lowercaseText:"PaintTool-lowercaseText-Cncdr",colorBoxBackground:"PaintTool-colorBoxBackground-uCP_B",colorBox:"PaintTool-colorBox-MGe3f",colorPicker:"PaintTool-colorPicker-LSW1f",opacitySlider:"PaintTool-opacitySlider-_m6x7",activeRadio:"PaintTool-activeRadio-BOPEG"},b=a(571),x=a(3),w=a.n(x),_=a(572),S=a(591),P=a(597),C=a(627),k=a(634),V=a(598),I=a(600),T=a(601),$=a(637),D=a(631),M=a(632),Z=a(636),L=a(628),R=a(649),O=a(650),B=a(630),A=a(642),F=a(643),N=a(635),E=a(651),j=a(624);e=a.hmd(e);var G={},W=!1;e.hot,e.hot;var U=(0,b.Z)(y,i,[],!1,(function(e){W||(G.$style=f.locals||f,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return G.$style}}))}),null,null);w()(U,{VBtn:_.Z,VCard:S.Z,VCardText:P.ZB,VContainer:C.Z,VDivider:k.Z,VFlex:V.Z,VIcon:I.Z,VLayout:T.Z,VList:$.Z,VListItem:D.Z,VListItemAction:M.Z,VListItemContent:Z.km,VListItemTitle:Z.V9,VMenu:L.Z,VRadio:R.Z,VRadioGroup:O.Z,VSelect:B.Z,VSlider:A.Z,VSpacer:F.Z,VSubheader:N.Z,VSwitch:E.Z,VTextField:j.Z}),U.options.__file="src/components/tools/PaintTool/index.vue";var z=U.exports},163:function(e,t,a){"use strict";a.d(t,{Z:function(){return h}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.$style.wrapper},[a("v-btn",{attrs:{text:"",disabled:e.playing||e.isOnFirstFrame,small:""},on:{click:e.firstFrame}},[a("v-icon",[e._v("\n      mdi-chevron-double-left\n    ")])],1),e._v(" "),a("v-btn",{attrs:{text:"",disabled:e.playing||e.isOnFirstFrame,small:""},on:{click:e.previousFrame}},[a("v-icon",[e._v("\n      mdi-chevron-left\n    ")])],1),e._v(" "),e.playing?a("v-btn",{attrs:{text:"",small:""},on:{click:e.pause}},[a("v-icon",[e._v("\n      mdi-pause\n    ")])],1):a("v-btn",{attrs:{text:"",small:"",disabled:e.isOnLastFrame},on:{click:e.play}},[a("v-icon",[e._v("\n      mdi-play\n    ")])],1),e._v(" "),a("v-btn",{attrs:{text:"",disabled:e.playing||e.isOnLastFrame,small:""},on:{click:e.nextFrame}},[a("v-icon",[e._v("\n      mdi-chevron-right\n    ")])],1),e._v(" "),a("v-btn",{attrs:{text:"",disabled:e.playing||e.isOnLastFrame,small:""},on:{click:e.lastFrame}},[a("v-icon",[e._v("\n      mdi-chevron-double-right\n    ")])],1),e._v(" "),a("v-select",{staticClass:"pv-no-select",attrs:{disabled:e.playing,items:e.frames,value:e.currentFrame,dense:"",flat:"","hide-details":""},on:{change:e.setCurrentFrame}})],1)};i._withStripped=!0;var s=a(602),n={name:"AnimationControls",computed:{...(0,s.rn)("animations",{playing:e=>e.playing,currentFrame:e=>e.currentFrame,frames:e=>e.frames}),isOnFirstFrame(){return this.frames.length>0&&this.currentFrame===this.frames[0]},isOnLastFrame(){return this.frames.length>0&&this.currentFrame===this.frames[this.frames.length-1]}},methods:{setCurrentFrame(e){this.setFrameIndex(this.frames.indexOf(e))},...(0,s.nv)("animations",["play","pause","nextFrame","previousFrame","firstFrame","lastFrame","setFrameIndex"])}},o={wrapper:"AnimationControls-wrapper-LJEUM"},r=a(571),l=a(3),c=a.n(l),d=a(572),u=a(600),p=a(630);e=a.hmd(e);var m={},v=!1;e.hot,e.hot;var g=(0,r.Z)(n,i,[],!1,(function(e){v||(m.$style=o.locals||o,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return m.$style}}))}),null,null);c()(g,{VBtn:d.Z,VIcon:u.Z,VSelect:p.Z}),g.options.__file="src/components/widgets/AnimationControls/index.vue";var h=g.exports},154:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.$style.container,style:e.style})};i._withStripped=!0;var s={name:"ColorGroup",props:{index:{type:Number,default:0},top:{type:Number,default:0},visible:{type:Boolean,default:!0},colors:{this:Array,default:()=>["#e1002a","#417dc0","#1d9a57","#e9bc2f","#9b3880"]}},computed:{style(){return this.visible?{background:this.colors[this.index%this.colors.length],top:`${this.top}px`}:"display: none;"}}},n={container:"ColorGroup-container-xP4_7"},o=a(571);e=a.hmd(e);var r={},l=!1;e.hot,e.hot;var c=(0,o.Z)(s,i,[],!1,(function(e){l||(r.$style=n.locals||n,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return r.$style}}))}),null,null);c.options.__file="src/components/widgets/ColorGroup/index.vue";var d=c.exports},166:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{on:{dragover:function(t){return t.preventDefault(),e.onDragOver.apply(null,arguments)},dragleave:e.onDragLeave,drop:function(t){return t.preventDefault(),e.onDrop.apply(null,arguments)}}},[e._t("default",null,{dragHover:e.dragHover})],2)};i._withStripped=!0;var s={name:"DragAndDrop",props:{enabled:Boolean},data:()=>({dragHover:!1}),methods:{onDragOver:function(e){if(this.enabled){const t=e.dataTransfer.types;(t&&t instanceof Array?-1!==t.indexOf("Files"):"Files"in t)&&(this.dragHover=!0,null!==this.dragTimeout&&(window.clearTimeout(this.dragTimeout),this.dragTimeout=null))}},onDragLeave:function(){this.enabled&&(this.dragTimeout=window.setTimeout((()=>{this.dragHover=!1,this.dragTimeout=null}),50))},onDrop:function(e){this.enabled&&(this.$emit("drop",Array.from(e.dataTransfer.files)),this.dragHover=!1)}},created(){this.dragTimeout=null}},n=(0,a(571).Z)(s,i,[],!1,null,null,null);n.options.__file="src/components/widgets/DragAndDrop/index.vue";var o=n.exports},164:function(e,t,a){"use strict";a.d(t,{Z:function(){return x}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{class:e.$style.card,attrs:{flat:""}},[a("v-container",{staticClass:"pa-0",attrs:{"grid-list-xs":""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("span",{staticClass:"subtitle-2"},[e._v("Rendering")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-icon",e._g({attrs:{small:""}},i),[e._v("mdi-help-circle")])]}}])},[a("table",{class:e.$style.table},[a("tr",[a("td",{staticClass:"body-2"},[e._v("WebGL")]),e._v(" "),a("td",{staticClass:"body-1"},[e._v(e._s(e.webgl))])]),e._v(" "),a("tr",[a("td",{staticClass:"body-2"},[e._v("Vendor")]),e._v(" "),a("td",{staticClass:"body-1"},[e._v(e._s(e.vendor))])]),e._v(" "),a("tr",[a("td",{staticClass:"body-2"},[e._v("GPU")]),e._v(" "),a("td",{staticClass:"body-1"},[e._v(e._s(e.gpu))])])])])],1)],1),e._v(" "),a("v-divider",{class:e.$style.divider}),e._v(" "),a("div",{class:["js-monitor",e.$style.monitor]})],1)};i._withStripped=!0;var s=a(497);var n={props:{width:{default:268,type:Number},proxyManager:{required:!0}},data:()=>({vendor:"Unknown",gpu:"Unknown",webgl:0,infoDialog:!1}),methods:{onMounted:function(){this.monitor=s.ZP.newInstance({bufferSize:this.width}),this.updateActiveView=()=>{const e=this.proxyManager.getActiveView(),t=e?e.getRenderWindow():null;if(e){const t=e.getOpenglRenderWindow().getGLInformations(),{UNMASKED_RENDERER:a,UNMASKED_VENDOR:i,WEBGL_VERSION:s}=t;this.vendor=i.value,this.gpu=a.value,this.webgl=s.value}this.monitor.setRenderWindow(t),this.monitor.update()},window.addEventListener("resize",this.monitor.update),this.subscriptions=[this.proxyManager.onModified(this.monitor.update).unsubscribe,this.proxyManager.onActiveViewChange(this.updateActiveView).unsubscribe,()=>window.removeEventListener("resize",this.monitor.update)],this.monitor.setContainer(this.$el.querySelector(".js-monitor")),this.monitor.getFpsMonitorContainer().style.flexDirection="column",this.updateActiveView()}},mounted(){this.$nextTick(this.onMounted)},beforeDestroy:function(){for(this.monitor&&(this.monitor.delete(),this.monitor=null);this.subscriptions.length;)this.subscriptions.pop()()}},o={card:"GPUInformation-card-uYItl",heading:"GPUInformation-heading-_XHR1",divider:"GPUInformation-divider-JhBB2",monitor:"GPUInformation-monitor-Fu0yC",table:"GPUInformation-table-BU0Qk"},r=a(571),l=a(3),c=a.n(l),d=a(591),u=a(627),p=a(634),m=a(600),v=a(601),g=a(643),h=a(644);e=a.hmd(e);var y={},f=!1;e.hot,e.hot;var b=(0,r.Z)(n,i,[],!1,(function(e){f||(y.$style=o.locals||o,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return y.$style}}))}),null,null);c()(b,{VCard:d.Z,VContainer:u.Z,VDivider:p.Z,VIcon:m.Z,VLayout:v.Z,VSpacer:g.Z,VTooltip:h.Z}),b.options.__file="src/components/widgets/GPUInformation/index.vue";var x=b.exports},36:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.$style.wrapper},e._l(e.palette,(function(t){return a("div",{key:t,class:e.$style.item},[a("div",{class:e.$style.blot,style:e.getStyles(t),on:{click:function(a){return e.$emit("input",t)}}},[t.toLowerCase()===e.selectedColor?a("v-icon",{class:e.$style.check,attrs:{size:e.size}},[e._v("\n        mdi-check\n      ")]):e._e()],1)])})),0)};i._withStripped=!0;var s={name:"PalettePicker",props:{palette:{type:Array,default:()=>[]},size:{type:Number,default:24},value:{type:String,default:""}},computed:{selectedColor(){return this.value.toLowerCase()}},methods:{getStyles(e){return{width:`${this.size}px`,height:`${this.size}px`,background:e}}}},n={wrapper:"PalettePicker-wrapper-Cz9zR",item:"PalettePicker-item-q0Hig",check:"PalettePicker-check-m60ux",blot:"PalettePicker-blot-JTooX"},o=a(571),r=a(3),l=a.n(r),c=a(600);e=a.hmd(e);var d={},u=!1;e.hot,e.hot;var p=(0,o.Z)(s,i,[],!1,(function(e){u||(d.$style=n.locals||n,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return d.$style}}))}),null,null);l()(p,{VIcon:c.Z}),p.options.__file="src/components/widgets/PalettePicker/index.vue";var m=p.exports},142:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.$style.container})};i._withStripped=!0;var s=a(365);let n=null;var o={props:{source:{type:Object},piecewiseFunction:{required:!0,type:Object},proxyManager:{required:!0}},data:()=>({}),methods:{onOpacityChange:function(){if(n)return;n=this.piecewiseWidget;const e=this.piecewiseFunction;if(e){e.setGaussians(this.piecewiseWidget.getGaussians());const t=this.piecewiseWidget.getOpacityRange();e.getLookupTableProxy().setDataRange(...t)}n=null},updateWidget:function(){const e=this.piecewiseFunction;if(e){const t=e.getLookupTableProxy().getLookupTable();this.piecewiseWidget.setGaussians(e.getGaussians()),this.source?this.piecewiseWidget.setDataArray(this.source.getDataset().getPointData().getScalars().getData()):this.piecewiseWidget.setDataArray(Float32Array.from(e.getDataRange())),this.piecewiseWidget.setColorTransferFunction(t),this.subscriptions.push(t.onModified((()=>{if(n)return;n=this.piecewiseWidget;const t=this.piecewiseWidget.getOpacityRange();e.getLookupTableProxy().setDataRange(...t),this.piecewiseWidget.render(),n=null}))),this.piecewiseWidget.render()}},onMounted:function(){this.piecewiseWidget=s.ZP.newInstance({numberOfBins:256,size:[280,150]}),this.piecewiseWidget.updateStyle({backgroundColor:"rgba(255, 255, 255, 0.6)",histogramColor:"rgba(100, 100, 100, 0.5)",strokeColor:"rgb(0, 0, 0)",activeColor:"rgb(255, 255, 255)",handleColor:"rgb(50, 150, 50)",buttonDisableFillColor:"rgba(255, 255, 255, 0.5)",buttonDisableStrokeColor:"rgba(0, 0, 0, 0.5)",buttonStrokeColor:"rgba(0, 0, 0, 1)",buttonFillColor:"rgba(255, 255, 255, 1)",strokeWidth:2,activeStrokeWidth:3,buttonStrokeWidth:1.5,handleWidth:3,iconSize:0,padding:10}),this.subscriptions=[],this.widgetSubscriptions=[this.piecewiseWidget.onOpacityChange((()=>{this.onOpacityChange()})),this.piecewiseWidget.onAnimation((e=>{this.piecewiseFunction&&this.proxyManager.setAnimationOnAllViews(e)}))],this.piecewiseWidget.setContainer(this.$el),this.piecewiseWidget.bindMouseListeners(),this.updateWidget(),this.onOpacityChange()}},mounted(){this.$nextTick(this.onMounted)},beforeDestroy:function(){for(;this.widgetSubscriptions.length;)this.widgetSubscriptions.pop().unsubscribe();for(;this.subscriptions.length;)this.subscriptions.pop().unsubscribe();this.piecewiseWidget.unbindMouseListeners(),this.piecewiseWidget.setContainer(null)},updated(){for(;this.subscriptions.length;)this.subscriptions.pop().unsubscribe();this.updateWidget()}},r={container:"PiecewiseFunctionEditor-container-_jIUo"},l=a(571);e=a.hmd(e);var c={},d=!1;e.hot,e.hot;var u=(0,l.Z)(o,i,[],!1,(function(e){d||(c.$style=r.locals||r,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return c.$style}}))}),null,null);u.options.__file="src/components/widgets/PiecewiseFunctionEditor/index.vue";var p=u.exports},80:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"container",class:e.$style.container},[a("div",{on:{click:function(t){e.visible=!e.visible}}},[e._t("trigger"),e._v(" "),a("div",{ref:"anchor",staticStyle:{width:"0",height:"0",margin:"0",padding:"0"}})],2),e._v(" "),e.visible?a("portal",{attrs:{selector:"#app-portal-mount"}},[a("div",{ref:"popup",class:e.$style.popup,style:e.getPositioning()},[e._t("popup",null,{close:e.close})],2)]):e._e()],1)};i._withStripped=!0;var s={name:"PopUp",components:{Portal:a(376).h_},data:()=>({visible:!1}),mounted(){document.addEventListener("mousedown",this.handleMouse,!0),document.addEventListener("keydown",this.handleEsc)},beforeDestroy(){document.removeEventListener("mousedown",this.handleMouse,!0),document.removeEventListener("keydown",this.handleEsc)},methods:{handleMouse(e){if(this.visible){let t=e.target;for(;t&&t!==this.$refs.container&&t!==this.$refs.popup;)t=t.parentElement;null===t&&(this.visible=!1)}},handleEsc(e){this.visible&&27===e.keyCode&&this.close()},getPositioning(){const e=this.$refs.anchor,{top:t,left:a}=e.getBoundingClientRect(),i=window.innerHeight;return t>i/2?{bottom:i-t+"px",left:`${a}px`}:{top:`${t}px`,left:`${a}px`}},close(){this.visible=!1}}},n={container:"PopUp-container-MOF8K",popup:"PopUp-popup-P9jw2"},o=a(571);e=a.hmd(e);var r={},l=!1;e.hot,e.hot;var c=(0,o.Z)(s,i,[],!1,(function(e){l||(r.$style=n.locals||n,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return r.$style}}))}),null,null);c.options.__file="src/components/widgets/PopUp/index.vue";var d=c.exports},81:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-select",{directives:[{name:"show",rawName:"v-show",value:!e.shouldHide,expression:"!shouldHide"}],attrs:{label:e.label,items:e.sourceList,"item-text":"name","item-value":"proxyId",disabled:e.disabled,value:e.selection},on:{input:e.setInternalValue}})};i._withStripped=!0;function s(e){return{name:e.getName(),proxyId:e.getProxyId()}}var n={name:"SourceSelect",props:{filterFunc:{type:Function,default:()=>()=>!0},label:{type:String,default:()=>""},bindToActiveSource:{type:Boolean,default:()=>!1},hideIfOneDataset:{type:Boolean,default:()=>!1},value:{default:()=>-1},disabled:{type:Boolean,default:()=>!1}},data:()=>({sourceList:[],internalValue:-1}),computed:{selection(){const e=this.$proxyManager.getProxyById(this.internalValue);return e&&"Sources"===e.getProxyGroup()?s(e):null},shouldHide(){return this.hideIfOneDataset&&this.sourceList.length<=1}},watch:{value(e){this.internalValue=e}},mounted(){const e=this.$proxyManager.getActiveSource();e&&this.setInternalValue(e.getProxyId()),this.updateSourceList()},proxyManagerHooks:{onProxyModified(e){e.getProxyId()===this.waitForActiveDataset&&(this.waitForActiveDataset=null,this.setInternalValue(e.getProxyId())),this.updateSourceList()},onActiveSourceChange(e){if(this.bindToActiveSource)if(e){if(e.getProxyId()!==this.internalValue){const t=e.getProxyId();e.getDataset()?this.setInternalValue(t):this.waitForActiveDataset=t}}else this.setInternalValue(-1)},onProxyRegistrationChange(e){const{proxyGroup:t}=e;"Sources"===t&&this.updateSourceList()}},methods:{updateSourceList(){const e=this.$proxyManager.getSources().filter((e=>e&&!!e.getDataset()&&this.filterFunc(e)));this.sourceList=e.map((e=>s(e)))},setInternalValue(e){e!==this.internalValue&&(this.internalValue=e,this.$emit("input",e))}}},o=a(571),r=a(3),l=a.n(r),c=a(630),d=(0,o.Z)(n,i,[],!1,null,null,null);l()(d,{VSelect:c.Z}),d.options.__file="src/components/widgets/SourceSelect/index.vue";var u=d.exports},75:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.svg?a("img",{staticClass:"pv-no-select",attrs:{src:e.svg}}):e._e()};i._withStripped=!0;var s={name:"SvgIcon",props:{icon:String},data:()=>({svg:null}),watch:{icon(e){this.icon&&this.importIcon(e)}},mounted(){this.icon&&this.importIcon(this.icon)},methods:{importIcon(e){return a(482)(`./${e}.svg`).then((e=>{this.svg=e.default||e})).catch((e=>{throw this.svg=null,e}))}}},n=(0,a(571).Z)(s,i,[],!1,null,null,null);n.options.__file="src/components/widgets/SvgIcon/index.vue";var o=n.exports},144:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var i=function(){var e,t=this,a=t.$createElement,i=t._self._c||a;return i("li",{class:t.$style.node},[i("div",{class:t.$style.header,on:{click:t.onItemClick}},[t.item[t.childrenKey]?i("div",{class:t.$style.expander},[i("v-icon",{class:(e={},e[t.$style.arrow]=!0,e[t.$style.openArrow]=t.open||t.value,e)},[t._v("\n        mdi-menu-down\n      ")])],1):t._e(),t._v(" "),i("span",{staticClass:"body-2",class:t.$style.name},[t._v(t._s(t.item[t.labelKey]))])]),t._v(" "),t.item[t.childrenKey]?i("ul",{directives:[{name:"show",rawName:"v-show",value:t.open||t.value,expression:"open || value"}]},t._l(t.item[t.childrenKey],(function(e,a){return i("node",t._b({key:a,attrs:{item:e},on:{input:function(e){return t.$emit("input",e)}}},"node",{open:t.open,labelKey:t.labelKey,childrenKey:t.childrenKey},!1))})),1):t._e()])};i._withStripped=!0;var s={name:"Node",props:{item:{},open:{type:Boolean,default:!1},labelKey:{type:String,default:()=>"name"},childrenKey:{type:String,default:()=>"children"}},data:()=>({value:!1}),methods:{onItemClick:function(){this.item[this.childrenKey]?this.value=!this.value:this.$emit("input",this.item)}}},n=a(374),o=a(571),r=a(3),l=a.n(r),c=a(600);e=a.hmd(e);var d={},u=!1;e.hot,e.hot;var p=(0,o.Z)(s,i,[],!1,(function(e){u||(d.$style=n.Z.locals||n.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return d.$style}}))}),null,null);l()(p,{VIcon:c.Z}),p.options.__file="src/components/widgets/TreeView/Node/index.vue";var m=p.exports},143:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.$style.wrapper},[a("v-text-field",{ref:"filterInput",attrs:{placeholder:"Filter...",clearable:"","hide-details":""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.trySelect(e.filteredTree)}},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),e._l(e.filteredTree,(function(t,i){return a("node",{key:i,attrs:{item:t,open:!!e.filterText,labelKey:e.labelKey,childrenKey:e.childrenKey},on:{input:e.onSelect}})}))],2)};i._withStripped=!0;var s={name:"TreeView",components:{Node:a(144).Z},props:{tree:{type:Array,default:()=>[]},filterFunc:Function,labelKey:{type:String,default:()=>"name"},childrenKey:{type:String,default:()=>"children"}},data:()=>({filterText:null}),computed:{filteredTree(){return this.filterText?this.filter(this.tree,this.filterText,this.filterFunc||this.indexOfFilterFunc):this.tree}},methods:{onSelect:function(e){this.$emit("input",e)},trySelect:function(e){1===e.length&&(e[0][this.childrenKey]?this.trySelect(e[0][this.childrenKey]):this.onSelect(e[0]))},filter:function(e,t,a){const i=[];for(let s=0;s<e.length;++s)if(e[s][this.childrenKey]){const n=this.filter(e[s][this.childrenKey],t,a);n.length&&i.push({...e[s],[this.childrenKey]:n})}else a(e[s],t)&&i.push(e[s]);return i},indexOfFilterFunc:function(e,t){return e[this.labelKey].toLowerCase().indexOf(t.toLowerCase())>-1}}},n=a(374),o=a(571),r=a(3),l=a.n(r),c=a(624);e=a.hmd(e);var d={},u=!1;e.hot,e.hot;var p=(0,o.Z)(s,i,[],!1,(function(e){u||(d.$style=n.Z.locals||n.Z,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return d.$style}}))}),null,null);l()(p,{VTextField:c.Z}),p.options.__file="src/components/widgets/TreeView/index.vue";var m=p.exports},482:function(e,t,a){var i={"./VizualSimuLab-logo.svg":483,"./VizualSimuLab.svg":484,"./angle-tool.svg":485,"./glance-logo-mark.svg":486,"./itkjs.svg":487,"./kitware-logo.svg":488,"./kitware.svg":489,"./length-tool.svg":490,"./text-tool.svg":491,"./vtkjs.svg":492};function s(e){return n(e).then((function(e){return a.t(e,1)}))}function n(e){return Promise.resolve().then((function(){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}))}s.keys=function(){return Object.keys(i)},s.resolve=n,s.id=482,e.exports=s},508:function(e,t,a){"use strict";e.exports=a.p+"8eda3f7fe71e85dc11fd.png"},509:function(e,t,a){"use strict";e.exports=a.p+"9273392fb2027590a87f.png"},510:function(e,t,a){"use strict";e.exports=a.p+"ac7c7cce0bdeb02a9e8a.png"},483:function(e,t,a){"use strict";e.exports=a.p+"3338e1c3e5c54566b711.svg"},484:function(e,t,a){"use strict";e.exports=a.p+"e3736c594b50de46e3b4.svg"},485:function(e,t,a){"use strict";e.exports=a.p+"5a39a3263089fab6ab24.svg"},486:function(e,t,a){"use strict";e.exports=a.p+"739652544df2c34fdc58.svg"},487:function(e,t,a){"use strict";e.exports=a.p+"19b58d68d243be25286a.svg"},488:function(e,t,a){"use strict";e.exports=a.p+"cc5d8973c8e2af638075.svg"},489:function(e,t,a){"use strict";e.exports=a.p+"011374e7707f227f9666.svg"},490:function(e,t,a){"use strict";e.exports=a.p+"9b3eb3ca56e835ab0258.svg"},491:function(e,t,a){"use strict";e.exports=a.p+"a3e7e875d73fd955cf5e.svg"},492:function(e,t,a){"use strict";e.exports=a.p+"033029be7d659ffab8c6.svg"},467:function(){},354:function(){}},function(e){return e.O(0,[1],(function(){return t=319,e(e.s=t);var t})),e.O()}])}));